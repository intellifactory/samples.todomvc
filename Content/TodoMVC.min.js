try{Object.defineProperty(Error.prototype,"message",{enumerable:!0})}catch(e){}var IntelliFactory={Runtime:{Class:function(n,t){function i(){}i.prototype=n;for(var r in t)i[r]=t[r];return i},Define:function(n,t){function i(n,t){var u,f,e;for(u in t)if(f=typeof n[u],e=typeof t[u],f=="object"&&e=="object")i(n[u],t[u]);else if(f=="undefined"||r)n[u]=t[u];else throw new Error("Name conflict: "+u);}var r=!!this.overwrite;i(n,t)},DeleteEmptyFields:function(n,t){for(var r,i=0;i<t.length;i++)r=t[i],n[r]===undefined&&delete n[r];return n},Field:function(n){var t,i=!1;return function(){return i||(i=!0,t=n()),t}},GetOptional:function(n){return n===undefined?{$:0}:{$:1,$0:n}},New:function(n,t){var i=new n;for(var r in t)r in i||(i[r]=t[r]);return i},NewObject:function(n){for(var i={},t=0;t<n.length;t++)i[n[t][0]]=n[t][1];return i},OnInit:function(n){"init"in this||(this.init=[]);this.init.push(n)},OnLoad:function(n){"load"in this||(this.load=[]);this.load.push(n)},Inherit:function(n,t){var i,r;if(typeof t=="function"){i=n.prototype;n.prototype=new t;for(r in i)n.prototype[r]=i[r]}},Safe:function(n){return n===undefined?{}:n},SetOptional:function(n,t,i){i.$==0?delete n[t]:n[t]=i.$0},Start:function(){function n(n){for(var t=0;t<n.length;t++)n[t]()}"init"in this&&(n(this.init),this.init=[]);"load"in this&&(n(this.load),this.load=[])},Bind:function(n){return function(){return n.apply(this,arguments)}},CreateFuncWithArgs:function(n){return function(){return n(Array.prototype.slice.call(arguments))}},CreateFuncWithOnlyThis:function(n){return function(){return n(this)}},CreateFuncWithThis:function(n){return function(){return n(this).apply(null,arguments)}},CreateFuncWithThisArgs:function(n){return function(){return n(this)(Array.prototype.slice.call(arguments))}},CreateFuncWithRest:function(n,t){return function(){return t(Array.prototype.slice.call(arguments,0,n).concat([Array.prototype.slice.call(arguments,n)]))}},CreateFuncWithArgsRest:function(n,t){return function(){return t([Array.prototype.slice.call(arguments,0,n),Array.prototype.slice.call(arguments,n)])}},UnionByType:function(n,t,i){for(var u,f=typeof t,r=0;r<n.length;r++)if(u=n[r],typeof u=="number"){if(Array.isArray(t)&&(u==0||t.length==u))return{$:r,$0:t}}else if(u==f)return{$:r,$0:t};if(!i)throw new Error("Type not expected for creating Choice value.");}}};Date.now||(Date.now=function(){return(new Date).getTime()});
var JSON;JSON||(JSON={}),function(){"use strict";function i(n){return n<10?"0"+n:n}function f(n){return o.lastIndex=0,o.test(n)?'"'+n.replace(o,function(n){var t=s[n];return typeof t=="string"?t:"\\u"+("0000"+n.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+n+'"'}function r(i,e){var s,l,h,a,v=n,c,o=e[i];o&&typeof o=="object"&&typeof o.toJSON=="function"&&(o=o.toJSON(i));typeof t=="function"&&(o=t.call(e,i,o));switch(typeof o){case"string":return f(o);case"number":return isFinite(o)?String(o):"null";case"boolean":case"null":return String(o);case"object":if(!o)return"null";if(n+=u,c=[],Object.prototype.toString.apply(o)==="[object Array]"){for(a=o.length,s=0;s<a;s+=1)c[s]=r(s,o)||"null";return h=c.length===0?"[]":n?"[\n"+n+c.join(",\n"+n)+"\n"+v+"]":"["+c.join(",")+"]",n=v,h}if(t&&typeof t=="object")for(a=t.length,s=0;s<a;s+=1)typeof t[s]=="string"&&(l=t[s],h=r(l,o),h&&c.push(f(l)+(n?": ":":")+h));else for(l in o)Object.prototype.hasOwnProperty.call(o,l)&&(h=r(l,o),h&&c.push(f(l)+(n?": ":":")+h));return h=c.length===0?"{}":n?"{\n"+n+c.join(",\n"+n)+"\n"+v+"}":"{"+c.join(",")+"}",n=v,h}}typeof Date.prototype.toJSON!="function"&&(Date.prototype.toJSON=function(){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+i(this.getUTCMonth()+1)+"-"+i(this.getUTCDate())+"T"+i(this.getUTCHours())+":"+i(this.getUTCMinutes())+":"+i(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(){return this.valueOf()});var e=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,o=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,n,u,s={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},t;typeof JSON.stringify!="function"&&(JSON.stringify=function(i,f,e){var o;if(n="",u="",typeof e=="number")for(o=0;o<e;o+=1)u+=" ";else typeof e=="string"&&(u=e);if(t=f,f&&typeof f!="function"&&(typeof f!="object"||typeof f.length!="number"))throw new Error("JSON.stringify");return r("",{"":i})});typeof JSON.parse!="function"&&(JSON.parse=function(n,t){function r(n,i){var f,e,u=n[i];if(u&&typeof u=="object")for(f in u)Object.prototype.hasOwnProperty.call(u,f)&&(e=r(u,f),e!==undefined?u[f]=e:delete u[f]);return t.call(n,i,u)}var i;if(n=String(n),e.lastIndex=0,e.test(n)&&(n=n.replace(e,function(n){return"\\u"+("0000"+n.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(n.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return i=eval("("+n+")"),typeof t=="function"?r({"":i},""):i;throw new SyntaxError("JSON.parse");})}();
(function(){var $$=this,$=this.IntelliFactory.Runtime,a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,_0,_1,_2;$.Define($$,{Arrays:{contains:function(_3,_4){var _5,_6,_7;_5=true;_6=0;_7=_4.length;while(_5?_6<_7:false){a.Equals(_4[_6],_3)?_5=false:_6=_6+1;}return!_5;},mapFold:function(_8,_9,_){var ba,bb,bc,bd,be,bf;ba=b(_.length);bb=_9;for(bc=0;bc<=_.length-1;bc++){bd=(_8(bb))(c.get(_,bc));be=bd[1];bf=bd[0];c.set(ba,bc,bf);bb=be;}return[ba,bb];},mapFoldBack:function(bf,bg,bh){var bi,bj,bk,bl,bm,bn,bo,bp;bi=b(bg.length);bj=bh;bk=bg.length;for(bl=1;bl<=bk;bl++){bm=bk-bl;bn=(bf(c.get(bg,bm)))(bj);bo=bn[1];bp=bn[0];c.set(bi,bm,bp);bj=bo;}return[bi,bj];},sortInPlaceByDescending:function(bq,br){return br.sort(function(bs,bt){return-d.Compare(bq(bs),bq(bt));});},splitInto:function(bu,bv){var bw,bx,by,bz,bA,bB,bC,bD;bu<=0?d.FailWith("Count must be positive"):null;bw=c.length(bv);if(bw===0){bx=[];}else{by=d.Min(bu,bw);bz=b(by);bA=bw/by>>0;bB=0;for(bC=0;bC<=bw%by-1;bC++){c.set(bz,bC,c.sub(bv,bB,bA+1));bB=bB+bA+1;}for(bD=bw%by;bD<=by-1;bD++){c.set(bz,bD,c.sub(bv,bB,bA));bB=bB+bA;}bx=bz;}return bx;},tryFindBack:function(bE,bF){var bG,bH;bG={$:0};bH=bF.length-1;while(bH>0?bG.$==0:false){bE(c.get(bF,bH))?bG={$:1,$0:c.get(bF,bH)}:null;bH=bH-1;}return bG;},tryFindIndexBack:function(bI,bJ){var bK,bL;bK={$:0};bL=bJ.length-1;while(bL>0?bK.$==0:false){bI(c.get(bJ,bL))?bK={$:1,$0:bL}:null;bL=bL-1;}return bK;}},List:{map3:function(bM,bN,bO,bP){var bQ;bQ=c.map2(function(bR){return function(bS){return bR(bS);};},c.map2(bM,c.ofSeq(bN),c.ofSeq(bO)),c.ofSeq(bP));return e.ofArray(bQ);},skip:function(bT,bU){var bV,bW,bX,bY;bV=bU;for(bW=1;bW<=bT;bW++){if(bV.$==0){bX=d.FailWith("Input list too short.");}else{bY=bV.$1;bX=bV=bY;}}return bV;},skipWhile:function(bZ,b0){var b1;b1=b0;while(!(b1.$==0)?bZ(e.head(b1)):false){b1=e.tail(b1);}return b1;}},Seq:{chunkBySize:function(b2,b3){var b4;b2<=0?d.FailWith("Chunk size must be positive"):null;b4=function(){var b6,b7,b9;b6=f.Get(b3);b7=function(){return b6.Dispose();};b9=function(b_){var b$,ca,cb;if(b6.MoveNext()){ca=[b6.get_Current()];while(c.length(ca)<b2?b6.MoveNext():false){cb=ca.push(b6.get_Current());}b_.c=ca;b$=true;}else{b$=false;}return b$;};return g.New(null,null,b9,b7);};return h.Of(b4);},compareWith:function(cc,cd,ce){var cf,cg,ch,ci,cj,ck,cl;cf=f.Get(cd);try{ch=f.Get(ce);try{cj=0;ck=true;while(ck?cj===0:false){cl=[cf.MoveNext(),ch.MoveNext()];cl[0]?cl[1]?cj=(cc(cf.get_Current()))(ch.get_Current()):cj=1:cl[1]?cj=-1:ck=false;}ci=cj;}finally{ch.Dispose!=undefined?ch.Dispose():null;}cg=ci;}finally{cf.Dispose!=undefined?cf.Dispose():null;}return cg;},contains:function(cm,cn){var co,cp,cq;co=f.Get(cn);try{cq=false;while(!cq?co.MoveNext():false){cq=a.Equals(co.get_Current(),cm);}cp=cq;}finally{co.Dispose!=undefined?co.Dispose():null;}return cp;},countBy:function(cr,cs){var ct;ct=function(){var cv,cw,cx,cy,cz,cA,cB,cC,cE,cF;cv={};cw=f.Get(cs);try{cy=[];while(cw.MoveNext()){cz=cr(cw.get_Current());cA=a.Hash(cz);if(cv.hasOwnProperty(cA)){cB=void(cv[cA]=cv[cA]+1);}else{cy.push(cz);cB=void(cv[cA]=1);}}cC=function(cD){return[cD,cv[a.Hash(cD)]];};cE=cy.slice(0);cF=c.map(cC,cE);cx=cF;}finally{cw.Dispose!=undefined?cw.Dispose():null;}return cx;};return i.delay(ct);},distinct:function(cG){return j.distinctBy(function(cH){return cH;},cG);},distinctBy:function(cI,cJ){var cK;cK=function(){var cM,cN,cO,cW,cY;cM=f.Get(cJ);cN=b.prototype.constructor.apply(b,[]);cO=function(cP){var cQ,cR,cS,cT,cU,cV;cQ=cI(cP);cR=a.Hash(cQ);cS=cN[cR];if(a.Equals(cS,undefined)){cN[cR]=[cQ];cT=true;}else{if(k.contains(cQ,cS)){cU=false;}else{cV=cS.push(cQ);cU=true;}cT=cU;}return cT;};cW=function(){return cM.Dispose();};cY=function(cZ){var c0,c1,c2,c3;if(cM.MoveNext()){c1=cM.get_Current();c2=cO(c1);while(!c2?cM.MoveNext():false){c1=cM.get_Current();c2=cO(c1);}if(c2){cZ.c=c1;c3=true;}else{c3=false;}c0=c3;}else{c0=false;}return c0;};return g.New(null,null,cY,cW);};return h.Of(cK);},except:function(c4,c5){var c6;c6=function(){var c8,c9,c_,df,dg,dh,di,dj,dl;c8=f.Get(c5);c9=b.prototype.constructor.apply(b,[]);c_=function(c$){var da,db,dc,dd,de;da=a.Hash(c$);db=c9[da];if(a.Equals(db,undefined)){c9[da]=[c$];dc=true;}else{if(k.contains(c$,db)){dd=false;}else{de=db.push(c$);dd=true;}dc=dd;}return dc;};df=f.Get(c4);try{while(df.MoveNext()){dh=df.get_Current();di=c_(dh);}}finally{df.Dispose!=undefined?df.Dispose():null;}dj=function(){return c8.Dispose();};dl=function(dm){var dn,_do,dp,dq;if(c8.MoveNext()){_do=c8.get_Current();dp=c_(_do);while(!dp?c8.MoveNext():false){_do=c8.get_Current();dp=c_(_do);}if(dp){dm.c=_do;dq=true;}else{dq=false;}dn=dq;}else{dn=false;}return dn;};return g.New(null,null,dl,dj);};return h.Of(c6);},groupBy:function(dr,ds){return i.delay(function(){var du,dv,dw,dx,dy,dz,dA,dB;du={};dv={};dw=[];dx=f.Get(ds);try{while(dx.MoveNext()){dz=dx.get_Current();dA=dr(dz);dB=a.Hash(dA);!du.hasOwnProperty(dB)?dw.push(dA):null;dv[dB]=dA;du.hasOwnProperty(dB)?du[dB].push(dz):void(du[dB]=[dz]);}dy=c.map(function(dC){return[dC,du[a.Hash(dC)]];},dw);}finally{dx.Dispose!=undefined?dx.Dispose():null;}return dy;});},insufficient:function(){return d.FailWith("The input sequence has an insufficient number of elements.");},last:function(dD){var dE,dF,dG,dH;dE=f.Get(dD);try{dG=dE.MoveNext();if(!dG){dH=j.insufficient();}else{while(dE.MoveNext()){}dH=dE.get_Current();}dF=dH;}finally{dE.Dispose!=undefined?dE.Dispose():null;}return dF;},nonNegative:function(){return d.FailWith("The input must be non-negative.");},pairwise:function(dI){var dJ,dL;dJ=function(dK){return[c.get(dK,0),c.get(dK,1)];};dL=j.windowed(2,dI);return i.map(dJ,dL);},truncate:function(dM,dN){return i.delay(function(){return i.enumUsing(f.Get(dN),function(dP){var dQ;dQ=[0];return i.enumWhile(function(){return dP.MoveNext()?dQ[0]<dM:false;},i.delay(function(){l.incr(dQ);return[dP.get_Current()];}));});});},tryHead:function(dT){var dU,dV;dU=f.Get(dT);try{dV=dU.MoveNext()?{$:1,$0:dU.get_Current()}:{$:0};}finally{dU.Dispose!=undefined?dU.Dispose():null;}return dV;},tryItem:function(dW,dX){var dY,dZ,d0,d1,d2;if(dW<0){dY={$:0};}else{dZ=0;d0=f.Get(dX);try{d2=true;while(d2?dZ<=dW:false){d0.MoveNext()?dZ=dZ+1:d2=false;}d1=d2?{$:1,$0:d0.get_Current()}:{$:0};}finally{d0.Dispose!=undefined?d0.Dispose():null;}dY=d1;}return dY;},tryLast:function(d3){var d4,d5,d6;d4=f.Get(d3);try{if(d4.MoveNext()){while(d4.MoveNext()){}d6={$:1,$0:d4.get_Current()};}else{d6={$:0};}d5=d6;}finally{d4.Dispose!=undefined?d4.Dispose():null;}return d5;},unfold:function(d7,d8){var d9;d9=function(){var d$;d$=function(ea){var eb,ec,ed,ee;eb=d7(ea.s);if(eb.$==0){ec=false;}else{ed=eb.$0[0];ee=eb.$0[1];ea.c=ed;ea.s=ee;ec=true;}return ec;};return g.New(d8,null,d$,function(){});};return h.Of(d9);},windowed:function(eg,eh){eg<=0?d.FailWith("The input must be positive."):null;return i.delay(function(){return i.enumUsing(f.Get(eh),function(ej){var ek;ek=[];return i.append(i.enumWhile(function(){return ek.length<eg?ej.MoveNext():false;},i.delay(function(){ek.push(ej.get_Current());return i.empty();})),i.delay(function(){return ek.length===eg?i.append([ek.slice(0)],i.delay(function(){return i.enumWhile(function(){return ej.MoveNext();},i.delay(function(){ek.shift();ek.push(ej.get_Current());return[ek.slice(0)];}));})):i.empty();}));});});}},WebSharper:{AggregateException:$.Class({},{New:function(er){return $.New(this,m.New1("One or more errors occurred.",er));},New1:function(es){return $.New(this,n.New1(es));}}),ArgumentException:$.Class({},{New:function(){return $.New(this,o.New1("Value does not fall within the expected range."));},New1:function(eu){return $.New(this,n.New1(eu));}}),Arrays:{average:function(ev){return p(c.sum(ev))/p(ev.length);},averageBy:function(ew,ex){return p(c.sumBy(ew,ex))/p(ex.length);},blit:function(ey,ez,eA,eB,eC){var eD;c.checkRange(ey,ez,eC);c.checkRange(eA,eB,eC);for(eD=0;eD<=eC-1;eD++){c.set(eA,eB+eD,c.get(ey,ez+eD));}return;},checkBounds:function(eE,eF){return(eF<0?true:eF>=eE.length)?d.FailWith("Index was outside the bounds of the array."):null;},checkBounds2D:function(eG,eH,eI){return(((eH<0?true:eI<0)?true:eH>=eG.length)?true:eI>=(eG.length?eG[0].length:0))?d.Raise(q.New()):null;},checkLength:function(eJ,eK){return eJ.length!==eK.length?d.FailWith("Arrays differ in length."):null;},checkRange:function(eL,eM,eN){return((eN<0?true:eM<0)?true:eL.length<eM+eN)?d.FailWith("Index was outside the bounds of the array."):null;},choose:function(eO,eP){var eQ,eR,eS,eT,eU;eQ=[];for(eR=0;eR<=eP.length-1;eR++){eS=eO(c.get(eP,eR));if(eS.$==0){eT=null;}else{eU=eS.$0;eT=eQ.push(eU);}}return eQ;},chunkBySize:function(eV,eW){var eX;eX=j.chunkBySize(eV,eW);return i.toArray(eX);},collect:function(eY,eZ){return b.prototype.concat.apply([],c.map(eY,eZ));},compareWith:function(e0,e1,e2){return j.compareWith(e0,e1,e2);},concat:function(e3){return b.prototype.concat.apply([],c.ofSeq(e3));},contains:function(e4,e5){return j.contains(e4,e5);},countBy:function(e6,e7){var e8;e8=j.countBy(e6,e7);return i.toArray(e8);},create:function(e9,e_){var e$,fa;e$=b(e9);for(fa=0;fa<=e9-1;fa++){c.set(e$,fa,e_);}return e$;},create2D:function(fb){var fc,fe,ff;fc=function(fd){return c.ofSeq(fd);};fe=i.map(fc,fb);ff=c.ofSeq(fe);ff.dims=2;return ff;},distinct:function(fg){var fh;fh=j.distinct(fg);return i.toArray(fh);},distinctBy:function(fi,fj){var fk;fk=j.distinctBy(fi,fj);return i.toArray(fk);},exactlyOne:function(fl){return c.length(fl)===1?c.get(fl,0):d.FailWith("The input does not have precisely one element.");},except:function(fm,fn){var fo;fo=j.except(fm,fn);return i.toArray(fo);},exists2:function(fp,fq,fr){c.checkLength(fq,fr);return i.exists2(fp,fq,fr);},fill:function(fs,ft,fu,fv){var fw;c.checkRange(fs,ft,fu);for(fw=ft;fw<=ft+fu-1;fw++){c.set(fs,fw,fv);}return;},filter:function(fx,fy){var fz,fA;fz=[];for(fA=0;fA<=fy.length-1;fA++){fx(c.get(fy,fA))?fz.push(c.get(fy,fA)):null;}return fz;},find:function(fB,fC){var fD,fE,fF;fD=c.tryFind(fB,fC);if(fD.$==0){fE=d.FailWith("KeyNotFoundException");}else{fF=fD.$0;fE=fF;}return fE;},findBack:function(fG,fH){var fI,fJ,fK;fI=k.tryFindBack(fG,fH);if(fI.$==0){fJ=d.FailWith("KeyNotFoundException");}else{fK=fI.$0;fJ=fK;}return fJ;},findINdex:function(fL,fM){var fN,fO,fP;fN=c.tryFindIndex(fL,fM);if(fN.$==0){fO=d.FailWith("KeyNotFoundException");}else{fP=fN.$0;fO=fP;}return fO;},findIndexBack:function(fQ,fR){var fS,fT,fU;fS=k.tryFindIndexBack(fQ,fR);if(fS.$==0){fT=d.FailWith("KeyNotFoundException");}else{fU=fS.$0;fT=fU;}return fT;},fold:function(fV,fW,fX){var fY,fZ;fY=fW;for(fZ=0;fZ<=fX.length-1;fZ++){fY=(fV(fY))(c.get(fX,fZ));}return fY;},fold2:function(f0,f1,f2,f3){var f4,f5;c.checkLength(f2,f3);f4=f1;for(f5=0;f5<=f2.length-1;f5++){f4=((f0(f4))(c.get(f2,f5)))(c.get(f3,f5));}return f4;},foldBack:function(f6,f7,f8){var f9,f_,f$;f9=f8;f_=f7.length;for(f$=1;f$<=f_;f$++){f9=(f6(c.get(f7,f_-f$)))(f9);}return f9;},foldBack2:function(ga,gb,gc,gd){var ge,gf,gg;c.checkLength(gb,gc);ge=gb.length;gf=gd;for(gg=1;gg<=ge;gg++){gf=((ga(c.get(gb,ge-gg)))(c.get(gc,ge-gg)))(gf);}return gf;},forall2:function(gh,gi,gj){c.checkLength(gi,gj);return i.forall2(gh,gi,gj);},get:function(gk,gl){c.checkBounds(gk,gl);return gk[gl];},get2D:function(gm,gn,go){c.checkBounds2D(gm,gn,go);return gm[gn][go];},groupBy:function(gp,gq){var gr,gv,gw;gr=function(gs){var gt,gu;gt=gs[0];gu=gs[1];return[gt,i.toArray(gu)];};gv=j.groupBy(gp,gq);gw=i.toArray(gv);return c.map(gr,gw);},head:function(gx){return e.head(e.ofArray(gx));},indexed:function(gy){return c.mapi(function(gz){return function(gA){return[gz,gA];};},gy);},init:function(gB,gC){var gD,gE;gB<0?d.FailWith("Negative size given."):null;gD=b(gB);for(gE=0;gE<=gB-1;gE++){c.set(gD,gE,gC(gE));}return gD;},iter:function(gF,gG){var gH;for(gH=0;gH<=gG.length-1;gH++){gF(c.get(gG,gH));}return;},iter2:function(gI,gJ,gK){var gL;c.checkLength(gJ,gK);for(gL=0;gL<=gJ.length-1;gL++){(gI(c.get(gJ,gL)))(c.get(gK,gL));}return;},iteri:function(gM,gN){var gO;for(gO=0;gO<=gN.length-1;gO++){(gM(gO))(c.get(gN,gO));}return;},iteri2:function(gP,gQ,gR){var gS;c.checkLength(gQ,gR);for(gS=0;gS<=gQ.length-1;gS++){((gP(gS))(c.get(gQ,gS)))(c.get(gR,gS));}return;},last:function(gT){return j.last(gT);},length:function(gU){var gV;gV=gU.dims;return gV===2?gU.length*gU.length:gU.length;},map:function(gW,gX){var gY,gZ;gY=b(gX.length);for(gZ=0;gZ<=gX.length-1;gZ++){c.set(gY,gZ,gW(c.get(gX,gZ)));}return gY;},map2:function(g0,g1,g2){var g3,g4;c.checkLength(g1,g2);g3=b(g2.length);for(g4=0;g4<=g2.length-1;g4++){c.set(g3,g4,(g0(c.get(g1,g4)))(c.get(g2,g4)));}return g3;},map3:function(g5,g6,g7,g8){var g9;g9=r.map3(g5,e.ofArray(g6),e.ofArray(g7),e.ofArray(g8));return c.ofSeq(g9);},mapi:function(g_,g$){var ha,hb;ha=b(g$.length);for(hb=0;hb<=g$.length-1;hb++){c.set(ha,hb,(g_(hb))(c.get(g$,hb)));}return ha;},mapi2:function(hc,hd,he){var hf,hg;c.checkLength(hd,he);hf=b(hd.length);for(hg=0;hg<=hd.length-1;hg++){c.set(hf,hg,((hc(hg))(c.get(hd,hg)))(c.get(he,hg)));}return hf;},max:function(hh){return c.reduce(function(hi){return function(hj){return d.Max(hi,hj);};},hh);},maxBy:function(hk,hl){return c.reduce(function(hm){return function(hn){return a.Compare(hk(hm),hk(hn))===1?hm:hn;};},hl);},min:function(ho){return c.reduce(function(hp){return function(hq){return d.Min(hp,hq);};},ho);},minBy:function(hr,hs){return c.reduce(function(ht){return function(hu){return a.Compare(hr(ht),hr(hu))===-1?ht:hu;};},hs);},nonEmpty:function(hv){return hv.length===0?d.FailWith("The input array was empty."):null;},ofSeq:function(hw){var hx,hy,hz;hx=[];hy=f.Get(hw);try{while(hy.MoveNext()){hx.push(hy.get_Current());}hz=hx;}finally{hy.Dispose!=undefined?hy.Dispose():null;}return hz;},pairwise:function(hA){var hB;hB=j.pairwise(hA);return i.toArray(hB);},partition:function(hC,hD){var hE,hF,hG;hE=[];hF=[];for(hG=0;hG<=hD.length-1;hG++){hC(c.get(hD,hG))?hE.push(c.get(hD,hG)):hF.push(c.get(hD,hG));}return[hE,hF];},permute:function(hH,hI){var hJ,hK;hJ=b(hI.length);for(hK=0;hK<=hI.length-1;hK++){c.set(hJ,hH(hK),c.get(hI,hK));}return hJ;},pick:function(hL,hM){var hN,hO,hP;hN=c.tryPick(hL,hM);if(hN.$==0){hO=d.FailWith("KeyNotFoundException");}else{hP=hN.$0;hO=hP;}return hO;},reduce:function(hQ,hR){var hS,hT;c.nonEmpty(hR);hS=c.get(hR,0);for(hT=1;hT<=hR.length-1;hT++){hS=(hQ(hS))(c.get(hR,hT));}return hS;},reduceBack:function(hU,hV){var hW,hX,hY;c.nonEmpty(hV);hW=hV.length;hX=c.get(hV,hW-1);for(hY=2;hY<=hW;hY++){hX=(hU(c.get(hV,hW-hY)))(hX);}return hX;},replicate:function(hZ,h0){return c.create(hZ,h0);},reverse:function(h1,h2,h3){var h4;h4=c.sub(h1,h2,h3).slice().reverse();return c.blit(h4,0,h1,h2,c.length(h4));},scan:function(h5,h6,h7){var h8,h9;h8=b(1+h7.length);c.set(h8,0,h6);for(h9=0;h9<=h7.length-1;h9++){c.set(h8,h9+1,(h5(c.get(h8,h9)))(c.get(h7,h9)));}return h8;},scanBack:function(h_,h$,ia){var ib,ic,id;ib=h$.length;ic=b(1+ib);c.set(ic,ib,ia);for(id=0;id<=ib-1;id++){c.set(ic,ib-id-1,(h_(c.get(h$,ib-id-1)))(c.get(ic,ib-id)));}return ic;},set:function(ie,_if,ig){c.checkBounds(ie,_if);ie[_if]=ig;return;},set2D:function(ih,ii,ij,ik){c.checkBounds2D(ih,ii,ij);ih[ii][ij]=ik;return;},setSub:function(il,im,_in,io){var ip;for(ip=0;ip<=_in-1;ip++){c.set(il,im+ip,c.get(io,ip));}return;},setSub2D:function(iq,ir,is,it,iu,iv){var iw,ix;for(iw=0;iw<=it-1;iw++){for(ix=0;ix<=iu-1;ix++){c.set2D(iq,ir+iw,is+ix,c.get2D(iv,iw,ix));}}return;},skip:function(iy,iz){return iy<0?j.nonNegative():iy>c.length(iz)?j.insufficient():iz.slice(iy);},skipWhile:function(iA,iB){var iC,iD;iC=c.length(iB);iD=0;while(iD<iC?iA(c.get(iB,iD)):false){iD=iD+1;}return iB.slice(iD);},sort:function(iE){return c.sortBy(function(iF){return iF;},iE);},sortBy:function(iG,iH){return iH.slice().sort(function(iI,iJ){return d.Compare(iG(iI),iG(iJ));});},sortByDescending:function(iK,iL){return iL.slice().sort(function(iM,iN){return-d.Compare(iK(iM),iK(iN));});},sortDescending:function(iO){return c.sortByDescending(function(iP){return iP;},iO);},sortInPlace:function(iQ){return c.sortInPlaceBy(function(iR){return iR;},iQ);},sortInPlaceBy:function(iS,iT){return iT.sort(function(iU,iV){return d.Compare(iS(iU),iS(iV));});},sortInPlaceWith:function(iW,iX){return iX.sort(function(iY,iZ){return(iW(iY))(iZ);});},sortWith:function(i0,i1){return i1.slice().sort(function(i2,i3){return(i0(i2))(i3);});},splitAt:function(i4,i5){return[c.take(i4,i5),c.skip(i4,i5)];},sub:function(i6,i7,i8){c.checkRange(i6,i7,i8);return i6.slice(i7,i7+i8);},sub2D:function(i9,i_,i$,ja,jb){var jc,jd,je,jf,jg;jc=ja<0?0:ja;jd=jb<0?0:jb;je=c.zeroCreate2D(jc,jd);for(jf=0;jf<=jc-1;jf++){for(jg=0;jg<=jd-1;jg++){c.set2D(je,jf,jg,c.get2D(i9,i_+jf,i$+jg));}}return je;},sum:function($arr){var $0=this,$this=this;var sum=0;for(var i=0;i<$arr.length;i++)sum+=$arr[i];return sum;},sumBy:function($f,$arr){var $0=this,$this=this;var sum=0;for(var i=0;i<$arr.length;i++)sum+=$f($arr[i]);return sum;},tail:function(jh){return c.skip(1,jh);},take:function(ji,jj){return ji<0?j.nonNegative():ji>c.length(jj)?j.insufficient():jj.slice(0,ji);},takeWhile:function(jk,jl){var jm,jn;jm=c.length(jl);jn=0;while(jn<jm?jk(c.get(jl,jn)):false){jn=jn+1;}return jl.slice(0,jn);},truncate:function(jo,jp){return jp.slice(jo);},tryFind:function(jq,jr){var js,jt;js={$:0};jt=0;while(jt<jr.length?js.$==0:false){jq(c.get(jr,jt))?js={$:1,$0:c.get(jr,jt)}:null;jt=jt+1;}return js;},tryFindIndex:function(ju,jv){var jw,jx;jw={$:0};jx=0;while(jx<jv.length?jw.$==0:false){ju(c.get(jv,jx))?jw={$:1,$0:jx}:null;jx=jx+1;}return jw;},tryHead:function(jy){return c.length(jy)===0?{$:0}:{$:1,$0:jy[0]};},tryItem:function(jz,jA){return(c.length(jA)<=jz?true:jz<0)?{$:0}:{$:1,$0:jA[jz]};},tryLast:function(jB){var jC;jC=c.length(jB);return jC===0?{$:0}:{$:1,$0:jB[jC-1]};},tryPick:function(jD,jE){var jF,jG,jH;jF={$:0};jG=0;while(jG<jE.length?jF.$==0:false){jH=jD(c.get(jE,jG));jH.$==1?jF=jH:null;jG=jG+1;}return jF;},unfold:function(jI,jJ){var jK;jK=j.unfold(jI,jJ);return i.toArray(jK);},unzip:function(jL){var jM,jN,jO,jP,jQ,jR;jM=[];jN=[];for(jO=0;jO<=jL.length-1;jO++){jP=c.get(jL,jO);jQ=jP[1];jR=jP[0];jM.push(jR);jN.push(jQ);}return[jM,jN];},unzip3:function(jS){var jT,jU,jV,jW,jX,jY,jZ,j0;jT=[];jU=[];jV=[];for(jW=0;jW<=jS.length-1;jW++){jX=c.get(jS,jW);jY=jX[2];jZ=jX[1];j0=jX[0];jT.push(j0);jU.push(jZ);jV.push(jY);}return[jT,jU,jV];},windowed:function(j1,j2){var j3;j3=j.windowed(j1,j2);return i.toArray(j3);},zeroCreate2D:function(j4,j5){var j6;j6=c.init(j4,function(){return b(j5);});j6.dims=2;return j6;},zip:function(j8,j9){var j_,j$;c.checkLength(j8,j9);j_=b(j8.length);for(j$=0;j$<=j8.length-1;j$++){c.set(j_,j$,[c.get(j8,j$),c.get(j9,j$)]);}return j_;},zip3:function(ka,kb,kc){var kd,ke;c.checkLength(ka,kb);c.checkLength(kb,kc);kd=b(ka.length);for(ke=0;ke<=ka.length-1;ke++){c.set(kd,ke,[c.get(ka,ke),c.get(kb,ke),c.get(kc,ke)]);}return kd;}},Arrays2D:{copy:function(kf){return s.init(kf.length,kf.length?kf[0].length:0,function(kg){return function(kh){return c.get2D(kf,kg,kh);};});},init:function(ki,kj,kk){var kl,km,kn;kl=c.zeroCreate2D(ki,kj);for(km=0;km<=ki-1;km++){for(kn=0;kn<=kj-1;kn++){c.set2D(kl,km,kn,(kk(km))(kn));}}return kl;},iter:function(ko,kp){var kq,kr,ks,kt;kq=kp.length;kr=kp.length?kp[0].length:0;for(ks=0;ks<=kq-1;ks++){for(kt=0;kt<=kr-1;kt++){ko(c.get2D(kp,ks,kt));}}return;},iteri:function(ku,kv){var kw,kx,ky,kz;kw=kv.length;kx=kv.length?kv[0].length:0;for(ky=0;ky<=kw-1;ky++){for(kz=0;kz<=kx-1;kz++){((ku(ky))(kz))(c.get2D(kv,ky,kz));}}return;},map:function(kA,kB){return s.init(kB.length,kB.length?kB[0].length:0,function(kC){return function(kD){return kA(c.get2D(kB,kC,kD));};});},mapi:function(kE,kF){return s.init(kF.length,kF.length?kF[0].length:0,function(kG){return function(kH){return((kE(kG))(kH))(c.get2D(kF,kG,kH));};});}},AsyncProxy:$.Class({},{get_CancellationToken:function(){return t.GetCT();},get_DefaultCancellationToken:function(){return(t.defCTS())[0];}}),CancellationTokenSource:$.Class({Cancel:function(){var kI,kJ,kN,kO;if(!this.c){this.c=true;kJ=function(kK){var kL,kM;try{kK(null);kL={$:0};}catch(kM){kL={$:1,$0:kM};}return kL;};kN=this.r;kO=c.choose(kJ,kN);kI=c.length(kO)>0?d.Raise(m.New(kO)):null;}else{kI=null;}return kI;},Cancel1:function(kP){var kQ,kR,kS,kU;if(!kP){kQ=this.Cancel();}else{if(!this.c){this.c=true;kS=function(kT){return kT(null);};kU=this.r;kR=c.iter(kS,kU);}else{kR=null;}kQ=kR;}return kQ;},CancelAfter:function(kV){var kW,kX,kZ,k1=this;if(!this.c){kX=this.pending;u.iter(function(kY){return v(kY);},kX);kZ=w(function(){return k1.Cancel();},kV);kW=void(this.pending={$:1,$0:kZ});}else{kW=null;}return kW;},get_IsCancellationRequested:function(){return this.c;}},{CreateLinkedTokenSource:function(k2,k3){return x.CreateLinkedTokenSource1([k2,k3]);},CreateLinkedTokenSource1:function(k4){var k5,k6;k5=x.New();k6=function(k7){var k8;k8=t.Register(k7,function(){return function(){return k5.Cancel();}();});return;};return c.iter(k6,k4);},New:function(){var k$;k$=$.New(this,{});k$.c=false;k$.pending={$:0};k$.r=[];return k$;}}),Char:$.Class({},{GetNumericValue:function(la){return(la>=48?la<=57:false)?p(la)-p(48):-1;},IsControl:function(lb){return(lb>=0?lb<=31:false)?true:lb>=128?lb<=159:false;},IsDigit:function(lc){return lc>=48?lc<=57:false;},IsLetter:function(ld){return(ld>=65?ld<=90:false)?true:ld>=97?ld<=122:false;},IsLetterOrDigit:function(le){return y.IsLetter(le)?true:y.IsDigit(le);},IsLower:function(lf){return lf>=97?lf<=122:false;},IsUpper:function(lg){return lg>=65?lg<=90:false;},IsWhiteSpace:function($c){var $0=this,$this=this;return $$.String.fromCharCode($c).match(/\s/)!==null;},Parse:function(lh){return lh.length===1?lh.charCodeAt(0):d.FailWith("String must be exactly one character long.");}}),Concurrency:{AwaitEvent:function(li){var lj;lj=function(lk){var ll,lm,ln,lo,lp,lq;ll=function(){return z.subscribeTo(li,function(ls){var lt;A.Force(lm).Dispose();A.Force(lo).Dispose();lt=function(){return lk.k.call(null,{$:0,$0:ls});};return t.scheduler().Fork(lt);});};lm=A.Create(ll);ln=function(){return t.Register(lk.ct,function(){var lx;A.Force(lm).Dispose();lx=function(){return lk.k.call(null,{$:2,$0:B.New()});};return t.scheduler().Fork(lx);});};lo=A.Create(ln);lp=A.Force(lm);lq=A.Force(lo);return null;};return t.checkCancel(lj);},Bind:function(lz,lA){var lB;lB=function(lC){return lz({k:function(lD){var lE,lF,lG,lK;if(lD.$==0){lF=lD.$0;lG=function(){var lI,lJ;try{lI=(lA(lF))(lC);}catch(lJ){lI=lC.k.call(null,{$:1,$0:lJ});}return lI;};lE=t.scheduler().Fork(lG);}else{lK=function(){return lC.k.call(null,lD);};lE=t.scheduler().Fork(lK);}return lE;},ct:lC.ct});};return t.checkCancel(lB);},Catch:function(lM){var lN;lN=function(lO){var lP,lU;try{lP=lM({k:function(lQ){var lR,lS,lT;if(lQ.$==0){lS=lQ.$0;lR=lO.k.call(null,{$:0,$0:{$:0,$0:lS}});}else{if(lQ.$==1){lT=lQ.$0;lR=lO.k.call(null,{$:0,$0:{$:1,$0:lT}});}else{lR=lO.k.call(null,lQ);}}return lR;},ct:lO.ct});}catch(lU){lP=lO.k.call(null,{$:0,$0:{$:1,$0:lU}});}return lP;};return t.checkCancel(lN);},Combine:function(lV,lW){return t.Bind(lV,function(){return lW;});},Delay:function(lY){var lZ;lZ=function(l0){var l1,l2;try{l1=(lY(null))(l0);}catch(l2){l1=l0.k.call(null,{$:1,$0:l2});}return l1;};return t.checkCancel(lZ);},For:function(l3,l4){return t.Using(f.Get(l3),function(l5){return t.While(function(){return l5.MoveNext();},t.Delay(function(){return l4(l5.get_Current());}));});},FromContinuations:function(l8){var l9;l9=function(l_){var l$,ma;l$=[false];ma=function(mb){var mc;if(l$[0]){mc=d.FailWith("A continuation provided by Async.FromContinuations was invoked multiple times");}else{l$[0]=true;mc=t.scheduler().Fork(mb);}return mc;};return l8([function(md){return ma(function(){return l_.k.call(null,{$:0,$0:md});});},function(mf){return ma(function(){return l_.k.call(null,{$:1,$0:mf});});},function(mh){return ma(function(){return l_.k.call(null,{$:2,$0:mh});});}]);};return t.checkCancel(l9);},GetCT:$.Field(function(){var mj;mj=function(mk){return mk.k.call(null,{$:0,$0:mk.ct});};return t.checkCancel(mj);}),Ignore:function(ml){return t.Bind(ml,function(){return t.Return(null);});},OnCancel:function(mn){var mo;mo=function(mp){return mp.k.call(null,{$:0,$0:t.Register(mp.ct,mn)});};return t.checkCancel(mo);},Parallel:function(mq){var mr,ms,mt;mr=c.ofSeq(mq);if(c.length(mr)===0){ms=t.Return([]);}else{mt=function(mu){var mv,mw,mx,my;mv=mr.length;mw=[mv];mx=c.create(mv,undefined);my=function(mz){return function(mA){var mB,mC,mD,mE,mF,mG,mH,mI,mJ;mB=[mw[0],mA];if(mB[0]===0){mC=null;}else{if(mB[0]===1){if(mB[1].$==0){mE=mB[1].$0;c.set(mx,mz,mE);mw[0]=0;mD=mu.k.call(null,{$:0,$0:mx});}else{mB[0];mF=mB[1];mw[0]=0;mD=mu.k.call(null,mF);}mC=mD;}else{if(mB[1].$==0){mH=mB[1].$0;mI=mB[0];c.set(mx,mz,mH);mG=void(mw[0]=mI-1);}else{mB[0];mJ=mB[1];mw[0]=0;mG=mu.k.call(null,mJ);}mC=mG;}}return mC;};};return c.iteri(function(mK){return function(mL){var mM;mM=function(){return mL({k:my(mK),ct:mu.ct});};return t.scheduler().Fork(mM);};},mr);};ms=t.checkCancel(mt);}return ms;},Register:function(mO,mP){var mQ;mQ=mO.r.push(mP)-1;return{Dispose:function(){return c.set(mO.r,mQ,function(){});}};},Return:function(mT){var mU;mU=function(mV){return mV.k.call(null,{$:0,$0:mT});};return t.checkCancel(mU);},Scheduler:$.Class({Fork:function(mW){var mX,mY,m0=this;this.robin.push(mW);if(this.idle){this.idle=false;mY=w(function(){return m0.tick();},0);mX=void mY;}else{mX=null;}return mX;},tick:function(){var m1,m2,m3,m4,m5,m6,m8=this;m1=C.now();m2=true;while(m2){m3=this.robin.length;if(m3===0){this.idle=true;m4=m2=false;}else{(this.robin.shift())(null);if(C.now()-m1>40){m6=w(function(){return m8.tick();},0);m5=m2=false;}else{m5=null;}m4=m5;}}return;}},{New:function(){var m9;m9=$.New(this,{});m9.idle=true;m9.robin=[];return m9;}}),Sleep:function(m_){var m$;m$=function(na){var nb,nc,nd,ne,nf,ng;nb=function(){return w(function(){var nj;A.Force(ne).Dispose();nj=function(){return na.k.call(null,{$:0,$0:null});};return t.scheduler().Fork(nj);},m_);};nc=A.Create(nb);nd=function(){return t.Register(na.ct,function(){var nn;v(A.Force(nc));nn=function(){return na.k.call(null,{$:2,$0:B.New()});};return t.scheduler().Fork(nn);});};ne=A.Create(nd);nf=A.Force(nc);ng=A.Force(ne);return null;};return t.checkCancel(m$);},Start:function(np,nq){return t.StartWithContinuations(np,function(){},function(ns){var nt;nt=[ns];return D?D.log.apply(D,["WebSharper: Uncaught asynchronous exception"].concat(nt)):undefined;},function(){},nq);},StartChild:function(nv){var nw;nw=function(nx){var ny,nz,nA,nD,nI;ny=[{$:0}];nz=[];nA=function(){return nv({k:function(nC){ny[0]={$:1,$0:nC};while(nz.length>0){(nz.shift())(nC);}return;},ct:nx.ct});};t.scheduler().Fork(nA);nD=function(nE){var nF,nG,nH;nF=ny[0];if(nF.$==0){nG=nz.push(nE.k);}else{nH=nF.$0;nG=nE.k.call(null,nH);}return nG;};nI=t.checkCancel(nD);return nx.k.call(null,{$:0,$0:nI});};return t.checkCancel(nw);},StartWithContinuations:function(nJ,nK,nL,nM,nN){var nO,nP;nO=d.DefaultArg(nN,(t.defCTS())[0]);nP=function(){return nJ({k:function(nR){var nS,nT,nU,nV;if(nR.$==1){nT=nR.$0;nS=nL(nT);}else{if(nR.$==2){nU=nR.$0;nS=nM(nU);}else{nV=nR.$0;nS=nK(nV);}}return nS;},ct:nO});};return t.scheduler().Fork(nP);},TryCancelled:function(nW,nX){var nY;nY=function(nZ){return nW({k:function(n0){var n1,n2;if(n0.$==2){n2=n0.$0;nX(n2);n1=nZ.k.call(null,n0);}else{n1=nZ.k.call(null,n0);}return n1;},ct:nZ.ct});};return t.checkCancel(nY);},TryFinally:function(n3,n4){var n5;n5=function(n6){return n3({k:function(n7){var n8,n9;try{n4(null);n8=n6.k.call(null,n7);}catch(n9){n8=n6.k.call(null,{$:1,$0:n9});}return n8;},ct:n6.ct});};return t.checkCancel(n5);},TryWith:function(n_,n$){var oa;oa=function(ob){return n_({k:function(oc){var od,oe,of,og,oh;if(oc.$==0){oe=oc.$0;od=ob.k.call(null,{$:0,$0:oe});}else{if(oc.$==1){of=oc.$0;try{og=(n$(of))(ob);}catch(oh){og=ob.k.call(null,oc);}od=og;}else{od=ob.k.call(null,oc);}}return od;},ct:ob.ct});};return t.checkCancel(oa);},Using:function(oi,oj){return t.TryFinally(oj(oi),function(){return oi.Dispose();});},While:function(ol,om){return ol(null)?t.Bind(om,function(){return t.While(ol,om);}):t.Return(null);},checkCancel:function(oo){return function(op){return op.ct.c?op.k.call(null,{$:2,$0:B.New()}):oo(op);};},defCTS:$.Field(function(){return[x.New()];}),scheduler:$.Field(function(){return E.New();})},Control:{createEvent:function(oq,or,os){return{AddHandler:oq,RemoveHandler:or,Subscribe:function(ot){var ou;ou=os(function(){return function(ow){return ot.OnNext.call(null,ow);};});oq(ou);return{Dispose:function(){return or(ou);}};}};}},DateTimeHelpers:{AddMonths:function(oy,oz){var oA;oA=new C(oy);return(new C(oA.getFullYear(),oA.getMonth()+oz,oA.getDate(),oA.getHours(),oA.getMinutes(),oA.getSeconds(),oA.getMilliseconds())).getTime();},AddYears:function(oB,oC){var oD;oD=new C(oB);return(new C(oD.getFullYear()+oC,oD.getMonth(),oD.getDate(),oD.getHours(),oD.getMinutes(),oD.getSeconds(),oD.getMilliseconds())).getTime();},DatePortion:function(oE){var oF;oF=new C(oE);return(new C(oF.getFullYear(),oF.getMonth(),oF.getDate())).getTime();},LongDate:function($d){var $0=this,$this=this;return(new $$.Date($d)).toLocaleDateString({},{year:"numeric",month:"long",day:"numeric",weekday:"long"});},LongTime:function($d){var $0=this,$this=this;return(new $$.Date($d)).toLocaleTimeString({},{hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:false});},Parse:function(oG){var oH;oH=C.parse(oG);return $$.isNaN(oH)?d.FailWith("Failed to parse date string."):oH;},ShortTime:function($d){var $0=this,$this=this;return(new $$.Date($d)).toLocaleTimeString({},{hour:"2-digit",minute:"2-digit",hour12:false});},TimePortion:function(oI){var oJ;oJ=new C(oI);return(((24*0+oJ.getHours())*60+oJ.getMinutes())*60+oJ.getSeconds())*1000+oJ.getMilliseconds();}},Enumerable:{Of:function(oK){return{GetEnumerator:oK};}},Enumerator:{Get:function(oL){return oL instanceof $$.Array?g.New(0,null,function(oM){var oN,oO;oN=oM.s;if(oN<c.length(oL)){oM.c=c.get(oL,oN);oM.s=oN+1;oO=true;}else{oO=false;}return oO;},function(){}):a.Equals(typeof oL,"string")?g.New(0,null,function(oQ){var oR,oS;oR=oQ.s;if(oR<oL.length){oQ.c=oL.charCodeAt(oR);oQ.s=oR+1;oS=true;}else{oS=false;}return oS;},function(){}):oL.GetEnumerator();},T:$.Class({Dispose:function(){return this.d.call(null,this);},MoveNext:function(){return this.n.call(null,this);},get_Current:function(){return this.c;}},{New:function(oU,oV,oW,oX){var oY;oY=$.New(this,{});oY.s=oU;oY.c=oV;oY.n=oW;oY.d=oX;return oY;}})},Exception:$.Class({},{New:function(){return $.New(this,n.New1("Exception of type 'System.Exception' was thrown."));},New1:function($message){var $0=this,$this=this;return new $$.Error($message);}}),Guid:$.Class({},{NewGuid:function(){var $0=this,$this=this;return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(c){var r=$$.Math.random()*16|0,v=c=="x"?r:r&0x3|0x8;return v.toString(16);});}}),Html:{Client:{Activator:{Activate:$.Field(function(){var oZ,o0;if(H.hasDocument()){o0=I.getElementById("websharper-data");oZ=o0?J(I).ready(function(){var o2,o3,o4,o_;o2=o0.getAttribute("content");o3=K.Activate(L.parse(o2));o4=function(o5){var o6,o7,o8,o9;o6=o5[0];o7=o5[1];o8=o7.get_Body();o9=I.getElementById(o6);return o8.ReplaceInDom(o9);};o_=N.GetFields(o3);return c.iter(o4,o_);}):null;}else{oZ=null;}return oZ;}),hasDocument:function(){var $0=this,$this=this;return typeof $$.document!=="undefined";}},HtmlContentExtensions:{"IControlBody.SingleNode.Static":function(o$){return P.New(o$);},SingleNode:$.Class({ReplaceInDom:function(pa){var pb;pb=this.node.parentNode.replaceChild(this.node,pa);return;}},{New:function(pc){var pd;pd=$.New(this,{});pd.node=pc;return pd;}})}}},IndexOutOfRangeException:$.Class({},{New:function(){return $.New(this,q.New1("Index was outside the bounds of the array."));},New1:function(pe){return $.New(this,n.New1(pe));}}),InvalidOperationException:$.Class({},{New:function(){return $.New(this,Q.New1("Operation is not valid due to the current state of the object."));},New1:function(pf){return $.New(this,n.New1(pf));}}),JavaScript:{JSModule:{Delete:function($x,$field){var $0=this,$this=this;return delete $x[$field];},ForEach:function($x,$iter){var $0=this,$this=this;for(var k in $x){if($iter(k))break;}},GetFieldNames:function($o){var $0=this,$this=this;var r=[];for(var k in $o)r.push(k);return r;},GetFieldValues:function($o){var $0=this,$this=this;var r=[];for(var k in $o)r.push($o[k]);return r;},GetFields:function($o){var $0=this,$this=this;var r=[];for(var k in $o)r.push([k,$o[k]]);return r;},Log:function($x){var $0=this,$this=this;if($$.console)$$.console.log($x);},LogMore:function($args){var $0=this,$this=this;if($$.console)$$.console.log.apply($$.console,$args);}},Pervasives:{NewFromList:function(pg){var ph,pi,pj,pk,pl,pm;ph={};pi=f.Get(pg);try{while(pi.MoveNext()){pk=pi.get_Current();pl=pk[1];pm=pk[0];ph[pm]=pl;}}finally{pi.Dispose!=undefined?pi.Dispose():null;}return ph;}}},Json:{Activate:function(pn){var po,pp,pq;po=pn.$TYPES;for(pp=0;pp<=c.length(po)-1;pp++){c.set(po,pp,K.lookup(c.get(po,pp)));}pq=function(pr){var ps,pt,pu,pv,pw,px,py,pz;if(a.Equals(pr,null)){ps=pr;}else{pt=typeof pr;if(pt==="object"){if(pr instanceof $$.Array){pv=K.shallowMap(pq,pr);}else{pw=K.shallowMap(pq,pr.$V);px=pr.$T;if(a.Equals(typeof px,"undefined")){py=pw;}else{pz=new(c.get(po,px))();N.ForEach(pw,function(pA){pz[pA]=pw[pA];return false;});py=pz;}pv=py;}pu=pv;}else{pu=pr;}ps=pu;}return ps;};return pq(pn.$DATA);},lookup:function(pB){var pC,pD,pE,pF,pG,pH;pC=c.length(pB);pD=$$;pE=0;while(pE<pC){pF=c.get(pB,pE);pG=pD[pF];if(!a.Equals(typeof pG,undefined)){pD=pG;pH=pE=pE+1;}else{pH=d.FailWith("Invalid server reply. Failed to find type: "+pF);}}return pD;},shallowMap:function(pI,pJ){var pK,pL,pM,pN;if(pJ instanceof $$.Array){pK=c.map(pI,pJ);}else{pL=typeof pJ;if(pL==="object"){pN={};N.ForEach(pJ,function(pO){pN[pO]=pI(pJ[pO]);return false;});pM=pN;}else{pM=pJ;}pK=pM;}return pK;}},Lazy:{Create:function(pP){var pQ,pR;pQ={value:undefined,created:false,eval:pP};pR=function(){var pT;if(pQ.created){pT=pQ.value;}else{pQ.created=true;pQ.value=pP(null);pT=pQ.value;}return pT;};pQ.eval=pR;return pQ;},CreateFromValue:function(pU){return{value:pU,created:true,eval:function(){return pU;},eval:function(){return pU;}};},Force:function(pX){return pX.eval.call(null,null);}},List:{T:$.Class({GetEnumerator:function(){return g.New(this,null,function(pY){var pZ,p0,p1,p2;pZ=pY.s;if(pZ.$==0){p0=false;}else{p1=pZ.$1;p2=pZ.$0;pY.c=p2;pY.s=p1;p0=true;}return p0;},function(){});},GetSlice:function(p4,p5){var p6,p7,p8,p9,p_,p$,qa,qb,qc,qd,qe,qf,qg;p6=[p4,p5];if(p6[0].$==1){if(p6[1].$==1){p9=p6[0].$0;p_=p6[1].$0;p$=p_-p9+1;qa=r.skip(p9,this);qb=i.take(p$,qa);p8=e.ofSeq(qb);}else{qc=p6[0].$0;p8=r.skip(qc,this);}p7=p8;}else{if(p6[1].$==1){qe=p6[1].$0;qf=qe+1;qg=i.take(qf,this);qd=e.ofSeq(qg);}else{qd=this;}p7=qd;}return p7;},get_Item:function(qh){return i.nth(qh,this);},get_Length:function(){return i.length(this);}},{Construct:function(qi,qj){return $.New(R,{$:1,$0:qi,$1:qj});},get_Nil:function(){return $.New(R,{$:0});}}),append:function(qk,ql){return e.ofSeq(i.append(qk,ql));},choose:function(qm,qn){return e.ofSeq(i.choose(qm,qn));},chunkBySize:function(qo,qp){var qq,qs,qt;qq=function(qr){return e.ofArray(qr);};qs=j.chunkBySize(qo,qp);qt=i.toList(qs);return e.map(qq,qt);},collect:function(qu,qv){return e.ofSeq(i.collect(qu,qv));},compareWith:function(qw,qx,qy){return j.compareWith(qw,qx,qy);},concat:function(qz){return e.ofSeq(i.concat(qz));},contains:function(qA,qB){return j.contains(qA,qB);},countBy:function(qC,qD){var qE;qE=j.countBy(qC,qD);return i.toList(qE);},distinct:function(qF){var qG;qG=j.distinct(qF);return i.toList(qG);},distinctBy:function(qH,qI){var qJ;qJ=j.distinctBy(qH,qI);return i.toList(qJ);},exactlyOne:function(qK){var qL,qM,qN;if(qK.$==1){if(qK.$1.$==0){qN=qK.$0;qM=qN;}else{qM=d.FailWith("The input does not have precisely one element.");}qL=qM;}else{qL=d.FailWith("The input does not have precisely one element.");}return qL;},except:function(qO,qP){var qQ;qQ=j.except(qO,qP);return i.toList(qQ);},exists2:function(qR,qS,qT){return c.exists2(qR,c.ofSeq(qS),c.ofSeq(qT));},filter:function(qU,qV){return e.ofSeq(i.filter(qU,qV));},findBack:function(qW,qX){var qY,qZ,q0;qY=e.tryFindBack(qW,qX);if(qY.$==0){qZ=d.FailWith("KeyNotFoundException");}else{q0=qY.$0;qZ=q0;}return qZ;},findIndexBack:function(q1,q2){var q3,q4,q5;q3=k.tryFindIndexBack(q1,c.ofSeq(q2));if(q3.$==0){q4=d.FailWith("KeyNotFoundException");}else{q5=q3.$0;q4=q5;}return q4;},fold2:function(q6,q7,q8,q9){return c.fold2(q6,q7,c.ofSeq(q8),c.ofSeq(q9));},foldBack:function(q_,q$,ra){return c.foldBack(q_,c.ofSeq(q$),ra);},foldBack2:function(rb,rc,rd,re){return c.foldBack2(rb,c.ofSeq(rc),c.ofSeq(rd),re);},forall2:function(rf,rg,rh){return c.forall2(rf,c.ofSeq(rg),c.ofSeq(rh));},groupBy:function(ri,rj){var rk,ro,rp;rk=function(rl){var rm,rn;rm=rl[0];rn=rl[1];return[rm,i.toList(rn)];};ro=j.groupBy(ri,rj);rp=i.toList(ro);return e.map(rk,rp);},head:function(rq){var rr,rs;if(rq.$==1){rs=rq.$0;rr=rs;}else{rr=d.FailWith("The input list was empty.");}return rr;},indexed:function(rt){return e.mapi(function(ru){return function(rv){return[ru,rv];};},rt);},init:function(rw,rx){return e.ofArray(c.init(rw,rx));},iter2:function(ry,rz,rA){return c.iter2(ry,c.ofSeq(rz),c.ofSeq(rA));},iteri2:function(rB,rC,rD){return c.iteri2(rB,c.ofSeq(rC),c.ofSeq(rD));},last:function(rE){return j.last(rE);},map:function(rF,rG){return e.ofSeq(i.map(rF,rG));},map2:function(rH,rI,rJ){return e.ofArray(c.map2(rH,c.ofSeq(rI),c.ofSeq(rJ)));},mapFold:function(rK,rL,rM){var rN,rO,rP;rN=k.mapFold(rK,rL,c.ofSeq(rM));rO=rN[0];rP=rN[1];return[e.ofArray(rO),rP];},mapFoldBack:function(rQ,rR,rS){var rT,rU,rV;rT=k.mapFoldBack(rQ,c.ofSeq(rR),rS);rU=rT[0];rV=rT[1];return[e.ofArray(rU),rV];},mapi:function(rW,rX){return e.ofSeq(i.mapi(rW,rX));},mapi2:function(rY,rZ,r0){return e.ofArray(c.mapi2(rY,c.ofSeq(rZ),c.ofSeq(r0)));},max:function(r1){return i.reduce(function(r2){return function(r3){return d.Max(r2,r3);};},r1);},maxBy:function(r4,r5){return i.reduce(function(r6){return function(r7){return a.Compare(r4(r6),r4(r7))===1?r6:r7;};},r5);},min:function(r8){return i.reduce(function(r9){return function(r_){return d.Min(r9,r_);};},r8);},minBy:function(r$,sa){return i.reduce(function(sb){return function(sc){return a.Compare(r$(sb),r$(sc))===-1?sb:sc;};},sa);},ofArray:function(sd){var se,sf;se=$.New(R,{$:0});for(sf=0;sf<=c.length(sd)-1;sf++){se=$.New(R,{$:1,$0:c.get(sd,c.length(sd)-sf-1),$1:se});}return se;},ofSeq:function(sg){var sh,si,sj,sk,sl;sh=$.New(R,{$:0});si=sh;sj=f.Get(sg);try{while(sj.MoveNext()){si.$=1;sl=$.New(R,{$:0});si.$0=sj.get_Current();si.$1=sl;si=sl;}si.$=0;sk=sh;}finally{sj.Dispose!=undefined?sj.Dispose():null;}return sk;},pairwise:function(sm){var sn;sn=j.pairwise(sm);return i.toList(sn);},partition:function(so,sp){var sq,sr,ss;sq=c.partition(so,c.ofSeq(sp));sr=sq[1];ss=sq[0];return[e.ofArray(ss),e.ofArray(sr)];},permute:function(st,su){return e.ofArray(c.permute(st,c.ofSeq(su)));},reduceBack:function(sv,sw){return c.reduceBack(sv,c.ofSeq(sw));},replicate:function(sx,sy){return e.ofArray(c.create(sx,sy));},rev:function(sz){var sA;sA=c.ofSeq(sz);sA.reverse();return e.ofArray(sA);},scan:function(sB,sC,sD){return e.ofSeq(i.scan(sB,sC,sD));},scanBack:function(sE,sF,sG){return e.ofArray(c.scanBack(sE,c.ofSeq(sF),sG));},singleton:function(sH){return e.ofArray([sH]);},sort:function(sI){var sJ;sJ=c.ofSeq(sI);c.sortInPlace(sJ);return e.ofArray(sJ);},sortBy:function(sK,sL){return e.sortWith(function(sM){return function(sN){return d.Compare(sK(sM),sK(sN));};},sL);},sortByDescending:function(sO,sP){return e.sortWith(function(sQ){return function(sR){return-d.Compare(sO(sQ),sO(sR));};},sP);},sortDescending:function(sS){var sT;sT=c.ofSeq(sS);k.sortInPlaceByDescending(function(sU){return sU;},sT);return e.ofArray(sT);},sortWith:function(sV,sW){var sX;sX=c.ofSeq(sW);c.sortInPlaceWith(sV,sX);return e.ofArray(sX);},splitAt:function(sY,sZ){return[e.ofSeq(i.take(sY,sZ)),r.skip(sY,sZ)];},splitInto:function(s0,s1){var s2,s4,s5;s2=function(s3){return e.ofArray(s3);};s4=k.splitInto(s0,c.ofSeq(s1));s5=e.ofArray(s4);return e.map(s2,s5);},tail:function(s6){var s7,s8;if(s6.$==1){s8=s6.$1;s7=s8;}else{s7=d.FailWith("The input list was empty.");}return s7;},tryFindBack:function(s9,s_){return k.tryFindBack(s9,c.ofSeq(s_));},tryHead:function(s$){var ta,tb;if(s$.$==0){ta={$:0};}else{tb=s$.$0;ta={$:1,$0:tb};}return ta;},tryItem:function(tc,td){return j.tryItem(tc,td);},tryLast:function(te){return j.tryLast(te);},unfold:function(tf,tg){var th;th=j.unfold(tf,tg);return i.toList(th);},unzip:function(ti){var tj,tk,tl,tm,tn,to,tp;tj=[];tk=[];tl=f.Get(ti);try{while(tl.MoveNext()){tn=tl.get_Current();to=tn[1];tp=tn[0];tj.push(tp);tk.push(to);}}finally{tl.Dispose!=undefined?tl.Dispose():null;}return[e.ofArray(tj.slice(0)),e.ofArray(tk.slice(0))];},unzip3:function(tq){var tr,ts,tt,tu,tv,tw,tx,ty,tz;tr=[];ts=[];tt=[];tu=f.Get(tq);try{while(tu.MoveNext()){tw=tu.get_Current();tx=tw[2];ty=tw[1];tz=tw[0];tr.push(tz);ts.push(ty);tt.push(tx);}}finally{tu.Dispose!=undefined?tu.Dispose():null;}return[e.ofArray(tr.slice(0)),e.ofArray(ts.slice(0)),e.ofArray(tt.slice(0))];},windowed:function(tA,tB){var tC,tE,tF;tC=function(tD){return e.ofArray(tD);};tE=j.windowed(tA,tB);tF=i.map(tC,tE);return i.toList(tF);},zip:function(tG,tH){return e.ofArray(c.zip(c.ofSeq(tG),c.ofSeq(tH)));},zip3:function(tI,tJ,tK){return e.ofArray(c.zip3(c.ofSeq(tI),c.ofSeq(tJ),c.ofSeq(tK)));}},MatchFailureException:$.Class({},{New:function(tL,tM,tN){return $.New(this,n.New1(tL+" at "+$$.String(tM)+":"+$$.String(tN)));}}),Nullable:{get:function(tO){return tO==null?d.FailWith("Nullable object must have a value."):tO;},getOrValue:function(tP,tQ){return tP==null?tQ:tP;}},OperationCanceledException:$.Class({},{New:function(){return $.New(this,B.New1("The operation was canceled."));},New1:function(tR){return $.New(this,n.New1(tR));}}),Operators:{Compare:function(tS,tT){return a.Compare(tS,tT);},DefaultArg:function(tU,tV){var tW,tX;if(tU.$==0){tW=tV;}else{tX=tU.$0;tW=tX;}return tW;},FailWith:function(tY){return d.Raise(n.New1(tY));},KeyValue:function(tZ){return[tZ.K,tZ.V];},Max:function(t0,t1){return a.Compare(t0,t1)===1?t0:t1;},Min:function(t2,t3){return a.Compare(t2,t3)===-1?t2:t3;},Pown:function(t4,t5){var t6;t6=function(t7){var t8,t9,t_;if(t7===1){t8=t4;}else{if(t7%2===0){t_=t6(t7/2>>0);t9=t_*t_;}else{t9=t4*t6(t7-1);}t8=t9;}return t8;};return t6(t5);},Raise:function($e){var $0=this,$this=this;throw $e;},Sign:function(t$){return t$===0?0:t$<0?-1:1;},Truncate:function(ua){return ua<0?T.ceil(ua):T.floor(ua);},Using:function(ub,uc){var ud;try{ud=uc(ub);}finally{ub.Dispose();}return ud;},range:function(ue,uf){var ug;ug=1+uf-ue;return ug<=0?i.empty():i.init(ug,function(uh){return uh+ue;});},step:function(ui,uj,uk){var ul,um,uo,uq;ul=d.Sign(uj);um=function(un){return ul*(uk-un)>=0;};uo=i.initInfinite(function(up){return ui+up*uj;});uq=i.takeWhile(um,uo);return uq;}},Option:{bind:function(ur,us){var ut,uu;if(us.$==0){ut={$:0};}else{uu=us.$0;ut=ur(uu);}return ut;},exists:function(uv,uw){var ux,uy;if(uw.$==0){ux=false;}else{uy=uw.$0;ux=uv(uy);}return ux;},filter:function(uz,uA){var uB,uC;if(uA.$==1){uC=uA.$0;uB=uz(uC)?{$:1,$0:uC}:{$:0};}else{uB={$:0};}return uB;},fold:function(uD,uE,uF){var uG,uH;if(uF.$==0){uG=uE;}else{uH=uF.$0;uG=(uD(uE))(uH);}return uG;},foldBack:function(uI,uJ,uK){var uL,uM;if(uJ.$==0){uL=uK;}else{uM=uJ.$0;uL=(uI(uM))(uK);}return uL;},forall:function(uN,uO){var uP,uQ;if(uO.$==0){uP=true;}else{uQ=uO.$0;uP=uN(uQ);}return uP;},iter:function(uR,uS){var uT,uU;if(uS.$==0){uT=null;}else{uU=uS.$0;uT=uR(uU);}return uT;},map:function(uV,uW){var uX,uY;if(uW.$==0){uX={$:0};}else{uY=uW.$0;uX={$:1,$0:uV(uY)};}return uX;},ofObj:function(uZ){return uZ==null?{$:0}:{$:1,$0:uZ};},toArray:function(u0){var u1,u2;if(u0.$==0){u1=[];}else{u2=u0.$0;u1=[u2];}return u1;},toList:function(u3){var u4,u5;if(u3.$==0){u4=$.New(R,{$:0});}else{u5=u3.$0;u4=e.ofArray([u5]);}return u4;},toObj:function(u6){var u7,u8;if(u6.$==0){}else{u8=u6.$0;u7=u8;}return u7;}},PrintfHelpers:{padNumLeft:function(u9,u_){var u$;u$=c.get(u9,0);return((u$===" "?true:u$==="+")?true:u$==="-")?u$+U.PadLeftWith(u9.substr(1),u_-1,48):U.PadLeftWith(u9,u_,48);},plusForPos:function(va,vb){return 0<=va?"+"+vb:vb;},prettyPrint:function(vc){var vd,vn,vo,vp,vq,vr,vt;vd=function(ve){var vf,vg,vh,vl,vm;vf=$$.String(ve);if(vf==="[object Object]"){vh=function(vi){var vj,vk;vj=vi[0];vk=vi[1];return vj+" = "+V.prettyPrint(vk);};vl=N.GetFields(ve);vm=c.map(vh,vl);vg="{"+U.concat("; ",vm)+"}";}else{vg=vf;}return vg;};vn=typeof vc;if(vn=="string"){vo="\""+vc+"\"";}else{if(vn=="object"){if(vc instanceof $$.Array){vr=function(vs){return V.prettyPrint(vs);};vt=c.map(vr,vc);vq="[|"+U.concat("; ",vt)+"|]";}else{vq=vd(vc);}vp=vq;}else{vp=$$.String(vc);}vo=vp;}return vo;},printArray:function(vu,vv){var vw;vw=c.map(vu,vv);return"[|"+U.concat("; ",vw)+"|]";},printArray2D:function(vx,vy){var vz;vz=i.delay(function(){var vB;vB=vy.length?vy[0].length:0;return i.map(function(vC){var vD;vD=i.delay(function(){return i.map(function(vF){return vx(c.get2D(vy,vC,vF));},d.range(0,vB-1));});return U.concat("; ",vD);},d.range(0,vy.length-1));});return"[["+U.concat("][",vz)+"]]";},printList:function(vG,vH){var vI;vI=i.map(vG,vH);return"["+U.concat("; ",vI)+"]";},spaceForPos:function(vJ,vK){return 0<=vJ?" "+vK:vK;},toSafe:function(vL){return vL==null?"":vL;}},Queue:{Clear:function(vM){return vM.splice(0,c.length(vM));},Contains:function(vN,vO){return i.exists(function(vP){return a.Equals(vO,vP);},vN);},CopyTo:function(vQ,vR,vS){return c.blit(vQ,0,vR,vS,c.length(vQ));}},Random:$.Class({Next:function(){return T.floor(T.random()*2147483648);},Next1:function(vT){return vT<0?d.FailWith("'maxValue' must be greater than zero."):T.floor(T.random()*vT);},Next2:function(vU,vV){var vW,vX;if(vU>vV){vW=d.FailWith("'minValue' cannot be greater than maxValue.");}else{vX=vV-vU;vW=vU+T.floor(T.random()*vX);}return vW;},NextBytes:function(vY){var vZ;for(vZ=0;vZ<=c.length(vY)-1;vZ++){c.set(vY,vZ,T.floor(T.random()*256));}return;}},{New:function(){return $.New(this,{});}}),Ref:{decr:function($x){var $0=this,$this=this;return void($x[0]--);},incr:function($x){var $0=this,$this=this;return void($x[0]++);}},Remoting:{AjaxProvider:$.Field(function(){return X.New();}),AjaxRemotingProvider:$.Class({},{Async:function(v0,v1){var v2,v3;v2=W.makeHeaders(v0);v3=W.makePayload(v1);return t.Delay(function(){var v5;v5=Y.get_CancellationToken();return t.Bind(v5,function(v6){return t.FromContinuations(function(v7){var v8,v9,v_,v$,wa,we,wh,wk;v8=v7[0];v9=v7[1];v_=v7[2];v$=[true];wa=t.Register(v6,function(){return function(){var wd;if(v$[0]){v$[0]=false;wd=v_(B.New());}else{wd=null;}return wd;}();});we=function(wf){var wg;if(v$[0]){v$[0]=false;wa.Dispose();wg=v8(K.Activate(L.parse(wf)));}else{wg=null;}return wg;};wh=function(wi){var wj;if(v$[0]){v$[0]=false;wa.Dispose();wj=v9(wi);}else{wj=null;}return wj;};wk=W.EndPoint();return W.AjaxProvider().Async(wk,v2,v3,we,wh);});});});},Send:function(wl,wm){return t.Start(t.Ignore(Z.Async(wl,wm)),{$:0});},Sync:function(wn,wo){var wp,wq,wr,ws;wp=W.EndPoint();wq=W.makeHeaders(wn);wr=W.makePayload(wo);ws=W.AjaxProvider().Sync(wp,wq,wr);return K.Activate(L.parse(ws));}}),EndPoint:$.Field(function(){return"?";}),UseHttps:function(){var wt,wu,wv,ww;try{if(!U.StartsWith(_0.location.href,"https://")){wv=U.Replace(_0.location.href,"http://","https://");W.EndPoint=function(){return wv;};wu=true;}else{wu=false;}wt=wu;}catch(ww){wt=false;}return wt;},XhrProvider:$.Class({Async:function(wx,wy,wz,wA,wB){return W.ajax(true,wx,wy,wz,wA,wB,function(){return W.ajax(true,wx,wy,wz,wA,wB,undefined);});},Sync:function(wD,wE,wF){var wG;wG=[undefined];W.ajax(false,wD,wE,wF,function(wH){wG[0]=wH;},function(wI){return d.Raise(wI);},function(){return W.ajax(false,wD,wE,wF,function(wK){wG[0]=wK;},function(wL){return d.Raise(wL);},undefined);});return wG[0];}},{New:function(){return $.New(this,{});}}),ajax:function($async,$url,$headers,$data,$ok,$err,$csrf){var $0=this,$this=this;var xhr=new $$.XMLHttpRequest();var csrf=$$.document.cookie.replace(new $$.RegExp("(?:(?:^|.*;)\\s*csrftoken\\s*\\=\\s*([^;]*).*$)|^.*$"),"$1");xhr.open("POST",$url,$async);if($async==true){xhr.withCredentials=true;}for(var h in $headers){xhr.setRequestHeader(h,$headers[h]);}if(csrf){xhr.setRequestHeader("x-csrftoken",csrf);}function k(){if(xhr.status==200){$ok(xhr.responseText);}else if($csrf&&xhr.status==403&&xhr.responseText=="CSRF"){$csrf();}else{var msg="Response status is not 200: ";$err(new $$.Error(msg+xhr.status));}}if("onload"in xhr){xhr.onload=xhr.onerror=xhr.onabort=k;}else{xhr.onreadystatechange=function(){if(xhr.readyState==4){k();}};}xhr.send($data);},makeHeaders:function(wM){var wN;wN={};wN["content-type"]="application/json";wN["x-websharper-rpc"]=wM;return wN;},makePayload:function(wO){return L.stringify(wO);}},Seq:{append:function(wP,wQ){return h.Of(function(){var wS,wT;wS=f.Get(wP);wT=[true];return g.New(wS,null,function(wU){var wV,wW,wX,wY;if(wU.s.MoveNext()){wU.c=wU.s.get_Current();wV=true;}else{wW=wU.s;!a.Equals(wW,null)?wW.Dispose():null;wU.s=null;if(wT[0]){wT[0]=false;wU.s=f.Get(wQ);if(wU.s.MoveNext()){wU.c=wU.s.get_Current();wY=true;}else{wU.s.Dispose();wU.s=null;wY=false;}wX=wY;}else{wX=false;}wV=wX;}return wV;},function(wZ){var w0;w0=wZ.s;return!a.Equals(w0,null)?w0.Dispose():null;});});},average:function(w1){var w2,w7,w8;w2=i.fold(function(w3){var w4,w5;w4=w3[0];w5=w3[1];return function(w6){return[w4+1,w5+w6];};},[0,0],w1);w7=w2[1];w8=w2[0];return w7/w8;},averageBy:function(w9,w_){var w$,xe,xf;w$=i.fold(function(xa){var xb,xc;xb=xa[0];xc=xa[1];return function(xd){return[xb+1,xc+w9(xd)];};},[0,0],w_);xe=w$[1];xf=w$[0];return xe/xf;},cache:function(xg){var xh,xi,xj;xh=[];xi=[f.Get(xg)];xj=function(){var xl;xl=function(xm){var xn,xo,xp,xq;if(xm.s+1<xh.length){xm.s=xm.s+1;xm.c=xh[xm.s];xn=true;}else{xo=xi[0];if(a.Equals(xo,null)){xp=false;}else{if(xo.MoveNext()){xm.s=xm.s+1;xm.c=xo.get_Current();xh.push(xm.get_Current());xq=true;}else{xo.Dispose();xi[0]=null;xq=false;}xp=xq;}xn=xp;}return xn;};return g.New(0,null,xl,function(){});};return h.Of(xj);},choose:function(xs,xt){var xu;xu=function(xv){var xw,xx,xy;xw=xs(xv);if(xw.$==0){xx=$.New(R,{$:0});}else{xy=xw.$0;xx=e.ofArray([xy]);}return xx;};return i.collect(xu,xt);},collect:function(xz,xA){return i.concat(i.map(xz,xA));},concat:function(xB){return h.Of(function(){var xD,xE;xD=f.Get(xB);xE=function(xF){var xG,xH,xI,xJ;xG=xF.s;if(a.Equals(xG,null)){if(xD.MoveNext()){xF.s=f.Get(xD.get_Current());xI=xE(xF);}else{xD.Dispose();xI=false;}xH=xI;}else{if(xG.MoveNext()){xF.c=xG.get_Current();xJ=true;}else{xF.Dispose();xF.s=null;xJ=xE(xF);}xH=xJ;}return xH;};return g.New(null,null,xE,function(xK){var xL;xL=xK.s;!a.Equals(xL,null)?xL.Dispose():null;return!a.Equals(xD,null)?xD.Dispose():null;});});},delay:function(xM){return h.Of(function(){return f.Get(xM(null));});},empty:function(){return[];},enumFinally:function(xO,xP){var xQ;xQ=function(){var xS,xT,xU,xV,xX;try{xT=f.Get(xO);}catch(xU){xP(null);xT=d.Raise(xU);}xS=xT;xV=function(){xS.Dispose();return xP(null);};xX=function(xY){var xZ;if(xS.MoveNext()){xY.c=xS.get_Current();xZ=true;}else{xZ=false;}return xZ;};return g.New(null,null,xX,xV);};return h.Of(xQ);},enumUsing:function(x0,x1){var x2;x2=function(){var x4,x5,x6,x7,x9;try{x5=f.Get(x1(x0));}catch(x6){x0.Dispose();x5=d.Raise(x6);}x4=x5;x7=function(){x4.Dispose();return x0.Dispose();};x9=function(x_){var x$;if(x4.MoveNext()){x_.c=x4.get_Current();x$=true;}else{x$=false;}return x$;};return g.New(null,null,x9,x7);};return h.Of(x2);},enumWhile:function(ya,yb){return h.Of(function(){var yd;yd=function(ye){var yf,yg,yh,yi;yf=ye.s;if(a.Equals(yf,null)){if(ya(null)){ye.s=f.Get(yb);yh=yd(ye);}else{yh=false;}yg=yh;}else{if(yf.MoveNext()){ye.c=yf.get_Current();yi=true;}else{yf.Dispose();ye.s=null;yi=yd(ye);}yg=yi;}return yg;};return g.New(null,null,yd,function(yj){var yk;yk=yj.s;return!a.Equals(yk,null)?yk.Dispose():null;});});},exists:function(yl,ym){var yn,yo,yp;yn=f.Get(ym);try{yp=false;while(!yp?yn.MoveNext():false){yp=yl(yn.get_Current());}yo=yp;}finally{yn.Dispose!=undefined?yn.Dispose():null;}return yo;},exists2:function(yq,yr,ys){var yt,yu,yv,yw,yx;yt=f.Get(yr);try{yv=f.Get(ys);try{yx=false;while((!yx?yt.MoveNext():false)?yv.MoveNext():false){yx=(yq(yt.get_Current()))(yv.get_Current());}yw=yx;}finally{yv.Dispose!=undefined?yv.Dispose():null;}yu=yw;}finally{yt.Dispose!=undefined?yt.Dispose():null;}return yu;},filter:function(yy,yz){var yA;yA=function(){var yC,yD,yF;yC=f.Get(yz);yD=function(){return yC.Dispose();};yF=function(yG){var yH,yI,yJ,yK;yH=yC.MoveNext();yI=yC.get_Current();yJ=false;while(yH){if(yy(yI)){yG.c=yI;yJ=true;yK=yH=false;}else{yK=yC.MoveNext()?yI=yC.get_Current():yH=false;}}return yJ;};return g.New(null,null,yF,yD);};return h.Of(yA);},find:function(yL,yM){var yN,yO,yP;yN=i.tryFind(yL,yM);if(yN.$==0){yO=d.FailWith("KeyNotFoundException");}else{yP=yN.$0;yO=yP;}return yO;},findBack:function(yQ,yR){var yS,yT,yU;yS=k.tryFindBack(yQ,c.ofSeq(yR));if(yS.$==0){yT=d.FailWith("KeyNotFoundException");}else{yU=yS.$0;yT=yU;}return yT;},findIndex:function(yV,yW){var yX,yY,yZ;yX=i.tryFindIndex(yV,yW);if(yX.$==0){yY=d.FailWith("KeyNotFoundException");}else{yZ=yX.$0;yY=yZ;}return yY;},findIndexBack:function(y0,y1){var y2,y3,y4;y2=k.tryFindIndexBack(y0,c.ofSeq(y1));if(y2.$==0){y3=d.FailWith("KeyNotFoundException");}else{y4=y2.$0;y3=y4;}return y3;},fold:function(y5,y6,y7){var y8,y9,y_;y8=y6;y9=f.Get(y7);try{while(y9.MoveNext()){y8=(y5(y8))(y9.get_Current());}y_=y8;}finally{y9.Dispose!=undefined?y9.Dispose():null;}return y_;},fold2:function(y$,za,zb,zc){return c.fold2(y$,za,c.ofSeq(zb),c.ofSeq(zc));},foldBack:function(zd,ze,zf){return c.foldBack(zd,c.ofSeq(ze),zf);},foldBack2:function(zg,zh,zi,zj){return c.foldBack2(zg,c.ofSeq(zh),c.ofSeq(zi),zj);},forall:function(zk,zl){return!i.exists(function(zm){return!zk(zm);},zl);},forall2:function(zn,zo,zp){return!i.exists2(function(zq){return function(zr){return!(zn(zq))(zr);};},zo,zp);},head:function(zs){var zt,zu;zt=f.Get(zs);try{zu=zt.MoveNext()?zt.get_Current():j.insufficient();}finally{zt.Dispose!=undefined?zt.Dispose():null;}return zu;},indexed:function(zv){return i.mapi(function(zw){return function(zx){return[zw,zx];};},zv);},init:function(zy,zz){return i.take(zy,i.initInfinite(zz));},initInfinite:function(zA){var zB;zB=function(){var zD;zD=function(zE){zE.c=zA(zE.s);zE.s=zE.s+1;return true;};return g.New(0,null,zD,function(){});};return h.Of(zB);},isEmpty:function(zG){var zH,zI;zH=f.Get(zG);try{zI=!zH.MoveNext();}finally{zH.Dispose!=undefined?zH.Dispose():null;}return zI;},iter:function(zJ,zK){return i.iteri(function(){return function(zM){return zJ(zM);};},zK);},iter2:function(zN,zO,zP){var zQ,zR,zS,zT;zQ=f.Get(zO);try{zS=f.Get(zP);try{while(zQ.MoveNext()?zS.MoveNext():false){(zN(zQ.get_Current()))(zS.get_Current());}}finally{zS.Dispose!=undefined?zS.Dispose():null;}zR=zT;}finally{zQ.Dispose!=undefined?zQ.Dispose():null;}return zR;},iteri:function(zU,zV){var zW,zX,zY;zW=0;zX=f.Get(zV);try{while(zX.MoveNext()){(zU(zW))(zX.get_Current());zW=zW+1;}}finally{zX.Dispose!=undefined?zX.Dispose():null;}return zY;},iteri2:function(zZ,z0,z1){return c.iteri2(zZ,c.ofSeq(z0),c.ofSeq(z1));},length:function(z2){var z3,z4,z5;z3=0;z4=f.Get(z2);try{while(z4.MoveNext()){z3=z3+1;}z5=z3;}finally{z4.Dispose!=undefined?z4.Dispose():null;}return z5;},map:function(z6,z7){var z8;z8=function(){var z_,z$,Ab;z_=f.Get(z7);z$=function(){return z_.Dispose();};Ab=function(Ac){var Ad;if(z_.MoveNext()){Ac.c=z6(z_.get_Current());Ad=true;}else{Ad=false;}return Ad;};return g.New(null,null,Ab,z$);};return h.Of(z8);},map2:function(Ae,Af,Ag){var Ah;Ah=function(){var Aj,Ak,Al,An;Aj=f.Get(Af);Ak=f.Get(Ag);Al=function(){Aj.Dispose();return Ak.Dispose();};An=function(Ao){var Ap;if(Aj.MoveNext()?Ak.MoveNext():false){Ao.c=(Ae(Aj.get_Current()))(Ak.get_Current());Ap=true;}else{Ap=false;}return Ap;};return g.New(null,null,An,Al);};return h.Of(Ah);},map3:function(Aq,Ar,As,At){var Au;Au=function(){var Aw,Ax,Ay,Az,AB;Aw=f.Get(Ar);Ax=f.Get(As);Ay=f.Get(At);Az=function(){Aw.Dispose();Ax.Dispose();return Ay.Dispose();};AB=function(AC){var AD;if((Aw.MoveNext()?Ax.MoveNext():false)?Ay.MoveNext():false){AC.c=((Aq(Aw.get_Current()))(Ax.get_Current()))(Ay.get_Current());AD=true;}else{AD=false;}return AD;};return g.New(null,null,AB,Az);};return h.Of(Au);},mapFold:function(AE,AF,AG){var AH,AI,AJ;AH=k.mapFold(AE,AF,i.toArray(AG));AI=AH[0];AJ=AH[1];return[AI,AJ];},mapFoldBack:function(AK,AL,AM){var AN,AO,AP;AN=k.mapFoldBack(AK,i.toArray(AL),AM);AO=AN[0];AP=AN[1];return[AO,AP];},mapi:function(AQ,AR){return i.map2(AQ,i.initInfinite(function(AS){return AS;}),AR);},mapi2:function(AT,AU,AV){return i.map3(AT,i.initInfinite(function(AW){return AW;}),AU,AV);},max:function(AX){return i.reduce(function(AY){return function(AZ){return a.Compare(AY,AZ)>=0?AY:AZ;};},AX);},maxBy:function(A0,A1){return i.reduce(function(A2){return function(A3){return a.Compare(A0(A2),A0(A3))>=0?A2:A3;};},A1);},min:function(A4){return i.reduce(function(A5){return function(A6){return a.Compare(A5,A6)<=0?A5:A6;};},A4);},minBy:function(A7,A8){return i.reduce(function(A9){return function(A_){return a.Compare(A7(A9),A7(A_))<=0?A9:A_;};},A8);},nth:function(A$,Ba){var Bb,Bc,Bd;A$<0?d.FailWith("negative index requested"):null;Bb=-1;Bc=f.Get(Ba);try{while(Bb<A$){!Bc.MoveNext()?j.insufficient():null;Bb=Bb+1;}Bd=Bc.get_Current();}finally{Bc.Dispose!=undefined?Bc.Dispose():null;}return Bd;},permute:function(Be,Bf){return i.delay(function(){return c.permute(Be,c.ofSeq(Bf));});},pick:function(Bh,Bi){var Bj,Bk,Bl;Bj=i.tryPick(Bh,Bi);if(Bj.$==0){Bk=d.FailWith("KeyNotFoundException");}else{Bl=Bj.$0;Bk=Bl;}return Bk;},readOnly:function(Bm){return h.Of(function(){return f.Get(Bm);});},reduce:function(Bo,Bp){var Bq,Br,Bs;Bq=f.Get(Bp);try{!Bq.MoveNext()?d.FailWith("The input sequence was empty"):null;Bs=Bq.get_Current();while(Bq.MoveNext()){Bs=(Bo(Bs))(Bq.get_Current());}Br=Bs;}finally{Bq.Dispose!=undefined?Bq.Dispose():null;}return Br;},reduceBack:function(Bt,Bu){return c.reduceBack(Bt,c.ofSeq(Bu));},replicate:function(Bv,Bw){Bv<0?j.nonNegative():null;return i.delay(function(){return i.map(function(){return Bw;},d.range(0,Bv-1));});},rev:function(Bz){return i.delay(function(){var BB;BB=i.toArray(Bz).slice().reverse();return BB;});},scan:function(BC,BD,BE){var BF;BF=function(){var BH,BI,BK;BH=f.Get(BE);BI=function(){return BH.Dispose();};BK=function(BL){var BM,BN;if(BL.s){if(BH.MoveNext()){BL.c=(BC(BL.get_Current()))(BH.get_Current());BN=true;}else{BN=false;}BM=BN;}else{BL.c=BD;BL.s=true;BM=true;}return BM;};return g.New(false,null,BK,BI);};return h.Of(BF);},scanBack:function(BO,BP,BQ){return i.delay(function(){return c.scanBack(BO,c.ofSeq(BP),BQ);});},skip:function(BS,BT){return h.Of(function(){var BV;BV=f.Get(BT);return g.New(true,null,function(BW){var BX,BY,BZ;if(BW.s){for(BY=1;BY<=BS;BY++){!BV.MoveNext()?j.insufficient():null;}BX=void(BW.s=false);}else{BX=null;}if(BV.MoveNext()){BW.c=BV.get_Current();BZ=true;}else{BZ=false;}return BZ;},function(){return BV.Dispose();});});},skipWhile:function(B1,B2){return h.Of(function(){var B4;B4=f.Get(B2);return g.New(true,null,function(B5){var B6,B7,B8,B9,B_,B$;if(B5.s){B7=true;B8=false;while(B7){if(B4.MoveNext()){B9=!B1(B4.get_Current())?B7=false:null;}else{B7=false;B9=B8=true;}}B5.s=false;if(B8){B_=false;}else{B5.c=B4.get_Current();B_=true;}B6=B_;}else{if(B4.MoveNext()){B5.c=B4.get_Current();B$=true;}else{B$=false;}B6=B$;}return B6;},function(){return B4.Dispose();});});},sort:function(Cb){return i.sortBy(function(Cc){return Cc;},Cb);},sortBy:function(Cd,Ce){return i.delay(function(){var Cg;Cg=c.ofSeq(Ce);c.sortInPlaceBy(Cd,Cg);return Cg;});},sortByDescending:function(Ch,Ci){return i.delay(function(){var Ck;Ck=c.ofSeq(Ci);k.sortInPlaceByDescending(Ch,Ck);return Ck;});},sortDescending:function(Cl){return i.sortByDescending(function(Cm){return Cm;},Cl);},sortWith:function(Cn,Co){return i.delay(function(){var Cq;Cq=c.ofSeq(Co);c.sortInPlaceWith(Cn,Cq);return Cq;});},splitInto:function(Cr,Cs){Cr<=0?d.FailWith("Count must be positive"):null;return i.delay(function(){var Cu;Cu=k.splitInto(Cr,c.ofSeq(Cs));return Cu;});},sum:function(Cv){return i.fold(function(Cw){return function(Cx){return Cw+Cx;};},0,Cv);},sumBy:function(Cy,Cz){return i.fold(function(CA){return function(CB){return CA+Cy(CB);};},0,Cz);},tail:function(CC){return i.skip(1,CC);},take:function(CD,CE){CD<0?j.nonNegative():null;return h.Of(function(){var CG;CG=[f.Get(CE)];return g.New(0,null,function(CH){var CI,CJ,CK,CL,CM;CH.s=CH.s+1;if(CH.s>CD){CI=false;}else{CJ=CG[0];if(a.Equals(CJ,null)){CK=j.insufficient();}else{if(CJ.MoveNext()){CH.c=CJ.get_Current();if(CH.s===CD){CJ.Dispose();CM=void(CG[0]=null);}else{CM=null;}CL=true;}else{CJ.Dispose();CG[0]=null;CL=j.insufficient();}CK=CL;}CI=CK;}return CI;},function(){var CO;CO=CG[0];return!a.Equals(CO,null)?CO.Dispose():null;});});},takeWhile:function(CP,CQ){return i.delay(function(){return i.enumUsing(f.Get(CQ),function(CS){return i.enumWhile(function(){return CS.MoveNext()?CP(CS.get_Current()):false;},i.delay(function(){return[CS.get_Current()];}));});});},toArray:function(CV){var CW,CX,CY,CZ;CW=[];CX=f.Get(CV);try{while(CX.MoveNext()){CZ=CX.get_Current();CW.push(CZ);}}finally{CX.Dispose!=undefined?CX.Dispose():null;}return CW.slice(0);},toList:function(C0){return e.ofSeq(C0);},tryFind:function(C1,C2){var C3,C4,C5,C6;C3=f.Get(C2);try{C5={$:0};while(C5.$==0?C3.MoveNext():false){C6=C3.get_Current();C1(C6)?C5={$:1,$0:C6}:null;}C4=C5;}finally{C3.Dispose!=undefined?C3.Dispose():null;}return C4;},tryFindIndex:function(C7,C8){var C9,C_,C$,Da,Db;C9=f.Get(C8);try{C$=true;Da=0;while(C$?C9.MoveNext():false){Db=C9.get_Current();C7(Db)?C$=false:Da=Da+1;}C_=C$?{$:0}:{$:1,$0:Da};}finally{C9.Dispose!=undefined?C9.Dispose():null;}return C_;},tryPick:function(Dc,Dd){var De,Df,Dg;De=f.Get(Dd);try{Dg={$:0};while(a.Equals(Dg,{$:0})?De.MoveNext():false){Dg=Dc(De.get_Current());}Df=Dg;}finally{De.Dispose!=undefined?De.Dispose():null;}return Df;},zip:function(Dh,Di){return i.map2(function(Dj){return function(Dk){return[Dj,Dk];};},Dh,Di);},zip3:function(Dl,Dm,Dn){return i.map2(function(Do){return function(Dp){var Dq,Dr;Dq=Dp[0];Dr=Dp[1];return[Do,Dq,Dr];};},Dl,i.zip(Dm,Dn));}},Slice:{array:function(Ds,Dt,Du){var Dv,Dw,Dx,Dy,Dz,DA,DB,DC;Dv=[Dt,Du];if(Dv[0].$==0){if(Dv[1].$==1){Dy=Dv[1].$0;Dx=Ds.slice(0,Dy+1);}else{Dx=[];}Dw=Dx;}else{if(Dv[1].$==0){DA=Dv[0].$0;Dz=Ds.slice(DA);}else{DB=Dv[1].$0;DC=Dv[0].$0;Dz=Ds.slice(DC,DB+1);}Dw=Dz;}return Dw;},array2D:function(DD,DE,DF,DG,DH){var DI,DJ,DK,DL,DM,DN,DO,DP,DQ,DR,DS,DT,DU,DV;if(DE.$==1){DK=DE.$0;DJ=DK;}else{DJ=0;}DI=DJ;if(DG.$==1){DN=DG.$0;DM=DN;}else{DM=0;}DL=DM;if(DF.$==1){DQ=DF.$0;DP=DQ;}else{DP=DD.length-1;}DO=DP;if(DH.$==1){DT=DH.$0;DS=DT;}else{DS=(DD.length?DD[0].length:0)-1;}DR=DS;DU=DO-DI+1;DV=DR-DL+1;return c.sub2D(DD,DI,DL,DU,DV);},array2Dfix1:function(DW,DX,DY,DZ){var D0,D1,D2,D3,D4,D5,D6,D7,D8;if(DY.$==1){D2=DY.$0;D1=D2;}else{D1=0;}D0=D1;if(DZ.$==1){D5=DZ.$0;D4=D5;}else{D4=(DW.length?DW[0].length:0)-1;}D3=D4;D6=D3-D0+1;D7=b(D6);for(D8=0;D8<=D6-1;D8++){c.set(D7,D8,c.get2D(DW,DX,D0+D8));}return D7;},array2Dfix2:function(D9,D_,D$,Ea){var Eb,Ec,Ed,Ee,Ef,Eg,Eh,Ei,Ej;if(D_.$==1){Ed=D_.$0;Ec=Ed;}else{Ec=0;}Eb=Ec;if(D$.$==1){Eg=D$.$0;Ef=Eg;}else{Ef=D9.length-1;}Ee=Ef;Eh=Ee-Eb+1;Ei=b(Eh);for(Ej=0;Ej<=Eh-1;Ej++){c.set(Ei,Ej,c.get2D(D9,Eb+Ej,Ea));}return Ei;},setArray:function(Ek,El,Em,En){var Eo,Ep,Eq,Er,Es,Et;if(El.$==1){Eq=El.$0;Ep=Eq;}else{Ep=0;}Eo=Ep;if(Em.$==1){Et=Em.$0;Es=Et;}else{Es=Ek.length-1;}Er=Es;return c.setSub(Ek,Eo,Er-Eo+1,En);},setArray2D:function(Eu,Ev,Ew,Ex,Ey,Ez){var EA,EB,EC,ED,EE,EF,EG,EH,EI,EJ,EK,EL;if(Ev.$==1){EC=Ev.$0;EB=EC;}else{EB=0;}EA=EB;if(Ex.$==1){EF=Ex.$0;EE=EF;}else{EE=0;}ED=EE;if(Ew.$==1){EI=Ew.$0;EH=EI;}else{EH=Eu.length-1;}EG=EH;if(Ey.$==1){EL=Ey.$0;EK=EL;}else{EK=(Eu.length?Eu[0].length:0)-1;}EJ=EK;return c.setSub2D(Eu,EA,ED,EG-EA+1,EJ-ED+1,Ez);},setArray2Dfix1:function(EM,EN,EO,EP,EQ){var ER,ES,ET,EU,EV,EW,EX,EY;if(EO.$==1){ET=EO.$0;ES=ET;}else{ES=0;}ER=ES;if(EP.$==1){EW=EP.$0;EV=EW;}else{EV=(EM.length?EM[0].length:0)-1;}EU=EV;EX=EU-ER+1;for(EY=0;EY<=EX-1;EY++){c.set2D(EM,EN,ER+EY,c.get(EQ,EY));}return;},setArray2Dfix2:function(EZ,E0,E1,E2,E3){var E4,E5,E6,E7,E8,E9,E_,E$;if(E0.$==1){E6=E0.$0;E5=E6;}else{E5=0;}E4=E5;if(E1.$==1){E9=E1.$0;E8=E9;}else{E8=EZ.length-1;}E7=E8;E_=E7-E4+1;for(E$=0;E$<=E_-1;E$++){c.set2D(EZ,E4+E$,E2,c.get(E3,E$));}return;},string:function(Fa,Fb,Fc){var Fd,Fe,Ff,Fg,Fh,Fi,Fj,Fk;Fd=[Fb,Fc];if(Fd[0].$==0){if(Fd[1].$==1){Fg=Fd[1].$0;Ff=Fa.slice(0,Fg+1);}else{Ff="";}Fe=Ff;}else{if(Fd[1].$==0){Fi=Fd[0].$0;Fh=Fa.slice(Fi);}else{Fj=Fd[1].$0;Fk=Fd[0].$0;Fh=Fa.slice(Fk,Fj+1);}Fe=Fh;}return Fe;}},Stack:{Clear:function(Fl){return Fl.splice(0,c.length(Fl));},Contains:function(Fm,Fn){return i.exists(function(Fo){return a.Equals(Fn,Fo);},Fm);},CopyTo:function(Fp,Fq,Fr){return c.blit(Fq,0,Fq,Fr,c.length(Fp));}},Strings:{Compare:function(Fs,Ft){return d.Compare(Fs,Ft);},CopyTo:function(Fu,Fv,Fw,Fx,Fy){return c.blit(U.ToCharArray(Fu),Fv,Fw,Fx,Fy);},EndsWith:function($x,$s){var $0=this,$this=this;return $x.substring($x.length-$s.length)==$s;},Filter:function(Fz,FA){var FB,FD;FB=function(FC){return Fz(FC)?{$:1,$0:_1.fromCharCode(FC)}:{$:0};};FD=i.choose(FB,FA);return c.ofSeq(FD).join("");},IndexOf:function($s,$c,$i){var $0=this,$this=this;return $s.indexOf($$.String.fromCharCode($c),$i);},Insert:function($x,$index,$s){var $0=this,$this=this;return $x.substring(0,$index-1)+$s+$x.substring($index);},IsNullOrEmpty:function($x){var $0=this,$this=this;return $x==null||$x=="";},Join:function($sep,$values){var $0=this,$this=this;return $values.join($sep);},LastIndexOf:function($s,$c,$i){var $0=this,$this=this;return $s.lastIndexOf($$.String.fromCharCode($c),$i);},PadLeft:function(FE,FF){return U.PadLeftWith(FE,FF,32);},PadLeftWith:function($s,$n,$c){var $0=this,$this=this;return $n>$s.length?$$.Array($n-$s.length+1).join($$.String.fromCharCode($c))+$s:$s;},PadRight:function(FG,FH){return U.PadRightWith(FG,FH,32);},PadRightWith:function($s,$n,$c){var $0=this,$this=this;return $n>$s.length?$s+$$.Array($n-$s.length+1).join($$.String.fromCharCode($c)):$s;},RegexEscape:function($s){var $0=this,$this=this;return $s.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&");},Remove:function($x,$ix,$ct){var $0=this,$this=this;return $x.substring(0,$ix)+$x.substring($ix+$ct);},Replace:function(FI,FJ,FK){var FL;FL=function(FM){var FN,FO,FP,FQ;FN=FM.indexOf(FJ);if(FN!==-1){FP=U.ReplaceOnce(FM,FJ,FK);FQ=FN+FK.length;FO=U.Substring(FP,0,FN+FK.length)+FL(FP.substring(FQ));}else{FO=FM;}return FO;};return FL(FI);},ReplaceChar:function(FR,FS,FT){return U.Replace(FR,_1.fromCharCode(FS),_1.fromCharCode(FT));},ReplaceOnce:function($string,$search,$replace){var $0=this,$this=this;return $string.replace($search,$replace);},Split:function(FU,FV,FW){var FX;FX=U.SplitWith(FU,FV);return FW===1?c.filter(function(FY){return FY!=="";},FX):FX;},SplitChars:function(FZ,F0,F1){var F2;F2="["+U.RegexEscape(_1.fromCharCode.apply(undefined,F0))+"]";return U.Split(FZ,new _2(F2),F1);},SplitStrings:function(F3,F4,F5){var F6;F6=U.concat("|",c.map(function(F7){return U.RegexEscape(F7);},F4));return U.Split(F3,new _2(F6),F5);},SplitWith:function($str,$pat){var $0=this,$this=this;return $str.split($pat);},StartsWith:function($t,$s){var $0=this,$this=this;return $t.substring(0,$s.length)==$s;},Substring:function($s,$ix,$ct){var $0=this,$this=this;return $s.substr($ix,$ct);},ToCharArray:function(F8){return c.init(F8.length,function(F9){return F8.charCodeAt(F9);});},ToCharArrayRange:function(F_,F$,Ga){return c.init(Ga,function(Gb){return F_.charCodeAt(F$+Gb);});},Trim:function($s){var $0=this,$this=this;return $s.replace(/^\s+/,"").replace(/\s+$/,"");},TrimEnd:function($s){var $0=this,$this=this;return $s.replace(/\s+$/,"");},TrimStart:function($s){var $0=this,$this=this;return $s.replace(/^\s+/,"");},collect:function(Gc,Gd){return c.init(Gd.length,function(Ge){return Gc(Gd.charCodeAt(Ge));}).join("");},concat:function(Gf,Gg){return i.toArray(Gg).join(Gf);},exists:function(Gh,Gi){return i.exists(Gh,U.protect(Gi));},forall:function(Gj,Gk){return i.forall(Gj,U.protect(Gk));},init:function(Gl,Gm){return c.init(Gl,Gm).join("");},iter:function(Gn,Go){return i.iter(Gn,U.protect(Go));},iteri:function(Gp,Gq){return i.iteri(Gp,U.protect(Gq));},length:function(Gr){return U.protect(Gr).length;},map:function(Gs,Gt){return U.collect(function(Gu){return _1.fromCharCode(Gs(Gu));},U.protect(Gt));},mapi:function(Gv,Gw){return i.toArray(i.mapi(function(Gx){return function(Gy){return _1.fromCharCode((Gv(Gx))(Gy));};},Gw)).join("");},protect:function(Gz){return Gz===null?"":Gz;},replicate:function(GA,GB){return U.init(GA,function(){return GB;});}},Unchecked:{Compare:function(GD,GE){var GF,GP,GQ,GR,GS;GF=function(GG){return function(GH){var GI;GI=[0];N.ForEach(GG,function(GJ){var GK,GL;if(!GG.hasOwnProperty(GJ)){GK=false;}else{if(!GH.hasOwnProperty(GJ)){GI[0]=1;GL=true;}else{GI[0]=a.Compare(GG[GJ],GH[GJ]);GL=GI[0]!==0;}GK=GL;}return GK;});GI[0]===0?N.ForEach(GH,function(GM){var GN,GO;if(!GH.hasOwnProperty(GM)){GN=false;}else{if(!GG.hasOwnProperty(GM)){GI[0]=-1;GO=true;}else{GO=false;}GN=GO;}return GN;}):null;return GI[0];};};if(GD===GE){GP=0;}else{GQ=typeof GD;if(GQ==="function"){GR=d.FailWith("Cannot compare function values.");}else{if(GQ==="boolean"){GR=GD<GE?-1:1;}else{if(GQ==="number"){GR=GD<GE?-1:1;}else{if(GQ==="string"){GR=GD<GE?-1:1;}else{if(GQ==="object"){GR=GD===null?-1:GE===null?1:"CompareTo"in GD?GD.CompareTo(GE):(GD instanceof b?GE instanceof b:false)?a.compareArrays(GD,GE):(GD instanceof C?GE instanceof C:false)?a.compareDates(GD,GE):(GF(GD))(GE);}else{GS=typeof GE;GR=GS==="undefined"?0:-1;}}}}}GP=GR;}return GP;},Equals:function(GT,GU){var GV,G1,G2;GV=function(GW){return function(GX){var GY;GY=[true];N.ForEach(GW,function(GZ){GY[0]=!GW.hasOwnProperty(GZ)?true:GX.hasOwnProperty(GZ)?a.Equals(GW[GZ],GX[GZ]):false;return!GY[0];});GY[0]?N.ForEach(GX,function(G0){GY[0]=!GX.hasOwnProperty(G0)?true:GW.hasOwnProperty(G0);return!GY[0];}):null;return GY[0];};};if(GT===GU){G1=true;}else{G2=typeof GT;G1=G2==="object"?(((GT===null?true:GT===undefined)?true:GU===null)?true:GU===undefined)?false:"Equals"in GT?GT.Equals(GU):(GT instanceof b?GU instanceof b:false)?a.arrayEquals(GT,GU):(GT instanceof C?GU instanceof C:false)?a.dateEquals(GT,GU):(GV(GT))(GU):false;}return G1;},Hash:function(G3){var G4;G4=typeof G3;return G4==="function"?0:G4==="boolean"?G3?1:0:G4==="number"?G3:G4==="string"?a.hashString(G3):G4==="object"?G3==null?0:G3 instanceof b?a.hashArray(G3):a.hashObject(G3):0;},arrayEquals:function(G5,G6){var G7,G8,G9;if(c.length(G5)===c.length(G6)){G8=true;G9=0;while(G8?G9<c.length(G5):false){!a.Equals(c.get(G5,G9),c.get(G6,G9))?G8=false:null;G9=G9+1;}G7=G8;}else{G7=false;}return G7;},compareArrays:function(G_,G$){var Ha,Hb,Hc,Hd;if(c.length(G_)<c.length(G$)){Ha=-1;}else{if(c.length(G_)>c.length(G$)){Hb=1;}else{Hc=0;Hd=0;while(Hc===0?Hd<c.length(G_):false){Hc=a.Compare(c.get(G_,Hd),c.get(G$,Hd));Hd=Hd+1;}Hb=Hc;}Ha=Hb;}return Ha;},compareDates:function(He,Hf){return d.Compare(He.getTime(),Hf.getTime());},dateEquals:function(Hg,Hh){return Hg.getTime()===Hh.getTime();},hashArray:function(Hi){var Hj,Hk;Hj=-34948909;for(Hk=0;Hk<=c.length(Hi)-1;Hk++){Hj=a.hashMix(Hj,a.Hash(c.get(Hi,Hk)));}return Hj;},hashMix:function(Hl,Hm){return(Hl<<5)+Hl+Hm;},hashObject:function(Hn){var Ho,Hp,Hs;if("GetHashCode"in Hn){Ho=Hn.GetHashCode();}else{Hp=function(Hq,Hr){return a.hashMix(Hq,Hr);};Hs=[0];N.ForEach(Hn,function(Ht){Hs[0]=Hp(Hp(Hs[0],a.hashString(Ht)),a.Hash(Hn[Ht]));return false;});Ho=Hs[0];}return Ho;},hashString:function(Hu){var Hv,Hw,Hx;if(Hu===null){Hv=0;}else{Hw=5381;for(Hx=0;Hx<=Hu.length-1;Hx++){Hw=a.hashMix(Hw,Hu.charCodeAt(Hx)<<0);}Hv=Hw;}return Hv;}},Util:{addListener:function(Hy,Hz){Hy.Subscribe(z.observer(Hz));},observer:function(HA){return{OnCompleted:function(){},OnError:function(){},OnNext:HA};},subscribeTo:function(HD,HE){return HD.Subscribe(z.observer(HE));}}}});$.OnInit(function(){a=$.Safe($$.WebSharper.Unchecked);b=$.Safe($$.Array);c=$.Safe($$.WebSharper.Arrays);d=$.Safe($$.WebSharper.Operators);e=$.Safe($$.WebSharper.List);f=$.Safe($$.WebSharper.Enumerator);g=$.Safe(f.T);h=$.Safe($$.WebSharper.Enumerable);i=$.Safe($$.WebSharper.Seq);j=$.Safe($$.Seq);k=$.Safe($$.Arrays);l=$.Safe($$.WebSharper.Ref);m=$.Safe($$.WebSharper.AggregateException);n=$.Safe($$.WebSharper.Exception);o=$.Safe($$.WebSharper.ArgumentException);p=$.Safe($$.Number);q=$.Safe($$.WebSharper.IndexOutOfRangeException);r=$.Safe($$.List);s=$.Safe($$.WebSharper.Arrays2D);t=$.Safe($$.WebSharper.Concurrency);u=$.Safe($$.WebSharper.Option);v=$.Safe($$.clearTimeout);w=$.Safe($$.setTimeout);x=$.Safe($$.WebSharper.CancellationTokenSource);y=$.Safe($$.WebSharper.Char);z=$.Safe($$.WebSharper.Util);A=$.Safe($$.WebSharper.Lazy);B=$.Safe($$.WebSharper.OperationCanceledException);C=$.Safe($$.Date);D=$.Safe($$.console);E=$.Safe(t.Scheduler);F=$.Safe($$.WebSharper.Html);G=$.Safe(F.Client);H=$.Safe(G.Activator);I=$.Safe($$.document);J=$.Safe($$.jQuery);K=$.Safe($$.WebSharper.Json);L=$.Safe($$.JSON);M=$.Safe($$.WebSharper.JavaScript);N=$.Safe(M.JSModule);O=$.Safe(G.HtmlContentExtensions);P=$.Safe(O.SingleNode);Q=$.Safe($$.WebSharper.InvalidOperationException);R=$.Safe(e.T);S=$.Safe($$.WebSharper.MatchFailureException);T=$.Safe($$.Math);U=$.Safe($$.WebSharper.Strings);V=$.Safe($$.WebSharper.PrintfHelpers);W=$.Safe($$.WebSharper.Remoting);X=$.Safe(W.XhrProvider);Y=$.Safe($$.WebSharper.AsyncProxy);Z=$.Safe(W.AjaxRemotingProvider);_0=$.Safe($$.window);_1=$.Safe($$.String);return _2=$.Safe($$.RegExp);});$.OnLoad(function(){$.Inherit(m,n);$.Inherit(o,n);$.Inherit(q,n);$.Inherit(Q,n);$.Inherit(S,n);$.Inherit(B,n);W.EndPoint();W.AjaxProvider();H.Activate();t.scheduler();t.defCTS();t.GetCT();return;});}());

(function(){var $$=this,$=this.IntelliFactory.Runtime,a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r;$.Define($$,{WebSharper:{Json:{Decode:{Array:function(s){return b.Array(s);},DateTime:function(){return function(){return function(u){return(new c(u)).getTime();};};},List:function(v){return function(){return function(x){var y;y=v(null);return d.init(e.length(x),function(z){return y(e.get(x,z));});};};},Record:function(A,B){return function(){return function(D){var E,F;E=A===undefined?{}:new A();F=function(G){var H,I,J;H=G[0];I=G[1];J=G[2];return f.Equals(J,0)?void(E[H]=(I(null))(D[H])):f.Equals(J,1)?void(E[H]=D.hasOwnProperty(H)?{$:1,$0:(I(null))(D[H])}:{$:0}):f.Equals(J,2)?D.hasOwnProperty(H)?void(E[H]=(I(null))(D[H])):null:g.FailWith("Invalid field option kind");};e.iter(F,B);return E;};};},Set:function(K){return function(){return function(M){var N;N=K(null);return i.New1(j.OfSeq(e.map(N,M)));};};},StringDictionary:function(O){return function(){return function(Q){var R;R=k.New12();O(null);m.ForEach(Q,function(S){R.set_Item(S,Q[S]);return false;});return R;};};},StringMap:function(T){return function(){return function(V){var W;W=[n.New1([])];T(null);m.ForEach(V,function(X){W[0]=W[0].Add(X,V[X]);return false;});return W[0];};};},Tuple:function(Y){return b.Tuple(Y);},Union:function(Z,_0,_1){return function(){return function(_3){var _4,_5,_6,_7,_8,_9,bb,be,bf,bg;if(typeof _3==="object"){_5=Z===undefined?{}:new Z();if(f.Equals(typeof _0,"string")){_8=_3[_0];_9=function(_){var ba;ba=_[0];_[1];return ba===_8;};_7=e.findINdex(_9,_1);}else{bb=[undefined];m.ForEach(_0,function(bc){var bd;if(_3.hasOwnProperty(bc)){bb[0]=_0[bc];bd=true;}else{bd=false;}return bd;});_7=bb[0];}_6=_7;_5.$=_6;be=e.get(_1,_6);bf=be[1];bg=function(bh){var bi,bj,bk,bl;bi=bh[0];bj=bh[1];bk=bh[2];bl=bh[3];return bi===null?void(_5.$0=(bk(null))(_3)):f.Equals(bl,0)?void(_5[bi]=(bk(null))(_3[bj])):f.Equals(bl,1)?void(_5[bi]=_3.hasOwnProperty(bj)?{$:1,$0:(bk(null))(_3[bj])}:{$:0}):g.FailWith("Invalid field option kind");};e.iter(bg,bf);_4=_5;}else{_4=_3;}return _4;};};}},Encode:{Array:function(bl){return function(){return function(bn){var bo;bo=bl(null);return e.map(bo,bn);};};},DateTime:function(){return function(){return function(bq){return(new c(bq)).toISOString();};};},Id:function(){return function(br){return br;};},List:function(bs){return function(){return function(bu){var bv,bw,bx;bv=[];bw=bs(null);bx=function(by){var bz;bz=bv.push(bw(by));return;};o.iter(bx,bu);return bv;};};},Record:function(bA,bB){return function(){return function(bD){var bE,bF;bE={};bF=function(bG){var bH,bI,bJ,bK,bL,bM,bN;bH=bG[0];bI=bG[1];bJ=bG[2];if(f.Equals(bJ,0)){bK=void(bE[bH]=(bI(null))(bD[bH]));}else{if(f.Equals(bJ,1)){bL=bD[bH];if(bL.$==0){bM=null;}else{bN=bL.$0;bM=void(bE[bH]=(bI(null))(bN));}bK=bM;}else{bK=f.Equals(bJ,2)?bD.hasOwnProperty(bH)?void(bE[bH]=(bI(null))(bD[bH])):null:g.FailWith("Invalid field option kind");}}return bK;};e.iter(bF,bB);return bE;};};},Set:function(bO){return function(){return function(bQ){var bR,bS,bT;bR=[];bS=bO(null);bT=function(bU){var bV;bV=bR.push(bS(bU));return;};o.iter(bT,bQ);return bR;};};},StringDictionary:function(bW){return function(){return function(bY){var bZ,b0,b1,b2,b3,b4,b5,b6;bZ={};b0=bW(null);b1=p.Get(bY);try{while(b1.MoveNext()){b3=b1.get_Current();b4=g.KeyValue(b3);b5=b4[1];b6=b4[0];bZ[b6]=b0(b5);}}finally{b1.Dispose!=undefined?b1.Dispose():null;}return bZ;};};},StringMap:function(b7){return function(){return function(b9){var b_,b$,ca;b_={};b$=b7(null);ca=function(cb){return function(cc){b_[cb]=b$(cc);};};q.Iterate(ca,b9);return b_;};};},Tuple:function(cd){return function(){return function(cf){return e.map2(function(cg){return function(ch){return(cg(null))(ch);};},cd,cf);};};},Union:function(ci,cj,ck){return function(){return function(cm){var cn,co,cp,cq,cr,cs,ct;if(typeof cm==="object"){co={};cp=cm.$;cq=e.get(ck,cp);cr=cq[0];cs=cq[1];f.Equals(typeof cj,"string")?void(co[cj]=cr):null;ct=function(cu){var cv,cw,cx,cy,cz,cA,cC,cD,cE,cF;cv=cu[0];cw=cu[1];cx=cu[2];cy=cu[3];if(cv===null){cA=(cx(null))(cm.$0);cz=m.ForEach(cA,function(cB){co[cB]=cA[cB];return false;});}else{if(f.Equals(cy,0)){cC=void(co[cw]=(cx(null))(cm[cv]));}else{if(f.Equals(cy,1)){cD=cm[cv];if(cD.$==0){cE=null;}else{cF=cD.$0;cE=void(co[cw]=(cx(null))(cF));}cC=cE;}else{cC=g.FailWith("Invalid field option kind");}}cz=cC;}return cz;};e.iter(ct,cs);cn=co;}else{cn=cm;}return cn;};};}}},Web:{InlineControl:$.Class({get_Body:function(){var cG;cG=e.fold(function(cH){return function(cI){return cH[cI];};},r,this.funcName);return cG.apply(null,this.args);}})}}});$.OnInit(function(){a=$.Safe($$.WebSharper.Json);b=$.Safe(a.Encode);c=$.Safe($$.Date);d=$.Safe($$.WebSharper.List);e=$.Safe($$.WebSharper.Arrays);f=$.Safe($$.WebSharper.Unchecked);g=$.Safe($$.WebSharper.Operators);h=$.Safe($$.WebSharper.Collections);i=$.Safe(h.FSharpSet);j=$.Safe(h.BalancedTree);k=$.Safe(h.Dictionary);l=$.Safe($$.WebSharper.JavaScript);m=$.Safe(l.JSModule);n=$.Safe(h.FSharpMap);o=$.Safe($$.WebSharper.Seq);p=$.Safe($$.WebSharper.Enumerator);q=$.Safe(h.MapModule);return r=$.Safe($$.window);});$.OnLoad(function(){return;});}());

(function(){var $$=this,$=this.IntelliFactory.Runtime,a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t;$.Define($$,{WebSharper:{Html:{Client:{Attr:{Attr:$.Field(function(){return c.Attr();})},Attribute:$.Class({get_Body:function(){var u;u=this.HtmlProvider.CreateAttribute(this.Name);u.value=this.Value;return u;}},{New:function(v,w,x){var y;y=d.New1(v);y.Name=w;y.Value=x;return y;},New1:function(z){var A;A=$.New(this,e.New());A.HtmlProvider=z;return A;}}),AttributeBuilder:$.Class({NewAttr:function(B,C){var D;D=d.New(this.HtmlProvider,B,C);return D;}},{New:function(E){var F;F=$.New(this,{});F.HtmlProvider=E;return F;}}),Default:{OnLoad:function(G){return c.HtmlProvider().OnDocumentReady(G);}},DeprecatedAttributeBuilder:$.Class({NewAttr:function(H,I){var J;J=d.New(this.HtmlProvider,H,I);return J;}},{New:function(K){var L;L=$.New(this,{});L.HtmlProvider=K;return L;}}),DeprecatedTagBuilder:$.Class({NewTag:function(M,N){var O,P,Q,R;O=f.New(this.HtmlProvider,M);P=g.Get(N);try{while(P.MoveNext()){R=P.get_Current();O.AppendI(R);}}finally{P.Dispose!=undefined?P.Dispose():null;}return O;}},{New:function(S){var T;T=$.New(this,{});T.HtmlProvider=S;return T;}}),Element:$.Class({AppendI:function(U){var V,W,X,Y,Z,_0,_1,_2,_3;V=U.get_Body();if(V.nodeType===2){X=this["HtmlProvider@33"];Y=this.get_Body();W=X.AppendAttribute(Y,V);}else{Z=this["HtmlProvider@33"];_0=this.get_Body();_1=U.get_Body();W=Z.AppendNode(_0,_1);}if(this.IsRendered){_2=U.Render();}else{_3=this.RenderInternal;_2=void(this.RenderInternal=function(){_3(null);return U.Render();});}return _2;},AppendN:function(_5){var _6,_7;_6=this["HtmlProvider@33"];_7=this.get_Body();return _6.AppendNode(_7,_5);},OnLoad:function(_8){var _9,_;_9=this["HtmlProvider@33"];_=this.get_Body();return _9.OnLoad(_,_8);},Render:function(){var ba;if(!this.IsRendered){this.RenderInternal.call(null,null);ba=void(this.IsRendered=true);}else{ba=null;}return ba;},get_Body:function(){return this.Dom;},get_Html:function(){return this["HtmlProvider@33"].GetHtml(this.get_Body());},get_HtmlProvider:function(){return this["HtmlProvider@33"];},get_Id:function(){var ba,bb,bc,bd,be,bf,bg;ba=this["HtmlProvider@33"];bb=this.get_Body();bc=ba.GetProperty(bb,"id");if(bc===undefined?true:bc===""){be="id"+h.round(h.random()*100000000);bf=this["HtmlProvider@33"];bg=this.get_Body();bf.SetProperty(bg,"id",be);bd=be;}else{bd=bc;}return bd;},get_Item:function(bh){var bi,bj,bk,bl;bi=this["HtmlProvider@33"];bj=this.get_Body();bi.GetAttribute(bj,bh);bk=this["HtmlProvider@33"];bl=this.get_Body();return bk.GetAttribute(bl,bh);},get_Text:function(){return this["HtmlProvider@33"].GetText(this.get_Body());},get_Value:function(){return this["HtmlProvider@33"].GetValue(this.get_Body());},set_Html:function(bm){var bn,bo;bn=this["HtmlProvider@33"];bo=this.get_Body();return bn.SetHtml(bo,bm);},set_Item:function(bp,bq){var br,bs;br=this["HtmlProvider@33"];bs=this.get_Body();return br.SetAttribute(bs,bp,bq);},set_Text:function(bt){var bu,bv;bu=this["HtmlProvider@33"];bv=this.get_Body();return bu.SetText(bv,bt);},set_Value:function(bw){var bx,by;bx=this["HtmlProvider@33"];by=this.get_Body();return bx.SetValue(by,bw);}},{New:function(bz,bA){var bB,bC;bB=f.New1(bz);bC=i.createElement(bA);bB.RenderInternal=function(){};bB.Dom=bC;bB.IsRendered=false;return bB;},New1:function(bE){var bF;bF=$.New(this,e.New());bF["HtmlProvider@33"]=bE;return bF;}}),Events:{JQueryEventSupport:$.Class({OnBlur:function(bG,bH){return j(bH.get_Body()).bind("blur",function(bI){return(bG(bH))(bI);});},OnChange:function(bJ,bK){return j(bK.get_Body()).bind("change",function(bL){return(bJ(bK))(bL);});},OnClick:function(bM,bN){return this.OnMouse("click",bM,bN);},OnDoubleClick:function(bO,bP){return this.OnMouse("dblclick",bO,bP);},OnError:function(bQ,bR){return j(bR.get_Body()).bind("error",function(bS){return(bQ(bR))(bS);});},OnEvent:function(bT,bU,bV){return j(bV.get_Body()).bind(bT,function(bW){return(bU(bV))(bW);});},OnFocus:function(bX,bY){return j(bY.get_Body()).bind("focus",function(bZ){return(bX(bY))(bZ);});},OnKeyDown:function(b0,b1){return j(b1.get_Body()).bind("keydown",function(b2){return(b0(b1))({KeyCode:b2.keyCode,Event:b2});});},OnKeyPress:function(b3,b4){return j(b4.get_Body()).keypress(function(b5){return(b3(b4))({CharacterCode:b5.which,Event:b5});});},OnKeyUp:function(b6,b7){return j(b7.get_Body()).bind("keyup",function(b8){return(b6(b7))({KeyCode:b8.keyCode,Event:b8});});},OnLoad:function(b9,b_){return j(b_.get_Body()).bind("load",function(b$){return(b9(b_))(b$);});},OnMouse:function(ca,cb,cc){return j(cc.get_Body()).bind(ca,function(cd){return(cb(cc))({X:cd.pageX,Y:cd.pageY,Event:cd});});},OnMouseDown:function(ce,cf){return this.OnMouse("mousedown",ce,cf);},OnMouseEnter:function(cg,ch){return this.OnMouse("mouseenter",cg,ch);},OnMouseLeave:function(ci,cj){return this.OnMouse("mouseleave",ci,cj);},OnMouseMove:function(ck,cl){return this.OnMouse("mousemove",ck,cl);},OnMouseOut:function(cm,cn){return this.OnMouse("mouseout",cm,cn);},OnMouseUp:function(co,cp){return this.OnMouse("mouseup",co,cp);},OnResize:function(cq,cr){return j(cr.get_Body()).bind("resize",function(cs){return(cq(cr))(cs);});},OnScroll:function(ct,cu){return j(cu.get_Body()).bind("scroll",function(cv){return(ct(cu))(cv);});},OnSelect:function(cw,cx){return j(cx.get_Body()).bind("select",function(cy){return(cw(cx))(cy);});},OnSubmit:function(cz,cA){return j(cA.get_Body()).bind("submit",function(cB){return(cz(cA))(cB);});},OnUnLoad:function(cC,cD){return j(cD.get_Body()).bind("unload",function(cE){return(cC(cD))(cE);});}},{New:function(){return $.New(this,{});}})},EventsPervasives:{Events:$.Field(function(){return l.New();})},Implementation:{Attr:$.Field(function(){return m.New(c.HtmlProvider());}),DeprecatedHtml:$.Field(function(){return n.New(c.HtmlProvider());}),HtmlProvider:$.Field(function(){return o.New();}),JQueryHtmlProvider:$.Class({AddClass:function(cF,cG){return j(cF).addClass(cG);},AppendAttribute:function(cH,cI){var cJ,cK;cJ=cI.nodeName;cK=cI.value;return this.SetAttribute(cH,cJ,cK);},AppendNode:function(cL,cM){return j(cL).append(j(cM));},Clear:function(cN){return j(cN).contents().detach();},CreateAttribute:function(cO){return i.createAttribute(cO);},CreateElement:function(cP){return i.createElement(cP);},CreateTextNode:function(cQ){return i.createTextNode(cQ);},GetAttribute:function(cR,cS){return j(cR).attr(cS);},GetHtml:function(cT){return j(cT).html();},GetProperty:function(cU,cV){var cW;cW=j(cU).prop(cV);return cW;},GetText:function(cX){return cX.textContent;},GetValue:function(cY){var cZ;cZ=j(cY).val();return cZ;},HasAttribute:function(c0,c1){return j(c0).attr(c1)!=null;},OnDocumentReady:function(c2){return j(i).ready(c2);},OnLoad:function(c3,c4){return j(c3).ready(c4);},Remove:function(c5){return j(c5).remove();},RemoveAttribute:function(c6,c7){return j(c6).removeAttr(c7);},RemoveClass:function(c8,c9){return j(c8).removeClass(c9);},SetAttribute:function(c_,c$,da){return j(c_).attr(c$,da);},SetCss:function(db,dc,dd){return j(db).css(dc,dd);},SetHtml:function(de,df){return j(de).html(df);},SetProperty:function(dg,dh,di){var dj;dj=j(dg).prop(dh,di);return dj;},SetStyle:function(dk,dl){return j(dk).attr("style",dl);},SetText:function(dm,dn){dm.textContent=dn;},SetValue:function(_do,dp){return j(_do).val(dp);}},{New:function(){return $.New(this,{});}}),Tags:$.Field(function(){return p.New(c.HtmlProvider());})},Operators:{OnAfterRender:function(dq,dr){var ds;ds=dr.Render;dr.Render=function(){ds.apply(dr);return dq(dr);};return;},OnBeforeRender:function(du,dv){var dw;dw=dv.Render;dv.Render=function(){du(dv);return dw.apply(dv);};return;},add:function(dy,dz){var dA,dB,dC;dA=g.Get(dz);try{while(dA.MoveNext()){dC=dA.get_Current();dy.AppendI(dC);}}finally{dA.Dispose!=undefined?dA.Dispose():null;}return dy;}},Pagelet:$.Class({AppendTo:function(dD){var dE,dF;dE=i.getElementById(dD);dF=dE.appendChild(this.get_Body());return this.Render();},Render:function(){return null;},ReplaceInDom:function(dG){var dH;dH=dG.parentNode.replaceChild(this.get_Body(),dG);return this.Render();}},{New:function(){return $.New(this,{});}}),TagBuilder:$.Class({NewTag:function(dI,dJ){var dK,dL,dM,dN;dK=f.New(this.HtmlProvider,dI);dL=g.Get(dJ);try{while(dL.MoveNext()){dN=dL.get_Current();dK.AppendI(dN);}}finally{dL.Dispose!=undefined?dL.Dispose():null;}return dK;},text:function(dO){return q.New(dO);}},{New:function(dP){var dQ;dQ=$.New(this,{});dQ.HtmlProvider=dP;return dQ;}}),Tags:{Deprecated:$.Field(function(){return c.DeprecatedHtml();}),Tags:$.Field(function(){return c.Tags();})},Text:$.Class({get_Body:function(){return i.createTextNode(this.text);}},{New:function(dR){var dS;dS=$.New(this,e.New());dS.text=dR;return dS;}})}}}});$.OnInit(function(){a=$.Safe($$.WebSharper.Html);b=$.Safe(a.Client);c=$.Safe(b.Implementation);d=$.Safe(b.Attribute);e=$.Safe(b.Pagelet);f=$.Safe(b.Element);g=$.Safe($$.WebSharper.Enumerator);h=$.Safe($$.Math);i=$.Safe($$.document);j=$.Safe($$.jQuery);k=$.Safe(b.Events);l=$.Safe(k.JQueryEventSupport);m=$.Safe(b.AttributeBuilder);n=$.Safe(b.DeprecatedTagBuilder);o=$.Safe(c.JQueryHtmlProvider);p=$.Safe(b.TagBuilder);q=$.Safe(b.Text);r=$.Safe(b.Attr);s=$.Safe(b.EventsPervasives);return t=$.Safe(b.Tags);});$.OnLoad(function(){$.Inherit(d,e);$.Inherit(f,e);$.Inherit(q,e);t.Tags();t.Deprecated();c.Tags();c.HtmlProvider();c.DeprecatedHtml();c.Attr();s.Events();r.Attr();return;});}());

(function(){var $$=this,$=this.IntelliFactory.Runtime,a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C;$.Define($$,{WebSharper:{Collections:{BalancedTree:{Add:function(D,E){return b.Put(function(){return function(G){return G;};},D,E);},Branch:function(H,I,J){return{Node:H,Left:I,Right:J,Height:1+c.Max(I==null?0:I.Height,J==null?0:J.Height),Count:1+(I==null?0:I.Count)+(J==null?0:J.Count)};},Build:function(K,L,M){var N,O,P,Q,R;N=M-L+1;if(N<=0){O=null;}else{P=(L+M)/2>>0;Q=b.Build(K,L,P-1);R=b.Build(K,P+1,M);O=b.Branch(d.get(K,P),Q,R);}return O;},Contains:function(S,T){return!((b.Lookup(S,T))[0]==null);},Enumerate:function(U,V){var W;W=function(X){var Y,Z,_0,_1,_2,_3,_4;Y=X[0];Z=X[1];if(Y==null){if(Z.$==1){_2=Z.$0[0];_3=Z.$1;_4=Z.$0[1];_1={$:1,$0:[_2,[_4,_3]]};}else{_1={$:0};}_0=_1;}else{_0=U?W([Y.Right,$.New(g,{$:1,$0:[Y.Node,Y.Left],$1:Z})]):W([Y.Left,$.New(g,{$:1,$0:[Y.Node,Y.Right],$1:Z})]);}return _0;};return e.unfold(W,[V,$.New(g,{$:0})]);},Lookup:function(_5,_6){var _7,_8,_9,_,ba,bb;_7=[];_8=_6;_9=true;while(_9){if(_8==null){_=_9=false;}else{ba=c.Compare(_5,_8.Node);if(ba===0){bb=_9=false;}else{if(ba===1){_7.unshift([true,_8.Node,_8.Left]);bb=_8=_8.Right;}else{_7.unshift([false,_8.Node,_8.Right]);bb=_8=_8.Left;}}_=bb;}}return[_8,_7];},OfSeq:function(bb){var bc;bc=d.sort(h.toArray(e.distinct(bb)));return b.Build(bc,0,bc.length-1);},Put:function(bd,be,bf){var bg,bh,bi;bg=b.Lookup(be,bf);bh=bg[0];bi=bg[1];return bh==null?b.Rebuild(bi,b.Branch(be,null,null)):b.Rebuild(bi,b.Branch((bd(bh.Node))(be),bh.Left,bh.Right));},Rebuild:function(bj,bk){var bl,bn,bo,bp,bq,br,bs,bt,bu,bv,bw,bx,by,bz,bA;bl=function(bm){return bm==null?0:bm.Height;};bn=bk;for(bo=0;bo<=d.length(bj)-1;bo++){bp=d.get(bj,bo);if(bp[0]){br=bp[1];bs=bp[2];if(bl(bn)>bl(bs)+1){if(bl(bn.Left)===bl(bn.Right)+1){bv=bn.Left;bu=b.Branch(bv.Node,b.Branch(br,bs,bv.Left),b.Branch(bn.Node,bv.Right,bn.Right));}else{bu=b.Branch(bn.Node,b.Branch(br,bs,bn.Left),bn.Right);}bt=bu;}else{bt=b.Branch(br,bs,bn);}bq=bt;}else{bw=bp[1];bx=bp[2];if(bl(bn)>bl(bx)+1){if(bl(bn.Right)===bl(bn.Left)+1){bA=bn.Right;bz=b.Branch(bA.Node,b.Branch(bn.Node,bn.Left,bA.Left),b.Branch(bw,bA.Right,bx));}else{bz=b.Branch(bn.Node,bn.Left,b.Branch(bw,bn.Right,bx));}by=bz;}else{by=b.Branch(bw,bn,bx);}bq=by;}bn=bq;}return bn;},Remove:function(bB,bC){var bD,bE,bF,bG,bH,bI,bJ,bK,bL;bD=b.Lookup(bB,bC);bE=bD[0];bF=bD[1];if(bE==null){bG=bC;}else{if(bE.Right==null){bH=b.Rebuild(bF,bE.Left);}else{if(bE.Left==null){bI=b.Rebuild(bF,bE.Right);}else{bJ=h.append(b.Enumerate(false,bE.Left),b.Enumerate(false,bE.Right));bK=h.toArray(bJ);bL=b.Build(bK,0,bK.length-1);bI=b.Rebuild(bF,bL);}bH=bI;}bG=bH;}return bG;},TryFind:function(bM,bN){var bO;bO=(b.Lookup(bM,bN))[0];return bO==null?{$:0}:{$:1,$0:bO.Node};}},Dictionary:$.Class({Add:function(bP,bQ){var bR,bS;bR=this.hash.call(null,bP);if(this.data.hasOwnProperty(bR)){bS=c.FailWith("An item with the same key has already been added.");}else{this.data[bR]={K:bP,V:bQ};bS=void(this.count=this.count+1);}return bS;},Clear:function(){this.data={};this.count=0;return;},ContainsKey:function(bT){return this.data.hasOwnProperty(this.hash.call(null,bT));},GetEnumerator:function(){var bU;bU=j.GetFieldValues(this.data);return k.Get(bU);},Remove:function(bV){var bW,bX;bW=this.hash.call(null,bV);if(this.data.hasOwnProperty(bW)){j.Delete(this.data,bW);this.count=this.count-1;bX=true;}else{bX=false;}return bX;},get_Item:function(bY){var bZ,b0,b1;bZ=this.hash.call(null,bY);if(this.data.hasOwnProperty(bZ)){b1=this.data[bZ];b0=b1.V;}else{b0=l.notPresent();}return b0;},set_Item:function(b2,b3){var b4;b4=this.hash.call(null,b2);!this.data.hasOwnProperty(b4)?void(this.count=this.count+1):null;this.data[b4]={K:b2,V:b3};return;}},{New:function(b5){return $.New(this,m.New4(b5,function(b6){return function(b7){return n.Equals(b6,b7);};},function(b8){return n.Hash(b8);}));},New1:function(b9,b_){return $.New(this,m.New4(b9,function(b$){return function(ca){return b_.Equals(b$,ca);};},function(cb){return b_.GetHashCode(cb);}));},New11:function(cc,cd){return $.New(this,m.New3(cd));},New12:function(){return $.New(this,m.New4([],function(ce){return function(cf){return n.Equals(ce,cf);};},function(cg){return n.Hash(cg);}));},New2:function(){return $.New(this,m.New12());},New3:function(ci){return $.New(this,m.New4([],function(cj){return function(ck){return ci.Equals(cj,ck);};},function(cl){return ci.GetHashCode(cl);}));},New4:function(cm,cn,co){var cp,cq,cr,cs,ct;cp=$.New(this,{});cp.hash=co;cp.count=0;cp.data={};cq=k.Get(cm);try{while(cq.MoveNext()){cs=cq.get_Current();ct=cs.K;cp.data[cp.hash.call(null,ct)]=cs.V;}}finally{cq.Dispose!=undefined?cq.Dispose():null;}return cp;}}),DictionaryUtil:{notPresent:function(){return c.FailWith("The given key was not present in the dictionary.");}},FSharpMap:$.Class({Add:function(cu,cv){var cw,cx;cw=this.tree;cx=$.New(p,{Key:cu,Value:cv});return o.New(b.Add(cx,cw));},CompareTo:function(cy){return e.compareWith(function(cz){return function(cA){return c.Compare(cz,cA);};},this,cy);},ContainsKey:function(cB){var cC,cD;cC=this.tree;cD=$.New(p,{Key:cB,Value:undefined});return b.Contains(cD,cC);},Equals:function(cE){return this.get_Count()===cE.get_Count()?h.forall2(function(cF){return function(cG){return n.Equals(cF,cG);};},this,cE):false;},GetEnumerator:function(){var cH,cJ,cK;cH=function(cI){return{K:cI.Key,V:cI.Value};};cJ=b.Enumerate(false,this.tree);cK=h.map(cH,cJ);return k.Get(cK);},GetHashCode:function(){return n.Hash(h.toArray(this));},Remove:function(cL){var cM,cN;cM=this.tree;cN=$.New(p,{Key:cL,Value:undefined});return o.New(b.Remove(cN,cM));},TryFind:function(cO){var cP,cQ,cR,cT;cP=this.tree;cQ=$.New(p,{Key:cO,Value:undefined});cR=function(cS){return cS.Value;};cT=b.TryFind(cQ,cP);return q.map(cR,cT);},get_Count:function(){var cU;cU=this.tree;return cU==null?0:cU.Count;},get_IsEmpty:function(){return this.tree==null;},get_Item:function(cV){var cW,cX,cY;cW=this.TryFind(cV);if(cW.$==0){cX=c.FailWith("The given key was not present in the dictionary.");}else{cY=cW.$0;cX=cY;}return cX;},get_Tree:function(){return this.tree;}},{New:function(cZ){var c0;c0=$.New(this,{});c0.tree=cZ;return c0;},New1:function(c1){return $.New(this,o.New(r.fromSeq(c1)));}}),FSharpSet:$.Class({Add:function(c2){return s.New1(b.Add(c2,this.tree));},CompareTo:function(c3){return e.compareWith(function(c4){return function(c5){return c.Compare(c4,c5);};},this,c3);},Contains:function(c6){return b.Contains(c6,this.tree);},Equals:function(c7){return this.get_Count()===c7.get_Count()?h.forall2(function(c8){return function(c9){return n.Equals(c8,c9);};},this,c7):false;},GetEnumerator:function(){return k.Get(b.Enumerate(false,this.tree));},GetHashCode:function(){return-1741749453+n.Hash(h.toArray(this));},IsProperSubsetOf:function(c_){return this.IsSubsetOf(c_)?this.get_Count()<c_.get_Count():false;},IsProperSupersetOf:function(c$){return this.IsSupersetOf(c$)?this.get_Count()>c$.get_Count():false;},IsSubsetOf:function(da){return h.forall(function(db){return da.Contains(db);},this);},IsSupersetOf:function(dc){var de=this;return h.forall(function(dd){return de.Contains(dd);},dc);},Remove:function(df){return s.New1(b.Remove(df,this.tree));},add:function(dg){return s.New1(b.OfSeq(h.append(this,dg)));},get_Count:function(){var dh;dh=this.tree;return dh==null?0:dh.Count;},get_IsEmpty:function(){return this.tree==null;},get_MaximumElement:function(){return h.head(b.Enumerate(true,this.tree));},get_MinimumElement:function(){return h.head(b.Enumerate(false,this.tree));},get_Tree:function(){return this.tree;},sub:function(di){return t.Filter(function(dj){return!di.Contains(dj);},this);}},{New:function(dk){return $.New(this,s.New1(u.ofSeq(dk)));},New1:function(dl){var dm;dm=$.New(this,{});dm.tree=dl;return dm;}}),HashSetProxy:$.Class({Add:function(dn){return this.add(dn);},Clear:function(){this.data=v.prototype.constructor.apply(v,[]);this.count=0;return;},Contains:function(_do){var dp;dp=this.data[this.hash.call(null,_do)];return dp==null?false:this.arrContains(_do,dp);},CopyTo:function(dq){var dr,ds,dt;dr=0;ds=w.concat(this.data);for(dt=0;dt<=ds.length-1;dt++){d.set(dq,dt,ds[dt]);}return;},ExceptWith:function(du){var dv,dw,dx,dy;dv=k.Get(du);try{while(dv.MoveNext()){dx=dv.get_Current();dy=this.Remove(dx);}}finally{dv.Dispose!=undefined?dv.Dispose():null;}return dw;},GetEnumerator:function(){return k.Get(w.concat(this.data));},IntersectWith:function(dz){var dA,dB,dC,dD,dE,dF,dG;dA=x.New3(dz,this.equals,this.hash);dB=w.concat(this.data);for(dC=0;dC<=dB.length-1;dC++){dD=dB[dC];dE=dA.Contains(dD);if(!dE){dG=this.Remove(dD);dF=void dG;}else{dF=null;}}return;},IsProperSubsetOf:function(dH){var dI;dI=d.ofSeq(dH);return this.count<d.length(dI)?this.IsSubsetOf(dI):false;},IsProperSupersetOf:function(dJ){var dK;dK=d.ofSeq(dJ);return this.count>d.length(dK)?this.IsSupersetOf(dK):false;},IsSubsetOf:function(dL){var dM,dN,dP;dM=x.New3(dL,this.equals,this.hash);dN=function(dO){return dM.Contains(dO);};dP=w.concat(this.data);return h.forall(dN,dP);},IsSupersetOf:function(dQ){var dR,dT=this;dR=function(dS){return dT.Contains(dS);};return h.forall(dR,dQ);},Overlaps:function(dU){var dV,dX=this;dV=function(dW){return dX.Contains(dW);};return h.exists(dV,dU);},Remove:function(dY){var dZ,d0,d1,d2;dZ=this.hash.call(null,dY);d0=this.data[dZ];if(d0==null){d1=false;}else{if(this.arrRemove(dY,d0)){this.count=this.count-1;d2=true;}else{d2=false;}d1=d2;}return d1;},RemoveWhere:function(d3){var d4,d5,d6,d7,d8;d4=w.concat(this.data);for(d5=0;d5<=d4.length-1;d5++){d6=d4[d5];if(d3(d6)){d8=this.Remove(d6);d7=void d8;}else{d7=null;}}return;},SetEquals:function(d9){var d_;d_=x.New3(d9,this.equals,this.hash);return this.get_Count()===d_.get_Count()?this.IsSupersetOf(d_):false;},SymmetricExceptWith:function(d$){var ea,eb,ec,ed,ee,ef;ea=k.Get(d$);try{while(ea.MoveNext()){ec=ea.get_Current();if(this.Contains(ec)){ee=this.Remove(ec);ed=void ee;}else{ef=this.Add(ec);ed=void ef;}}}finally{ea.Dispose!=undefined?ea.Dispose():null;}return eb;},UnionWith:function(eg){var eh,ei,ej,ek;eh=k.Get(eg);try{while(eh.MoveNext()){ej=eh.get_Current();ek=this.Add(ej);}}finally{eh.Dispose!=undefined?eh.Dispose():null;}return ei;},add:function(el){var em,en,eo,ep,eq;em=this.hash.call(null,el);en=this.data[em];if(en==null){this.data[em]=[el];this.count=this.count+1;eo=true;}else{if(this.arrContains(el,en)){ep=false;}else{eq=en.push(el);this.count=this.count+1;ep=true;}eo=ep;}return eo;},arrContains:function(er,es){var et,eu,ev;et=true;eu=0;ev=es.length;while(et?eu<ev:false){(this.equals.call(null,es[eu]))(er)?et=false:eu=eu+1;}return!et;},arrRemove:function(ew,ex){var ey,ez,eA,eB,eC,eD,eE;ey=true;ez=0;eA=ex.length;while(ey?ez<eA:false){if((this.equals.call(null,ex[ez]))(ew)){eC=ez;eD=[];eE=ex.splice.apply(ex,[eC,1].concat(eD));eB=ey=false;}else{eB=ez=ez+1;}}return!ey;},get_Count:function(){return this.count;}},{New:function(eF){return $.New(this,x.New3(eF,function(eG){return function(eH){return n.Equals(eG,eH);};},function(eI){return n.Hash(eI);}));},New1:function(eJ){return $.New(this,x.New3(h.empty(),function(eK){return function(eL){return eJ.Equals(eK,eL);};},function(eM){return eJ.GetHashCode(eM);}));},New11:function(){return $.New(this,x.New3(h.empty(),function(eN){return function(eO){return n.Equals(eN,eO);};},function(eP){return n.Hash(eP);}));},New2:function(eQ,eR){return $.New(this,x.New3(eQ,function(eS){return function(eT){return eR.Equals(eS,eT);};},function(eU){return eR.GetHashCode(eU);}));},New3:function(eV,eW,eX){var eY,eZ,e0,e1,e2;eY=$.New(this,{});eY.equals=eW;eY.hash=eX;eY.data=v.prototype.constructor.apply(v,[]);eY.count=0;eZ=k.Get(eV);try{while(eZ.MoveNext()){e1=eZ.get_Current();e2=eY.add(e1);}}finally{eZ.Dispose!=undefined?eZ.Dispose():null;}return eY;}}),HashSetUtil:{concat:function($o){var $0=this,$this=this;var r=[];for(var k in $o){r.push.apply(r,$o[k]);};return r;}},LinkedList:{E:$.Class({Dispose:function(){return null;},MoveNext:function(){this.c=this.c.n;return!n.Equals(this.c,null);},get_Current:function(){return this.c.v;}},{New:function(e3){var e4;e4=$.New(this,{});e4.c=e3;return e4;}}),T:$.Class({AddAfter:function(e5,e6){var e7,e8,e9;e7=e5.n;e8={p:e5,n:e7,v:e6};n.Equals(e5.n,null)?void(this.p=e8):null;e5.n=e8;if(!n.Equals(e7,null)){e7.p=e8;e9=e8;}else{e9=null;}this.c=this.c+1;return e8;},AddBefore:function(e_,e$){var fa,fb,fc;fa=e_.p;fb={p:fa,n:e_,v:e$};n.Equals(e_.p,null)?void(this.n=fb):null;e_.p=fb;if(!n.Equals(fa,null)){fa.n=fb;fc=fb;}else{fc=null;}this.c=this.c+1;return fb;},AddFirst:function(fd){var fe,ff;if(this.c===0){ff={p:null,n:null,v:fd};this.n=ff;this.p=this.n;this.c=1;fe=ff;}else{fe=this.AddBefore(this.n,fd);}return fe;},AddLast:function(fg){var fh,fi;if(this.c===0){fi={p:null,n:null,v:fg};this.n=fi;this.p=this.n;this.c=1;fh=fi;}else{fh=this.AddAfter(this.p,fg);}return fh;},Clear:function(){this.c=0;this.n=null;this.p=null;return;},Contains:function(fj){var fk,fl;fk=false;fl=this.n;while(!n.Equals(fl,null)?!fk:false){fl.v==fj?fk=true:fl=fl.n;}return fk;},Find:function(fm){var fn,fo;fn=this.n;fo=true;while(fo?!n.Equals(fn,null):false){fn.v==fm?fo=false:fn=fn.n;}return fo?null:fn;},FindLast:function(fp){var fq,fr;fq=this.p;fr=true;while(fr?!n.Equals(fq,null):false){fq.v==fp?fr=false:fq=fq.p;}return fr?null:fq;},GetEnumerator:function(){return z.New(this);},Remove:function(fs){var ft,fu,fv,fw;ft=fs.p;fu=fs.n;if(n.Equals(ft,null)){fv=void(this.n=fu);}else{ft.n=fu;fv=fu;}if(n.Equals(fu,null)){fw=void(this.p=ft);}else{fu.p=ft;fw=ft;}this.c=this.c-1;return;},Remove1:function(fx){var fy,fz;fy=this.Find(fx);if(n.Equals(fy,null)){fz=false;}else{this.Remove(fy);fz=true;}return fz;},RemoveFirst:function(){return this.Remove(this.n);},RemoveLast:function(){return this.Remove(this.p);},get_Count:function(){return this.c;},get_First:function(){return this.n;},get_Last:function(){return this.p;}},{New:function(){return $.New(this,A.New1(h.empty()));},New1:function(fA){var fB,fC,fD,fE;fB=$.New(this,{});fB.c=0;fB.n=null;fB.p=null;fC=k.Get(fA);if(fC.MoveNext()){fB.n={p:null,n:null,v:fC.get_Current()};fB.p=fB.n;fD=void(fB.c=1);}else{fD=null;}while(fC.MoveNext()){fE={p:fB.p,n:null,v:fC.get_Current()};fB.p.n=fE;fB.p=fE;fB.c=fB.c+1;}return fB;}})},MapModule:{Exists:function(fF,fG){var fH;fH=function(fI){return(fF(fI.K))(fI.V);};return h.exists(fH,fG);},Filter:function(fJ,fK){var fL,fN,fO,fP,fQ;fL=function(fM){return(fJ(fM.Key))(fM.Value);};fN=b.Enumerate(false,fK.get_Tree());fO=h.filter(fL,fN);fP=h.toArray(fO);fQ=b.Build(fP,0,fP.length-1);return o.New(fQ);},FindKey:function(fR,fS){var fT;fT=function(fU){return(fR(fU.K))(fU.V)?{$:1,$0:fU.K}:{$:0};};return h.pick(fT,fS);},Fold:function(fV,fW,fX){var fY,f1;fY=function(fZ){return function(f0){return((fV(fZ))(f0.Key))(f0.Value);};};f1=b.Enumerate(false,fX.get_Tree());return h.fold(fY,fW,f1);},FoldBack:function(f2,f3,f4){var f5,f8;f5=function(f6){return function(f7){return((f2(f7.Key))(f7.Value))(f6);};};f8=b.Enumerate(true,f3.get_Tree());return h.fold(f5,f4,f8);},ForAll:function(f9,f_){var f$;f$=function(ga){return(f9(ga.K))(ga.V);};return h.forall(f$,f_);},Iterate:function(gb,gc){var gd;gd=function(ge){return(gb(ge.K))(ge.V);};return h.iter(gd,gc);},Map:function(gf,gg){var gh,gj,gk,gl;gh=function(gi){return $.New(p,{Key:gi.Key,Value:(gf(gi.Key))(gi.Value)});};gj=b.Enumerate(false,gg.get_Tree());gk=h.map(gh,gj);gl=b.OfSeq(gk);return o.New(gl);},OfArray:function(gm){var gn,gr,gs;gn=function(go){var gp,gq;gp=go[0];gq=go[1];return $.New(p,{Key:gp,Value:gq});};gr=h.map(gn,gm);gs=b.OfSeq(gr);return o.New(gs);},Partition:function(gt,gu){var gv,gx,gy,gz,gA;gv=function(gw){return(gt(gw.Key))(gw.Value);};gx=h.toArray(b.Enumerate(false,gu.get_Tree()));gy=d.partition(gv,gx);gz=gy[1];gA=gy[0];return[o.New(b.Build(gA,0,gA.length-1)),o.New(b.Build(gz,0,gz.length-1))];},Pick:function(gB,gC){var gD;gD=function(gE){return(gB(gE.K))(gE.V);};return h.pick(gD,gC);},ToSeq:function(gF){var gG,gI;gG=function(gH){return[gH.Key,gH.Value];};gI=b.Enumerate(false,gF.get_Tree());return h.map(gG,gI);},TryFind:function(gJ,gK){return gK.TryFind(gJ);},TryFindKey:function(gL,gM){var gN;gN=function(gO){return(gL(gO.K))(gO.V)?{$:1,$0:gO.K}:{$:0};};return h.tryPick(gN,gM);},TryPick:function(gP,gQ){var gR;gR=function(gS){return(gP(gS.K))(gS.V);};return h.tryPick(gR,gQ);}},MapUtil:{fromSeq:function(gT){var gU;gU=h.toArray(h.delay(function(){return h.collect(function(gW){var gX,gY;gX=gW[1];gY=gW[0];return[$.New(p,{Key:gY,Value:gX})];},e.distinctBy(function(gZ){return gZ[0];},gT));}));d.sortInPlace(gU);return b.Build(gU,0,gU.length-1);}},Pair:$.Class({CompareTo:function(g0){return c.Compare(this.Key,g0.Key);},Equals:function(g1){return n.Equals(this.Key,g1.Key);},GetHashCode:function(){return n.Hash(this.Key);}}),ResizeArray:{ResizeArrayProxy:$.Class({Add:function(g2){return this.arr.push(g2);},AddRange:function(g3){var g5=this;return h.iter(function(g4){return g5.Add(g4);},g3);},Clear:function(){var g6;g6=B.splice(this.arr,0,d.length(this.arr),[]);return;},CopyTo:function(g7){return this.CopyTo1(g7,0);},CopyTo1:function(g8,g9){return this.CopyTo2(0,g8,g9,this.get_Count());},CopyTo2:function(g_,g$,ha,hb){return d.blit(this.arr,g_,g$,ha,hb);},GetEnumerator:function(){return k.Get(this.arr);},GetRange:function(hc,hd){return C.New11(d.sub(this.arr,hc,hd));},Insert:function(he,hf){var hg;hg=B.splice(this.arr,he,0,[hf]);return;},InsertRange:function(hh,hi){var hj;hj=B.splice(this.arr,hh,0,h.toArray(hi));return;},RemoveAt:function(hk){var hl;hl=B.splice(this.arr,hk,1,[]);return;},RemoveRange:function(hm,hn){var ho;ho=B.splice(this.arr,hm,hn,[]);return;},Reverse:function(){return this.arr.reverse();},Reverse1:function(hp,hq){return d.reverse(this.arr,hp,hq);},ToArray:function(){return this.arr.slice();},get_Count:function(){return d.length(this.arr);},get_Item:function(hr){return d.get(this.arr,hr);},set_Item:function(hs,ht){return d.set(this.arr,hs,ht);}},{New:function(hu){return $.New(this,C.New11(h.toArray(hu)));},New1:function(){return $.New(this,C.New11([]));},New11:function(hw){var hx;hx=$.New(this,{});hx.arr=hw;return hx;},New2:function(){return $.New(this,C.New11([]));}}),splice:function($arr,$index,$howMany,$items){var $0=this,$this=this;return $$.Array.prototype.splice.apply($arr,[$index,$howMany].concat($items));}},SetModule:{Filter:function(hy,hz){var hA;hA=h.toArray(h.filter(hy,hz));return s.New1(b.Build(hA,0,hA.length-1));},FoldBack:function(hB,hC,hD){return h.fold(function(hE){return function(hF){return(hB(hF))(hE);};},hD,b.Enumerate(true,hC.get_Tree()));},Partition:function(hG,hH){var hI,hJ,hK;hI=d.partition(hG,h.toArray(hH));hJ=hI[1];hK=hI[0];return[s.New1(b.OfSeq(hK)),s.New1(b.OfSeq(hJ))];}},SetUtil:{ofSeq:function(hL){var hM;hM=h.toArray(hL);d.sortInPlace(hM);return b.Build(hM,0,hM.length-1);}}}}});$.OnInit(function(){a=$.Safe($$.WebSharper.Collections);b=$.Safe(a.BalancedTree);c=$.Safe($$.WebSharper.Operators);d=$.Safe($$.WebSharper.Arrays);e=$.Safe($$.Seq);f=$.Safe($$.WebSharper.List);g=$.Safe(f.T);h=$.Safe($$.WebSharper.Seq);i=$.Safe($$.WebSharper.JavaScript);j=$.Safe(i.JSModule);k=$.Safe($$.WebSharper.Enumerator);l=$.Safe(a.DictionaryUtil);m=$.Safe(a.Dictionary);n=$.Safe($$.WebSharper.Unchecked);o=$.Safe(a.FSharpMap);p=$.Safe(a.Pair);q=$.Safe($$.WebSharper.Option);r=$.Safe(a.MapUtil);s=$.Safe(a.FSharpSet);t=$.Safe(a.SetModule);u=$.Safe(a.SetUtil);v=$.Safe($$.Array);w=$.Safe(a.HashSetUtil);x=$.Safe(a.HashSetProxy);y=$.Safe(a.LinkedList);z=$.Safe(y.E);A=$.Safe(y.T);B=$.Safe(a.ResizeArray);return C=$.Safe(B.ResizeArrayProxy);});$.OnLoad(function(){return;});}());

/*! H5F
* https://github.com/ryanseddon/H5F/
* Copyright (c) Ryan Seddon | Licensed MIT */
(function (e, t) { "function" == typeof define && define.amd ? define(t) : "object" == typeof module && module.exports ? module.exports = t() : e.H5F = t() })(this, function () { var e, t, a, i, n, r, l, s, o, u, d, c, v, p, f, m, b, h, g, y, w, C, N, A, E, $, x = document, k = x.createElement("input"), q = /^[a-zA-Z0-9.!#$%&'*+-\/=?\^_`{|}~-]+@[a-zA-Z0-9-]+(?:\.[a-zA-Z0-9-]+)*$/, M = /[a-z][\-\.+a-z]*:\/\//i, L = /^(input|select|textarea)$/i; return r = function (e, t) { var a = !e.nodeType || !1, i = { validClass: "valid", invalidClass: "error", requiredClass: "required", placeholderClass: "placeholder", onSubmit: Function.prototype, onInvalid: Function.prototype }; if ("object" == typeof t) for (var r in i) t[r] === void 0 && (t[r] = i[r]); if (n = t || i, a) for (var s = 0, o = e.length; o > s; s++) l(e[s]); else l(e) }, l = function (a) { var i, r = a.elements, l = r.length, c = !!a.attributes.novalidate; if (g(a, "invalid", o, !0), g(a, "blur", o, !0), g(a, "input", o, !0), g(a, "keyup", o, !0), g(a, "focus", o, !0), g(a, "change", o, !0), g(a, "click", u, !0), g(a, "submit", function (i) { return e = !0, t || c || a.checkValidity() ? (n.onSubmit.call(a, i), void 0) : (w(i), void 0) }, !1), !v()) for (a.checkValidity = function () { return d(a) }; l--;) i = !!r[l].attributes.required, "fieldset" !== r[l].nodeName.toLowerCase() && s(r[l]) }, s = function (e) { var t = e, a = h(t), n = { type: t.getAttribute("type"), pattern: t.getAttribute("pattern"), placeholder: t.getAttribute("placeholder") }, r = /^(email|url)$/i, l = /^(input|keyup)$/i, s = r.test(n.type) ? n.type : n.pattern ? n.pattern : !1, o = p(t, s), u = m(t, "step"), v = m(t, "min"), b = m(t, "max"), g = !("" === t.validationMessage || void 0 === t.validationMessage); t.checkValidity = function () { return d.call(this, t) }, t.setCustomValidity = function (e) { c.call(t, e) }, t.validity = { valueMissing: a, patternMismatch: o, rangeUnderflow: v, rangeOverflow: b, stepMismatch: u, customError: g, valid: !(a || o || u || v || b || g) }, n.placeholder && !l.test(i) && f(t) }, o = function (e) { var t = C(e) || e, a = /^(input|keyup|focusin|focus|change)$/i, r = /^(submit|image|button|reset)$/i, l = /^(checkbox|radio)$/i, u = !0; !L.test(t.nodeName) || r.test(t.type) || r.test(t.nodeName) || (i = e.type, v() || s(t), t.validity.valid && ("" !== t.value || l.test(t.type)) || t.value !== t.getAttribute("placeholder") && t.validity.valid ? (A(t, [n.invalidClass, n.requiredClass]), N(t, n.validClass)) : a.test(i) ? t.validity.valueMissing && A(t, [n.requiredClass, n.invalidClass, n.validClass]) : t.validity.valueMissing ? (A(t, [n.invalidClass, n.validClass]), N(t, n.requiredClass)) : t.validity.valid || (A(t, [n.validClass, n.requiredClass]), N(t, n.invalidClass)), "input" === i && u && (y(t.form, "keyup", o, !0), u = !1)) }, d = function (t) { var a, i, r, l, s, u = !1; if ("form" === t.nodeName.toLowerCase()) { a = t.elements; for (var d = 0, c = a.length; c > d; d++) i = a[d], r = !!i.attributes.disabled, l = !!i.attributes.required, s = !!i.attributes.pattern, "fieldset" !== i.nodeName.toLowerCase() && !r && (l || s && l) && (o(i), i.validity.valid || u || (e && i.focus(), u = !0, n.onInvalid.call(t, i))); return !u } return o(t), t.validity.valid }, c = function (e) { var t = this; t.validationMessage = e }, u = function (e) { var a = C(e); a.attributes.formnovalidate && "submit" === a.type && (t = !0) }, v = function () { return E(k, "validity") && E(k, "checkValidity") }, p = function (e, t) { if ("email" === t) return !q.test(e.value); if ("url" === t) return !M.test(e.value); if (t) { var i = e.getAttribute("placeholder"), n = e.value; return a = RegExp("^(?:" + t + ")$"), n === i ? !1 : "" === n ? !1 : !a.test(e.value) } return !1 }, f = function (e) { var t = { placeholder: e.getAttribute("placeholder") }, a = /^(focus|focusin|submit)$/i, r = /^(input|textarea)$/i, l = /^password$/i, s = !!("placeholder" in k); s || !r.test(e.nodeName) || l.test(e.type) || ("" !== e.value || a.test(i) ? e.value === t.placeholder && a.test(i) && (e.value = "", A(e, n.placeholderClass)) : (e.value = t.placeholder, g(e.form, "submit", function () { i = "submit", f(e) }, !0), N(e, n.placeholderClass))) }, m = function (e, t) { var a = parseInt(e.getAttribute("min"), 10) || 0, i = parseInt(e.getAttribute("max"), 10) || !1, n = parseInt(e.getAttribute("step"), 10) || 1, r = parseInt(e.value, 10), l = (r - a) % n; return h(e) || isNaN(r) ? "number" === e.getAttribute("type") ? !0 : !1 : "step" === t ? e.getAttribute("step") ? 0 !== l : !1 : "min" === t ? e.getAttribute("min") ? a > r : !1 : "max" === t ? e.getAttribute("max") ? r > i : !1 : void 0 }, b = function (e) { var t = !!e.attributes.required; return t ? h(e) : !1 }, h = function (e) { var t = e.getAttribute("placeholder"), a = /^(checkbox|radio)$/i, i = !!e.attributes.required; return !(!i || "" !== e.value && e.value !== t && (!a.test(e.type) || $(e))) }, g = function (e, t, a, i) { E(window, "addEventListener") ? e.addEventListener(t, a, i) : E(window, "attachEvent") && window.event !== void 0 && ("blur" === t ? t = "focusout" : "focus" === t && (t = "focusin"), e.attachEvent("on" + t, a)) }, y = function (e, t, a, i) { E(window, "removeEventListener") ? e.removeEventListener(t, a, i) : E(window, "detachEvent") && window.event !== void 0 && e.detachEvent("on" + t, a) }, w = function (e) { e = e || window.event, e.stopPropagation && e.preventDefault ? (e.stopPropagation(), e.preventDefault()) : (e.cancelBubble = !0, e.returnValue = !1) }, C = function (e) { return e = e || window.event, e.target || e.srcElement }, N = function (e, t) { var a; e.className ? (a = RegExp("(^|\\s)" + t + "(\\s|$)"), a.test(e.className) || (e.className += " " + t)) : e.className = t }, A = function (e, t) { var a, i, n = "object" == typeof t ? t.length : 1, r = n; if (e.className) if (e.className === t) e.className = ""; else for (; n--;) a = RegExp("(^|\\s)" + (r > 1 ? t[n] : t) + "(\\s|$)"), i = e.className.match(a), i && 3 === i.length && (e.className = e.className.replace(a, i[1] && i[2] ? " " : "")) }, E = function (e, t) { var a = typeof e[t], i = RegExp("^function|object$", "i"); return !!(i.test(a) && e[t] || "unknown" === a) }, $ = function (e) { for (var t = document.getElementsByName(e.name), a = 0; t.length > a; a++) if (t[a].checked) return !0; return !1 }, { setup: r } });;
(function(){var $$=this,$=this.IntelliFactory.Runtime,a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z,_0,_1,_2,_3,_4,_5,_6,_7,_8,_9,_,ba,bb,bc,bd,be,bf,bg,bh,bi,bj,bk,bl,bm,bn,bo,bp,bq,br,bs,bt,bu,bv,bw,bx;$.Define($$,{WebSharper:{UI:{Next:{Abbrev:{Async:{Schedule:function(by){return a.Start(a.Delay(function(){return a.Return(by(null));}),{$:0});},StartTo:function(bz,bA){return a.StartWithContinuations(bz,bA,function(){},function(){},{$:0});}},Dict:{ToKeyArray:function(bD){var bE;bE=b(bD.count);c.iteri(function(bF){return function(bG){return d.set(bE,bF,bG.K);};},bD);return bE;},ToValueArray:function(bH){var bI;bI=b(bH.count);c.iteri(function(bJ){return function(bK){return d.set(bI,bJ,bK.V);};},bH);return bI;}},Fresh:{Id:function(){var bL;bL=h.counter()+1;h.counter=function(){return bL;};return"uid"+$$.String(h.counter());},Int:function(){var bM;bM=h.counter()+1;h.counter=function(){return bM;};return h.counter();},counter:$.Field(function(){return 0;})},HashSet:{Except:function(bN,bO){var bP;bP=j.New(k.ToArray(bO));bP.ExceptWith(k.ToArray(bN));return bP;},Filter:function(bQ,bR){return j.New(d.filter(bQ,k.ToArray(bR)));},Intersect:function(bS,bT){var bU;bU=j.New(k.ToArray(bS));bU.IntersectWith(k.ToArray(bT));return bU;},ToArray:function(bV){var bW;bW=b(bV.get_Count());bV.CopyTo(bW);return bW;}},JQueue:{Add:function($x,$q){var $0=this,$this=this;return $q.push($x);},Count:function(bX){return bX.length;},Dequeue:function($q){var $0=this,$this=this;return $q.shift();},Iter:function(bY,bZ){return d.iter(bY,l.ToArray(bZ));},ToArray:function(b0){return b0.slice();}},Mailbox:{StartProcessor:function(b1){var b2,b3,b4;b2=[];b3=[false];b4=a.Delay(function(){return a.Combine(a.While(function(){return l.Count(b2)>0;},a.Delay(function(){return a.Bind(b1(l.Dequeue(b2)),function(){return a.Return(null);});})),a.Delay(function(){return a.Return(void(b3[0]=false));}));});return function(b_){l.Add(b_,b2);if(!b3[0]){b3[0]=true;return a.Start(b4,{$:0});}else{return null;}};}},Slot:$.Class({},{Create:function(b$,ca){return m.New(b$,ca);}}),Slot1:$.Class({Equals:function(cb){return n.Equals(this.key.call(null,this.value),this.key.call(null,cb.get_Value()));},GetHashCode:function(){return n.Hash(this.key.call(null,this.value));},get_Value:function(){return this.value;}},{New:function(cc,cd){var ce;ce=$.New(this,{});ce.key=cc;ce.value=cd;return ce;}}),U:function(){return;}},An:$.Class({},{Append:function(cf,cg){return $.New(o,{$:0,$0:p.Append(cf.$0,cg.$0)});},Concat:function(ch){return $.New(o,{$:0,$0:p.Concat(c.map(function(ci){return q.List(ci);},ch))});},Const:function(cj){return q.Const(cj);},Delayed:function(ck,cl,cm,cn,co,cp){return{Compute:function(cq){return cq<=cn?co:ck.Interpolate(cl.TransformTime.call(null,(cq-cn)/cm),co,cp);},Duration:cm+cn};},Map:function(cr,cs){var ct;ct=cs.Compute;return q.Def(cs.Duration,function(cu){return cr(ct(cu));});},Pack:function(cv){return $.New(o,{$:0,$0:p.Single({$:1,$0:cv})});},Play:function(cw){return a.Delay(function(){return a.Bind(o.Run(function(){},q.Actions(cw)),function(){return a.Return(q.Finalize(cw));});});},Run:function(cA,cB){var cC;cC=cB.Duration;return a.FromContinuations(function(cD){var cE,cF;cE=cD[0];cF=function(cG,cH){var cI;cI=cH-cG;cA(cB.Compute.call(null,cI));return cI<=cC?void r(function(cJ){return cF(cG,cJ);}):cE(null);};r(function(cK){return cF(cK,cK);});return;});},Simple:function(cL,cM,cN,cO,cP){return{Compute:function(cQ){return cL.Interpolate(cM.TransformTime.call(null,cQ/cN),cO,cP);},Duration:cN};},WhenDone:function(cR,cS){return o.Append($.New(o,{$:0,$0:p.Single({$:0,$0:cR})}),cS);},get_Empty:function(){return $.New(o,{$:0,$0:p.Empty()});}}),Anims:{Actions:function(cT){return q.ConcatActions(d.choose(function(cU){return cU.$==1?{$:1,$0:cU.$0}:{$:0};},p.ToArray(cT.$0)));},ConcatActions:function(cV){var cW,cX,cY,c0;cW=c.toArray(cV);cX=d.length(cW);if(cX===0){return q.Const(null);}else{if(cX===1){return d.get(cW,0);}else{cY=c.max(c.map(function(cZ){return cZ.Duration;},cW));c0=d.map(function(c1){return q.Prolong(cY,c1);},cW);return q.Def(cY,function(c2){return d.iter(function(c3){return c3.Compute.call(null,c2);},c0);});}}},Const:function(c4){return q.Def(0,function(){return c4;});},Def:function(c6,c7){return{Compute:c7,Duration:c6};},Finalize:function(c8){return d.iter(function(c9){return c9.$==0?c9.$0.call(null,null):null;},p.ToArray(c8.$0));},List:function(c_){return c_.$0;},Prolong:function(c$,da){var db,dc,dd;db=da.Compute;dc=da.Duration;dd=s.Create(function(){return da.Compute.call(null,da.Duration);});return{Compute:function(df){return df>=dc?dd.eval():db(df);},Duration:c$};}},AppendList1:{Append:function(dg,dh){var di;di=[dg,dh];return di[0].$==0?di[1]:di[1].$==0?di[0]:{$:2,$0:dg,$1:dh};},Concat:function(dj){var dk;dk=c.toArray(dj);return t.MapReduce(function(dl){return dl;},p.Empty(),function(dm){return function(dn){return p.Append(dm,dn);};},dk);},Empty:function(){return{$:0};},FromArray:function(_do){var dp;dp=_do.length;return dp===0?{$:0}:dp===1?{$:1,$0:d.get(_do,0)}:{$:3,$0:_do.slice()};},Single:function(dq){return{$:1,$0:dq};},ToArray:function(dr){var ds,dt;ds=[];dt=function(du){var dv;if(du.$==1){return l.Add(du.$0,ds);}else{if(du.$==2){dv=du.$1;dt(du.$0);return dt(dv);}else{return du.$==3?d.iter(function(dw){return l.Add(dw,ds);},du.$0):null;}}};dt(dr);return l.ToArray(ds);}},Array:{MapReduce:function(dx,dy,dz,dA){var dB;dB=function(dC,dD){var dE,dF,dG,dH,dI,dJ;if(dD<=0){return dy;}else{if(dD===1){if(dC>=0?dC<d.length(dA):false){return dx(d.get(dA,dC));}else{dE=dD/2>>0;dF=dB(dC,dE);dG=dB(dC+dE,dD-dE);return(dz(dF))(dG);}}else{dH=dD/2>>0;dI=dB(dC,dH);dJ=dB(dC+dH,dD-dH);return(dz(dI))(dJ);}}};return dB(0,d.length(dA));}},Client:{AnimatedAttrNode:$.Class({GetChangeAnim:function(dK){var dL,dN=this;dL=[this.visible,this.logical];return o.WhenDone(function(){return dN.sync(dK);},dL[0].$==1?dL[1].$==1?dN.dirty?o.Pack(o.Map(function(dO){return dN.pushVisible(dK,dO);},u.AnimateChange(dN.tr,dL[0].$0,dL[1].$0))):o.get_Empty():o.get_Empty():o.get_Empty());},GetEnterAnim:function(dP){var dQ,dS=this;dQ=[this.visible,this.logical];return o.WhenDone(function(){return dS.sync(dP);},dQ[0].$==1?dQ[1].$==1?dS.dirty?o.Pack(o.Map(function(dT){return dS.pushVisible(dP,dT);},u.AnimateChange(dS.tr,dQ[0].$0,dQ[1].$0))):dQ[0].$==0?dQ[1].$==1?o.Pack(o.Map(function(dU){return dS.pushVisible(dP,dU);},u.AnimateEnter(dS.tr,dQ[1].$0))):o.get_Empty():o.get_Empty():dQ[0].$==0?dQ[1].$==1?o.Pack(o.Map(function(dV){return dS.pushVisible(dP,dV);},u.AnimateEnter(dS.tr,dQ[1].$0))):o.get_Empty():o.get_Empty():dQ[0].$==0?dQ[1].$==1?o.Pack(o.Map(function(dW){return dS.pushVisible(dP,dW);},u.AnimateEnter(dS.tr,dQ[1].$0))):o.get_Empty():o.get_Empty());},GetExitAnim:function(dX){var dY,d0=this;dY=this.visible;return o.WhenDone(function(){d0.dirty=true;d0.visible={$:0};return;},dY.$==1?o.Pack(o.Map(function(d1){return d0.pushVisible(dX,d1);},u.AnimateExit(d0.tr,dY.$0))):o.get_Empty());},Init:function(){return null;},Sync:function(){return null;},get_Changed:function(){return this.updates;},pushVisible:function(d4,d5){this.visible={$:1,$0:d5};this.dirty=true;return(this.push.call(null,d4))(d5);},sync:function(d6){if(this.dirty){v.iter(this.push.call(null,d6),this.logical);this.visible=this.logical;this.dirty=false;return;}else{return null;}}},{New:function(d7,d8,d9){var d_;d_=$.New(this,{});d_.tr=d7;d_.push=d9;d_.logical={$:0};d_.visible={$:0};d_.dirty=true;d_.updates=w.Map(function(d$){d_.logical={$:1,$0:d$};d_.dirty=true;return;},d8);return d_;}}),Attr:{Animated:function(ea,eb,ec,ed){return y.Animated(eb,ec,function(ee){return function(ef){return z.SetAttr(ee,ea,ed(ef));};});},AnimatedStyle:function(eg,eh,ei,ej){return y.Animated(eh,ei,function(ek){return function(el){return z.SetStyle(ek,eg,ej(el));};});},Class:function(em){return y.Static(function(en){return z.AddClass(en,em);});},ContentEditableHtml:function(eo){var ep;ep=A.CustomVar(eo,function(eq){return function(er){eq.innerHTML=er;};},function(es){return{$:1,$0:es.innerHTML};});return B.Append(B.Create("contenteditable","true"),ep);},ContentEditableText:function(et){var eu;eu=A.CustomVar(et,function(ev){return function(ew){ev.textContent=ew;};},function(ex){return{$:1,$0:ex.textContent};});return B.Append(B.Create("contenteditable","true"),eu);},CustomValue:function(ey,ez,eA){return A.CustomVar(ey,function(eB){return function(eC){eB.value=ez(eC);};},function(eD){return eA(eD.value);});},CustomVar:function(eE,eF,eG){var eH,eM;eH=function(eI){return function(){return eE.UpdateMaybe(function(eK){var eL;eL=eG(eI);return eL.$==1?!n.Equals(eL.$0,eK)?eL:{$:0}:{$:0};});};};eM=function(eN){return function(eO){var eP;eP=eG(eN);return eP.$==1?n.Equals(eP.$0,eO)?null:(eF(eN))(eO):(eF(eN))(eO);};};return B.Concat(C.ofArray([A.Handler("change",eH),A.Handler("input",eH),A.Handler("keyup",eH),A.DynamicCustom(eM,eE.get_View())]));},Dynamic:function(eQ,eR){return y.Dynamic(eR,function(){},function(eT){return function(eU){return z.SetAttr(eT,eQ,eU);};});},DynamicClass:function(eV,eW,eX){return y.Dynamic(eW,function(){},function(eZ){return function(e0){return eX(e0)?z.AddClass(eZ,eV):z.RemoveClass(eZ,eV);};});},DynamicCustom:function(e1,e2){return y.Dynamic(e2,function(){},e1);},DynamicPred:function(e4,e5,e6){var e7;e7=function(e8){return function(e9){var e_;e_=e9[1];return e9[0]?z.SetAttr(e8,e4,e_):z.RemoveAttr(e8,e4);};};return y.Dynamic(w.Map2(function(e$){return function(fa){return[e$,fa];};},e5,e6),function(){},e7);},DynamicProp:function(fc,fd){return y.Dynamic(fd,function(){},function(ff){return function(fg){ff[fc]=fg;};});},DynamicStyle:function(fh,fi){return y.Dynamic(fi,function(){},function(fk){return function(fl){return z.SetStyle(fk,fh,fl);};});},Handler:function(fm,fn){return y.Static(function(fo){return fo.addEventListener(fm,fn(fo),false);});},HandlerView:function(fp,fq,fr){var fs;fs=h.Id();return y.Dynamic(fq,function(ft){var fu;fu=fr(ft);return ft.addEventListener(fp,function(fv){return(fu(fv))(ft[fs]);},false);},function(fw){return function(fx){fw[fs]=fx;};});},OnAfterRender:function(fy){return y.Mk(0,{$:4,$0:fy});},Style:function(fz,fA){return y.Static(function(fB){return z.SetStyle(fB,fz,fA);});},ValidateForm:$.Field(function(){return A.OnAfterRender(function(fC){return $$.H5F?$$.H5F.setup(fC):undefined;});}),Value:function(fD){return A.CustomValue(fD,function(fE){return fE;},function(fF){return{$:1,$0:fF};});}},AttrProxy:$.Class({},{Append:function(fG,fH){return y.Mk(fG.Flags|fH.Flags,y.AppendTree(fG.Tree,fH.Tree));},Concat:function(fI){var fJ;fJ=c.toArray(fI);return t.MapReduce(function(fK){return fK;},B.get_Empty(),function(fL){return function(fM){return B.Append(fL,fM);};},fJ);},Create:function(fN,fO){return y.Static(function(fP){return z.SetAttr(fP,fN,fO);});},Handler:function(fQ,fR){return y.Static(function(fS){return fS.addEventListener(fQ,fR(fS),false);});},get_Empty:function(){return y.EmptyAttr();}}),Attrs:{Animated:function(fT,fU,fV){var fW,fX;fW=D.New(fT,fU,fV);fX=4;if(u.CanAnimateEnter(fT)){fX=fX|1;}if(u.CanAnimateExit(fT)){fX=fX|2;}return y.Mk(fX,{$:1,$0:fW});},AppendTree:function(fY,fZ){var f0;f0=[fY,fZ];return f0[0].$==0?f0[1]:f0[1].$==0?f0[0]:{$:2,$0:fY,$1:fZ};},Dynamic:function(f1,f2,f3){return y.Mk(0,{$:1,$0:E.New(f1,f2,f3)});},EmptyAttr:$.Field(function(){return y.Mk(0,{$:0});}),GetAnim:function(f4,f5){return o.Concat(d.map(function(f6){return(f5(f6))(f4.DynElem);},f4.DynNodes));},GetChangeAnim:function(f7){return y.GetAnim(f7,function(f8){return function(f9){return f8.GetChangeAnim(f9);};});},GetEnterAnim:function(f_){return y.GetAnim(f_,function(f$){return function(ga){return f$.GetEnterAnim(ga);};});},GetExitAnim:function(gb){return y.GetAnim(gb,function(gc){return function(gd){return gc.GetExitAnim(gd);};});},HasChangeAnim:function(ge){return(ge.DynFlags&4)!==0;},HasEnterAnim:function(gf){return(gf.DynFlags&1)!==0;},HasExitAnim:function(gg){return(gg.DynFlags&2)!==0;},Insert:function(gh,gi){var gj,gk,gl;gj=[];gk=[];gl=function(gm){var gn,go;if(gm.$==1){gn=gm.$0;gn.Init(gh);return l.Add(gn,gj);}else{if(gm.$==2){go=gm.$1;gl(gm.$0);return gl(go);}else{return gm.$==3?gm.$0.call(null,gh):gm.$==4?l.Add(gm.$0,gk):null;}}};gl(gi.Tree);return $.DeleteEmptyFields({DynElem:gh,DynFlags:gi.Flags,DynNodes:l.ToArray(gj),OnAfterRender:(l.Count(gk)===0?{$:0}:{$:1,$0:function(gp){return l.Iter(function(gq){return gq(gp);},gk);}}).$0},["OnAfterRender"]);},Mk:function(gr,gs){return $.New(B,{Flags:gr,Tree:gs});},Static:function(gt){return y.Mk(0,{$:3,$0:gt});},Sync:function(gu,gv){return d.iter(function(gw){return gw.Sync(gu);},gv.DynNodes);},Updates:function(gx){var gy,gD;gy=function(gz){return function(gA){return w.Map2(function(){return function(){return null;};},gz,gA);};};gD=gx.DynNodes;return t.MapReduce(function(gE){return gE.get_Changed();},F.Const(null),gy,gD);}},CheckedInput:$.Class({get_Input:function(){return this.$==1?this.$0:this.$==2?this.$0:this.$1;}}),Doc:$.Class({ReplaceInDom:function(gF){var gG,gH,gI,gJ,gK,gM=this;gG=G.createTextNode("");gH=G.createTextNode("");gI=gF.parentNode;gI.replaceChild(gH,gF);gI.insertBefore(gG,gH);H.LinkPrevElement(gH,this.docNode);gJ=H.CreateDelimitedRunState(gG,gH,this.docNode);gK=this.updates;return F.Sink(I.StartProcessor(function(){return H.PerformAnimatedUpdate(gJ,gM.docNode);}),gK);},get_DocNode:function(){return this.docNode;},get_ToDynDoc:function(){return;},get_Updates:function(){return this.updates;}},{Append:function(gN,gO){var gP;gP=w.Map2(function(){return function(){return null;};},gN.get_Updates(),gO.get_Updates());return J.Mk({$:0,$0:gN.get_DocNode(),$1:gO.get_DocNode()},gP);},AsPagelet:function(gS){return K.New(gS);},BindView:function(gT,gU){return J.EmbedView(w.Map(gT,gU));},Button:function(gV,gW,gX){var gY;gY=B.Concat(gW);return L.New(J.Clickable("button",gX),gY,J.TextNode(gV));},ButtonView:function(gZ,g0,g1,g2){var g3;g3=B.Concat(c.append([A.HandlerView("click",g1,function(){return function(){return g2;};})],g0));return L.New(z.CreateElement("button"),g3,J.TextNode(gZ));},CheckBox:function(g6,g7){var g8;g8=z.CreateElement("input");g8.addEventListener("click",function(){return g7.Set(g8.checked);},false);return L.New(g8,B.Concat(c.toList(c.delay(function(){return c.append(g6,c.delay(function(){return c.append([B.Create("type","checkbox")],c.delay(function(){return[A.DynamicProp("checked",g7.get_View())];}));}));}))),J.get_Empty());},CheckBoxGroup:function(hb,hc,hd){var he,hf,hh,hj,hk;he=hd.get_View();hf=function(hg){return n.Equals(hg,hc);};hh=w.Map(function(hi){return c.exists(hf,hi);},he);hj=B.Concat(C.append(C.ofArray([B.Create("type","checkbox"),B.Create("name",hd.get_Id()),B.Create("value",h.Id()),A.DynamicProp("checked",hh)]),C.ofSeq(hb)));hk=z.CreateElement("input");hk.addEventListener("click",function(){var hm;hm=hk.checked;return hd.Update(function(hn){return c.toList(M.distinct(hm?C.append(hn,C.ofArray([hc])):C.filter(function(ho){return!n.Equals(ho,hc);},hn)));});},false);return L.New(hk,hj,J.get_Empty());},Clickable:function(hp,hq){var hr;hr=z.CreateElement(hp);hr.addEventListener("click",function(hs){hs.preventDefault();return hq(null);},false);return hr;},Concat:function(ht){var hu;hu=c.toArray(ht);return t.MapReduce(function(hv){return hv;},J.get_Empty(),function(hw){return function(hx){return J.Append(hw,hx);};},hu);},Convert:function(hy,hz){return J.Flatten(w.Convert(hy,hz));},ConvertBy:function(hA,hB,hC){return J.Flatten(w.ConvertBy(hA,hB,hC));},ConvertSeq:function(hD,hE){return J.Flatten(w.ConvertSeq(hD,hE));},ConvertSeqBy:function(hF,hG,hH){return J.Flatten(w.ConvertSeqBy(hF,hG,hH));},Element:function(hI,hJ,hK){var hL,hM;hL=B.Concat(hJ);hM=J.Concat(hK);return L.New(z.CreateElement(hI),hL,hM);},EmbedView:function(hN){var hO,hP;hO=H.CreateEmbedNode();hP=w.Map(function(){},F.Bind(function(hR){H.UpdateEmbedNode(hO,hR.get_DocNode());return hR.get_Updates();},hN));return J.Mk({$:2,$0:hO},hP);},Flatten:function(hS){return J.EmbedView(w.Map(function(hT){return J.Concat(hT);},hS));},FloatInput:function(hU,hV){return J.InputInternal("input",function(hW){return c.append(hU,[A.CustomValue(hV,function(hX){return hX.get_Input();},function(hY){var hZ,h0;if(N.isBlank(hY)){hZ=(hW.checkValidity?hW.checkValidity():true)?$.New(O,{$:2,$0:hY}):$.New(O,{$:1,$0:hY});}else{h0=+hY;hZ=$$.isNaN(h0)?$.New(O,{$:1,$0:hY}):$.New(O,{$:0,$0:h0,$1:hY});}return{$:1,$0:hZ};}),B.Create("type","number")]);});},FloatInputUnchecked:function(h1,h2){var h3;h3=function(h4){var h5;if(N.isBlank(h4)){return{$:1,$0:0};}else{h5=+h4;return $$.isNaN(h5)?{$:0}:{$:1,$0:h5};}};return J.InputInternal("input",function(){return c.append(h1,[h2.Get()===0?B.Create("value","0"):B.get_Empty(),A.CustomValue(h2,function(h7){return $$.String(h7);},h3),B.Create("type","number")]);});},Input:function(h8,h9){return J.InputInternal("input",function(){return c.append(h8,[A.Value(h9)]);});},InputArea:function(h$,ia){return J.InputInternal("textarea",function(){return c.append(h$,[A.Value(ia)]);});},InputInternal:function(ic,id){var ie;ie=z.CreateElement(ic);return L.New(ie,B.Concat(id(ie)),J.get_Empty());},IntInput:function(_if,ig){return J.InputInternal("input",function(ih){return c.append(_if,[A.CustomValue(ig,function(ii){return ii.get_Input();},function(ij){var ik,il;if(N.isBlank(ij)){ik=(ih.checkValidity?ih.checkValidity():true)?$.New(O,{$:2,$0:ij}):$.New(O,{$:1,$0:ij});}else{il=+ij;ik=$$.isNaN(il)?$.New(O,{$:1,$0:ij}):$.New(O,{$:0,$0:il,$1:ij});}return{$:1,$0:ik};}),B.Create("type","number"),B.Create("step","1")]);});},IntInputUnchecked:function(im,_in){var io;io=function(ip){var iq;if(N.isBlank(ip)){return{$:1,$0:0};}else{iq=+ip;return iq!==iq>>0?{$:0}:{$:1,$0:iq};}};return J.InputInternal("input",function(){return c.append(im,[_in.Get()===0?B.Create("value","0"):B.get_Empty(),A.CustomValue(_in,function(is){return $$.String(is);},io),B.Create("type","number"),B.Create("step","1")]);});},Link:function(it,iu,iv){var iw,ix;iw=B.Concat(iu);ix=B.Append(B.Create("href","#"),iw);return L.New(J.Clickable("a",iv),ix,J.TextNode(it));},LinkView:function(iy,iz,iA,iB){var iC;iC=B.Concat(c.append([A.HandlerView("click",iA,function(){return function(){return iB;};}),B.Create("href","#")],iz));return L.New(z.CreateElement("a"),iC,J.TextNode(iy));},Mk:function(iF,iG){return J.New(iF,iG);},New:function(iH,iI){var iJ;iJ=$.New(this,{});iJ.docNode=iH;iJ.updates=iI;return iJ;},PasswordBox:function(iK,iL){return J.InputInternal("input",function(){return c.append(iK,[A.Value(iL),B.Create("type","password")]);});},Radio:function(iN,iO,iP){var iQ,iS,iU;iQ=z.CreateElement("input");iQ.addEventListener("click",function(){return iP.Set(iO);},false);iS=A.DynamicProp("checked",w.Map(function(iT){return n.Equals(iT,iO);},iP.get_View()));iU=function(iV,iW){return B.Create(iV,iW);};return L.New(iQ,B.Concat(C.append(C.ofArray([iU("type","radio"),iU("name",iP.get_Id()),iS]),C.ofSeq(iN))),J.get_Empty());},Run:function(iX,iY){var iZ,i0;iZ=iY.get_DocNode();H.LinkElement(iX,iZ);i0=H.CreateRunState(iX,iZ);return F.Sink(I.StartProcessor(function(){return H.PerformAnimatedUpdate(i0,iZ);}),iY.get_Updates());},RunById:function(i2,i3){var i4;i4=z.Doc().getElementById(i2);return n.Equals(i4,null)?P.FailWith("invalid id: "+i2):J.Run(i4,i3);},Select:function(i5,i6,i7,i8){return J.SelectDyn(i5,i6,F.Const(i7),i8);},SelectDyn:function(i9,i_,i$,ja){var jb,jc,jg,jh,ji,jm;jb=[$.New(Q,{$:0})];jc=function(jd){return function(je){jd.selectedIndex=c.findIndex(function(jf){return n.Equals(je,jf);},jb[0]);};};jg=z.CreateElement("select");jh=ja.get_View();ji=A.DynamicCustom(jc,jh);jg.addEventListener("change",function(){return ja.UpdateMaybe(function(jk){var jl;jl=jb[0].get_Item(jg.selectedIndex);return n.Equals(jk,jl)?{$:0}:{$:1,$0:jl};});},false);jm=J.Convert(function(jn){var jo,jp;jo=jn[0];jp=J.TextNode(i_(jn[1]));return J.Element("option",C.ofArray([B.Create("value",$$.String(jo))]),C.ofArray([jp]));},w.Map(function(jq){jb[0]=jq;return c.mapi(function(jr){return function(js){return[jr,js];};},jq);},i$));return L.New(jg,B.Append(ji,B.Concat(i9)),jm);},SelectDynOptional:function(jt,ju,jv,jw,jx){return J.SelectDyn(jt,function(jy){return jy.$==1?jv(jy.$0):ju;},w.Map(function(jz){return $.New(Q,{$:1,$0:{$:0},$1:C.map(function(jA){return{$:1,$0:jA};},jz)});},jw),jx);},SelectOptional:function(jB,jC,jD,jE,jF){return J.Select(jB,function(jG){return jG.$==1?jD(jG.$0):jC;},$.New(Q,{$:1,$0:{$:0},$1:C.map(function(jH){return{$:1,$0:jH};},jE)}),jF);},Static:function(jI){return L.New(jI,B.get_Empty(),J.get_Empty());},SvgElement:function(jJ,jK,jL){var jM,jN;jM=B.Concat(jK);jN=J.Concat(jL);return L.New(z.CreateSvgElement(jJ),jM,jN);},TextNode:function(jO){return J.Mk({$:5,$0:z.CreateText(jO)},F.Const(null));},TextView:function(jP){var jQ,jR;jQ=H.CreateTextNode();jR=w.Map(function(jS){return H.UpdateTextNode(jQ,jS);},jP);return J.Mk({$:4,$0:jQ},jR);},Verbatim:function(jT){var jU,jV,jW;jU=R.parseHTML(jT);jV=n.Equals(jU,null)?[]:jU;jW=function(jX){return function(jY){return{$:0,$0:jX,$1:jY};};};return J.Mk(t.MapReduce(function(jZ){return{$:1,$0:H.CreateElemNode(jZ,B.get_Empty(),{$:3})};},{$:3},jW,jV),F.Const(null));},get_Empty:function(){return J.Mk({$:3},F.Const(null));}}),DocElemNode:$.Class({Equals:function(j0){return this.ElKey===j0.ElKey;},GetHashCode:function(){return this.ElKey;}}),Docs:{ComputeChangeAnim:function(j1,j2){var j3,j5;j3=function(j4){return y.HasChangeAnim(j4.Attr);};j5=function(j6){return S.Filter(j3,j6);};return o.Concat(d.map(function(j7){return y.GetChangeAnim(j7.Attr);},S.ToArray(S.Intersect(j5(j1.PreviousNodes),j5(j2)))));},ComputeEnterAnim:function(j8,j9){return o.Concat(d.map(function(j_){return y.GetEnterAnim(j_.Attr);},S.ToArray(S.Except(j8.PreviousNodes,S.Filter(function(j$){return y.HasEnterAnim(j$.Attr);},j9)))));},ComputeExitAnim:function(ka,kb){return o.Concat(d.map(function(kc){return y.GetExitAnim(kc.Attr);},S.ToArray(S.Except(kb,S.Filter(function(kd){return y.HasExitAnim(kd.Attr);},ka.PreviousNodes)))));},CreateDelimitedElemNode:function(ke,kf,kg,kh){var ki,kj;ki=ke.parentNode;H.LinkPrevElement(kf,kh);kj=y.Insert(ki,kg);return $.New(T,$.DeleteEmptyFields({Attr:kj,Children:kh,Delimiters:[ke,kf],El:ki,ElKey:h.Int(),Render:$.GetOptional(kj.OnAfterRender).$0},["Render"]));},CreateDelimitedRunState:function(kk,kl,km){return{PreviousNodes:S.get_Empty(),Top:H.CreateDelimitedElemNode(kk,kl,B.get_Empty(),km)};},CreateElemNode:function(kn,ko,kp){var kq;H.LinkElement(kn,kp);kq=y.Insert(kn,ko);return $.New(T,$.DeleteEmptyFields({Attr:kq,Children:kp,El:kn,ElKey:h.Int(),Render:$.GetOptional(kq.OnAfterRender).$0},["Render"]));},CreateEmbedNode:function(){return{Current:{$:3},Dirty:false};},CreateRunState:function(kr,ks){return{PreviousNodes:S.get_Empty(),Top:H.CreateElemNode(kr,B.get_Empty(),ks)};},CreateTextNode:function(){return{Text:z.CreateText(""),Dirty:false,Value:""};},DoSyncElement:function(kt){var ku,kv,kz,kB;ku=kt.El;kv=function(kw,kx){var ky;if(kw.$==1){return{$:1,$0:kw.$0.El};}else{if(kw.$==2){ky=kw.$0;if(ky.Dirty){ky.Dirty=false;return H.InsertDoc(ku,ky.Current,kx);}else{return kv(ky.Current,kx);}}else{return kw.$==3?kx:kw.$==4?{$:1,$0:kw.$0.Text}:kw.$==5?{$:1,$0:kw.$0}:kv(kw.$0,kv(kw.$1,kx));}}};kz=kt.El;U.Iter(function(kA){return z.RemoveNode(kz,kA);},U.Except(U.DocChildren(kt),U.Children(kt.El,$.GetOptional(kt.Delimiters))));kB=$.GetOptional(kt.Delimiters);kv(kt.Children,kB.$==1?{$:1,$0:kB.$0[1]}:{$:0});return;},DomNodes:$.Class({},{Children:function(kC,kD){var kE,kF,kG,kH,kI;if(kD.$==1){kE=kD.$0[1];kF=kD.$0[0];kG=b.prototype.constructor.apply(b,[]);kH=kF.nextSibling;while(kH!==kE){kG.push(kH);kH=kH.nextSibling;}return $.New(U,{$:0,$0:kG});}else{kI=kC.childNodes;return $.New(U,{$:0,$0:d.init(kC.childNodes.length,function(kJ){return kI[kJ];})});}},DocChildren:function(kK){var kL,kM;kL=[];kM=function(kN){var kO;if(kN.$==2){return kM(kN.$0.Current);}else{if(kN.$==1){return l.Add(kN.$0.El,kL);}else{if(kN.$==3){return null;}else{if(kN.$==5){return null;}else{if(kN.$==4){return l.Add(kN.$0.Text,kL);}else{kO=kN.$1;kM(kN.$0);return kM(kO);}}}}}};kM(kK.Children);return $.New(U,{$:0,$0:l.ToArray(kL)});},Except:function(kP,kQ){var kR;kR=kP.$0;return $.New(U,{$:0,$0:d.filter(function(kS){return c.forall(function(kT){return!(kS===kT);},kR);},kQ.$0)});},FoldBack:function(kU,kV,kW){return d.foldBack(kU,kV.$0,kW);},Iter:function(kX,kY){return d.iter(kX,kY.$0);}}),InsertDoc:function(kZ,k0,k1){var k2;if(k0.$==1){return H.InsertNode(kZ,k0.$0.El,k1);}else{if(k0.$==2){k2=k0.$0;k2.Dirty=false;return H.InsertDoc(kZ,k2.Current,k1);}else{return k0.$==3?k1:k0.$==4?H.InsertNode(kZ,k0.$0.Text,k1):k0.$==5?H.InsertNode(kZ,k0.$0,k1):H.InsertDoc(kZ,k0.$0,H.InsertDoc(kZ,k0.$1,k1));}}},InsertNode:function(k3,k4,k5){z.InsertAt(k3,k5,k4);return{$:1,$0:k4};},LinkElement:function(k6,k7){H.InsertDoc(k6,k7,{$:0});},LinkPrevElement:function(k8,k9){H.InsertDoc(k8.parentNode,k9,{$:1,$0:k8});},NodeSet:$.Class({},{Except:function(k_,k$){return $.New(S,{$:0,$0:k.Except(k_.$0,k$.$0)});},Filter:function(la,lb){return $.New(S,{$:0,$0:k.Filter(la,lb.$0)});},FindAll:function(lc){var ld,le;ld=[];le=function(lf){var lg,lh;if(lf.$==0){lg=lf.$1;le(lf.$0);return le(lg);}else{if(lf.$==1){lh=lf.$0;l.Add(lh,ld);return le(lh.Children);}else{return lf.$==2?le(lf.$0.Current):null;}}};le(lc);return $.New(S,{$:0,$0:j.New(l.ToArray(ld))});},Intersect:function(li,lj){return $.New(S,{$:0,$0:k.Intersect(li.$0,lj.$0)});},IsEmpty:function(lk){return lk.$0.get_Count()===0;},ToArray:function(ll){return k.ToArray(ll.$0);},get_Empty:function(){return $.New(S,{$:0,$0:j.New11()});}}),PerformAnimatedUpdate:function(lm,ln){return a.Delay(function(){var lp,lq,lr;lp=S.FindAll(ln);lq=H.ComputeChangeAnim(lm,lp);lr=H.ComputeEnterAnim(lm,lp);return a.Bind(o.Play(o.Append(lq,H.ComputeExitAnim(lm,lp))),function(){H.SyncElemNode(lm.Top);return a.Bind(o.Play(lr),function(){return a.Return(void(lm.PreviousNodes=lp));});});});},Sync:function(lu){var lv;lv=function(lw){var lx,ly,lz;if(lw.$==1){lx=lw.$0;H.SyncElement(lx);return lv(lx.Children);}else{if(lw.$==2){return lv(lw.$0.Current);}else{if(lw.$==3){return null;}else{if(lw.$==5){return null;}else{if(lw.$==4){ly=lw.$0;if(ly.Dirty){ly.Text.nodeValue=ly.Value;ly.Dirty=false;return;}else{return null;}}else{lz=lw.$1;lv(lw.$0);return lv(lz);}}}}}};return lv(lu);},SyncElemNode:function(lA){H.SyncElement(lA);return H.Sync(lA.Children);},SyncElement:function(lB){var lC,lG;y.Sync(lB.El,lB.Attr);lC=function(lD){var lE,lF;if(lD.$==0){lE=lD.$1;return lC(lD.$0)?true:lC(lE);}else{if(lD.$==2){lF=lD.$0;return lF.Dirty?true:lC(lF.Current);}else{return false;}}};if(lC(lB.Children)){H.DoSyncElement(lB);}lG=$.GetOptional(lB.Render);if(lG.$==1){lG.$0.call(null,lB.El);delete lB.Render;return;}else{return null;}},UpdateEmbedNode:function(lH,lI){lH.Current=lI;lH.Dirty=true;return;},UpdateTextNode:function(lJ,lK){lJ.Value=lK;lJ.Dirty=true;return;}},DynamicAttrNode:$.Class({GetChangeAnim:function(){return o.get_Empty();},GetEnterAnim:function(){return o.get_Empty();},GetExitAnim:function(){return o.get_Empty();},Init:function(lO){return this.init.call(null,lO);},Sync:function(lP){if(this.dirty){(this.push.call(null,lP))(this.value);this.dirty=false;return;}else{return null;}},get_Changed:function(){return this.updates;}},{New:function(lQ,lR,lS){var lT;lT=$.New(this,{});lT.init=lR;lT.push=lS;lT.value=g.U();lT.dirty=true;lT.updates=w.Map(function(lU){lT.value=lU;lT.dirty=true;return;},lQ);return lT;}}),Elt:$.Class({AddClass:function($cls){var $this=this;return $this.elt.className+=" "+$cls;},Append:function(lV){var lW;lW=this.get_DocElemNode();lW.Children={$:0,$0:lW.Children,$1:lV.get_DocNode()};V.Set(this.rvUpdates,w.Map2(function(){return function(){return null;};},V.Get(this.rvUpdates),lV.get_Updates()));H.InsertDoc(this.elt,lV.get_DocNode(),{$:0});return;},Clear:function(){this.get_DocElemNode().Children={$:3};V.Set(this.rvUpdates,F.Const(null));while(this.elt.hasChildNodes()){this.elt.removeChild(this.elt.firstChild);}return;},GetAttribute:function(lZ){return this.elt.getAttribute(lZ);},GetProperty:function(l0){return this.elt[l0];},GetText:function(){return this.elt.textContent;},GetValue:function(){return this.elt.value;},HasAttribute:function(l1){return this.elt.hasAttribute(l1);},HasClass:function(l2){return(new W("(\\s|^)"+l2+"(\\s|$)")).test(this.elt.className);},Html:function(){return this.elt.outerHTML;},Id:function(){return this.elt.id;},OnAfterRender:function(l3){var l4,l5,l6;l4=$.GetOptional(this.get_DocElemNode().Render);if(l4.$==1){l6=l4.$0;l5={$:1,$0:function(l7){l6(l7);return l3(l7);}};}else{l5={$:1,$0:l3};}$.SetOptional(this.get_DocElemNode(),"Render",l5);return this;},Prepend:function(l8){var l9,ma,mb;l9=this.get_DocElemNode();l9.Children={$:0,$0:l8.get_DocNode(),$1:l9.Children};V.Set(this.rvUpdates,w.Map2(function(){return function(){return null;};},V.Get(this.rvUpdates),l8.get_Updates()));ma=this.elt.firstChild;mb=n.Equals(ma,null)?{$:0}:{$:1,$0:ma};H.InsertDoc(this.elt,l8.get_DocNode(),mb);return;},RemoveAttribute:function(mc){return this.elt.removeAttribute(mc);},RemoveClass:function(md){this.elt.className=this.elt.className.replace(new W("(\\s|^)"+md+"(\\s|$)")," ");},SetAttribute:function(me,mf){return this.elt.setAttribute(me,mf);},SetProperty:function(mg,mh){this.elt[mg]=mh;},SetStyle:function(mi,mj){this.elt.style[mi]=mj;},SetText:function(mk){this.get_DocElemNode().Children={$:3};V.Set(this.rvUpdates,F.Const(null));this.elt.textContent=mk;return;},SetValue:function(ml){this.elt.value=ml;},get_DocElemNode:function(){var mm;mm=this.docNode1;return mm.$==1?mm.$0:P.FailWith("Elt: Invalid docNode");},get_Element:function(){return this.elt;},on:function(mn,mo){this.elt.addEventListener(mn,mo(this.elt),false);return this;}},{New:function(mp,mq,mr){var ms,mt,mu,mv,my;ms=H.CreateElemNode(mp,mq,mr.get_DocNode());mt=X.Create(mr.get_Updates());mu=y.Updates(ms.Attr);mv=function(){return function(){return null;};};my=F.Bind(function(mz){return w.Map2(mv,mu,mz);},mt.get_View());return L.New1({$:1,$0:ms},my,mp,mt,mu);},New1:function(mA,mB,mC,mD){var mF;mF=$.New(this,J.New(mA,mB));mF.docNode1=mA;mF.elt=mC;mF.rvUpdates=mD;return mF;}}),UINextPagelet:$.Class({Render:function(){return J.RunById(this.divId,this.doc);},get_Body:function(){return this.body;}},{New:function(mG){var mH,mI,mJ;mH=$.New(this,_0.New());mH.doc=mG;mH.divId=h.Id();mJ=mH.divId;mI=C.ofArray([_1.Attr().NewAttr("id",mJ)]);mH.body=_2.Tags().NewTag("div",mI).get_Body();return mH;}})},DomUtility:{AddClass:function(mK,mL){R(mK).addClass(mL);},AppendTo:function(mM,mN){mM.appendChild(mN);},Clear:function(mO){while(mO.hasChildNodes()){mO.removeChild(mO.firstChild);}return;},ClearAttrs:function(mP){while(mP.hasAttributes()){mP.removeAttributeNode(mP.attributes.item(0));}return;},CreateAttr:function(mQ,mR){var mS;mS=z.Doc().createAttribute(mQ);mS.value=mR;return mS;},CreateElement:function(mT){return z.Doc().createElement(mT);},CreateSvgElement:function(mU){return z.Doc().createElementNS("http://www.w3.org/2000/svg",mU);},CreateText:function(mV){return z.Doc().createTextNode(mV);},Doc:$.Field(function(){return G;}),InsertAt:function(mW,mX,mY){var mZ,m0,m1;if(mY.parentNode===mW){m0=mY.nextSibling;m1=[mX,n.Equals(m0,null)?{$:0}:{$:1,$0:m0}];mZ=m1[0].$==1?m1[1].$==1?m1[0].$0===m1[1].$0:false:m1[1].$==0?true:false;}else{mZ=false;}return!mZ?mX.$==1?void mW.insertBefore(mY,mX.$0):void mW.appendChild(mY):null;},RemoveAttr:function(m2,m3){return m2.removeAttribute(m3);},RemoveClass:function(m4,m5){R(m4).removeClass(m5);},RemoveNode:function(m6,m7){return m7.parentNode===m6?void m6.removeChild(m7):null;},SetAttr:function(m8,m9,m_){return m8.setAttribute(m9,m_);},SetProperty:function($target,$name,$value){var $0=this,$this=this;return $target.setProperty($name,$value);},SetStyle:function(m$,na,nb){return z.SetProperty(m$.style,na,nb);}},DoubleInterpolation:$.Class({Interpolate:function(nc,nd,ne){return nd+nc*(ne-nd);}}),Easing:$.Class({},{Custom:function(nf){return $.New(_3,{TransformTime:nf});},get_CubicInOut:function(){return _4.CubicInOut();}}),Easings:{CubicInOut:$.Field(function(){return $.New(_3,{TransformTime:function(ng){var nh;nh=ng*ng;return 3*nh-2*(nh*ng);}});})},Flow:$.Class({},{Bind:function(ni,nj){return{Render:function(nk){return function(nl){return(ni.Render.call(null,nk))(function(nm){return(nj(nm).Render.call(null,nk))(nl);});};}};},Embed:function(nn){var no;no=X.Create(J.get_Empty());(nn.Render.call(null,no))(function(){});return J.EmbedView(no.get_View());},Map:function(nq,nr){return{Render:function(ns){return function(nt){return(nr.Render.call(null,ns))(function(nu){return nt(nq(nu));});};}};},Return:function(nv){return{Render:function(){return function(nx){return nx(nv);};}};},get_Do:function(){return _5.New();}}),Flow1:$.Class({},{Define:function(ny){return{Render:function(nz){return function(nA){return V.Set(nz,ny(nA));};}};},Static:function(nB){return{Render:function(nC){return function(nD){V.Set(nC,nB);return nD(null);};}};}}),FlowBuilder:$.Class({Bind:function(nE,nF){return _6.Bind(nE,nF);},Return:function(nG){return _6.Return(nG);},ReturnFrom:function(nH){return nH;}},{New:function(){return $.New(this,{});}}),Html:{attr:$.Class({},{New:function(){return $.New(this,{});}})},Input:{ActivateButtonListener:$.Field(function(){var nI,nM;nI=function(nJ,nK){var nL;nL=nJ.button;return nL===0?V.Set(_7.MouseBtnSt1().Left,nK):nL===1?V.Set(_7.MouseBtnSt1().Middle,nK):nL===2?V.Set(_7.MouseBtnSt1().Right,nK):null;};if(!_7.MouseBtnSt1().Active){_7.MouseBtnSt1().Active=true;G.addEventListener("mousedown",function(nN){return nI(nN,true);},false);nM=G.addEventListener("mouseup",function(nO){return nI(nO,false);},false);}else{nM=null;}return nM;}),ActivateKeyListener:$.Field(function(){var nP;if(!_7.KeyListenerState().KeyListenerActive){R(G).keydown(function(nQ){var nR,nS;nR=nQ.which;V.Set(_7.KeyListenerState().LastPressed,nR);nS=V.Get(_7.KeyListenerState().KeysPressed);return!c.exists(function(nT){return nT===nR;},nS)?V.Set(_7.KeyListenerState().KeysPressed,C.append(nS,C.ofArray([nR]))):null;});nP=void R(G).keyup(function(nU){var nV,nW,nY;nV=nU.which;nW=function(nX){return nX!==nV;};nY=function(nZ){return C.filter(nW,nZ);};return V.Update(_7.KeyListenerState().KeysPressed,nY);});}else{nP=null;}return nP;}),KeyListenerState:$.Field(function(){return{KeysPressed:X.Create($.New(Q,{$:0})),KeyListenerActive:false,LastPressed:X.Create(-1)};}),Keyboard:$.Class({},{IsPressed:function(n0){var n1;_7.ActivateKeyListener();n1=function(n2){return n2===n0;};return w.Map(function(n3){return c.exists(n1,n3);},_7.KeyListenerState().KeysPressed.get_View());},get_KeysPressed:function(){_7.ActivateKeyListener();return _7.KeyListenerState().KeysPressed.get_View();},get_LastPressed:function(){_7.ActivateKeyListener();return _7.KeyListenerState().LastPressed.get_View();}}),Mouse:$.Class({},{get_LeftPressed:function(){_7.ActivateButtonListener();return _7.MouseBtnSt1().Left.get_View();},get_MiddlePressed:function(){_7.ActivateButtonListener();return _7.MouseBtnSt1().Middle.get_View();},get_MousePressed:function(){_7.ActivateButtonListener();return F.Apply(F.Apply(F.Apply(F.Const(function(n4){return function(n5){return function(n6){return(n4?true:n5)?true:n6;};};}),_7.MouseBtnSt1().Left.get_View()),_7.MouseBtnSt1().Middle.get_View()),_7.MouseBtnSt1().Right.get_View());},get_Position:function(){var n7;n7=function(n8){return V.Set(_7.MousePosSt1().PosV,[n8.clientX,n8.clientY]);};if(!_7.MousePosSt1().Active){G.addEventListener("mousemove",n7,false);_7.MousePosSt1().Active=true;}return _7.MousePosSt1().PosV.get_View();},get_RightPressed:function(){_7.ActivateButtonListener();return _7.MouseBtnSt1().Right.get_View();}}),MouseBtnSt1:$.Field(function(){return{Active:false,Left:X.Create(false),Middle:X.Create(false),Right:X.Create(false)};}),MousePosSt1:$.Field(function(){return{Active:false,PosV:X.Create([0,0])};})},Interpolation1:$.Class({},{get_Double:function(){return $.New(_8,{$:0});}}),Key:$.Class({},{Fresh:function(){return $.New(_9,{$:0,$0:h.Int()});}}),ListModel:$.Class({Add:function(n9){var n_,oa=this;n_=V.Get(this.Var);if(!_.Contains(this.key,n9,n_)){n_.push(n9);return V.Set(this.Var,n_);}else{d.set(n_,d.findINdex(function(n$){return n.Equals(oa.key.call(null,n$),oa.key.call(null,n9));},n_),n9);return V.Set(oa.Var,n_);}},Clear:function(){return V.Set(this.Var,[]);},ContainsKey:function(ob){var od=this;return c.exists(function(oc){return n.Equals(od.key.call(null,oc),ob);},V.Get(od.Var));},ContainsKeyAsView:function(oe){var of,oh=this;of=function(og){return n.Equals(oh.key.call(null,og),oe);};return w.Map(function(oi){return c.exists(of,oi);},oh.Var.get_View());},Find:function(oj){return d.find(oj,V.Get(this.Var));},FindAsView:function(ok){return w.Map(function(ol){return d.find(ok,ol);},this.Var.get_View());},FindByKey:function(om){var oo=this;return d.find(function(on){return n.Equals(oo.key.call(null,on),om);},V.Get(oo.Var));},FindByKeyAsView:function(op){var oq,os=this;oq=function(or){return n.Equals(os.key.call(null,or),op);};return w.Map(function(ot){return d.find(oq,ot);},os.Var.get_View());},Iter:function(ou){return d.iter(ou,V.Get(this.Var));},Lens:function(ov){return ba.New(this,ov,function(ow){return ow;},function(){return function(oy){return oy;};});},Remove:function(oz){var oA,oB,oC;oA=V.Get(this.Var);if(_.Contains(this.key,oz,oA)){oB=this.key;oC=oB(oz);return V.Set(this.Var,d.filter(function(oD){return!n.Equals(oB(oD),oC);},oA));}else{return null;}},RemoveBy:function(oE){return V.Set(this.Var,d.filter(function(oF){return!oE(oF);},V.Get(this.Var)));},RemoveByKey:function(oG){var oI=this;return V.Set(this.Var,d.filter(function(oH){return!n.Equals(oI.key.call(null,oH),oG);},V.Get(oI.Var)));},Set:function(oJ){return V.Set(this.Var,d.ofSeq(oJ));},TryFind:function(oK){return d.tryFind(oK,V.Get(this.Var));},TryFindAsView:function(oL){return w.Map(function(oM){return d.tryFind(oL,oM);},this.Var.get_View());},TryFindByKey:function(oN){var oP=this;return d.tryFind(function(oO){return n.Equals(oP.key.call(null,oO),oN);},V.Get(oP.Var));},TryFindByKeyAsView:function(oQ){var oR,oT=this;oR=function(oS){return n.Equals(oT.key.call(null,oS),oQ);};return w.Map(function(oU){return d.tryFind(oR,oU);},oT.Var.get_View());},UpdateAll:function(oV){return V.Update(this.Var,function(oW){d.iteri(function(oX){return function(oY){return v.iter(function(oZ){return d.set(oW,oX,oZ);},oV(oY));};},oW);return oW;});},UpdateBy:function(o0,o1){var o2,o3,o5=this,o6,o7;o2=V.Get(this.Var);o3=d.tryFindIndex(function(o4){return n.Equals(o5.key.call(null,o4),o1);},o2);if(o3.$==1){o6=o3.$0;o7=o0(d.get(o2,o6));if(o7.$==1){d.set(o2,o6,o7.$0);return V.Set(o5.Var,o2);}else{return null;}}else{return null;}},get_Key:function(){return this.key;},get_Length:function(){return d.length(V.Get(this.Var));},get_LengthAsView:function(){return w.Map(function(o8){return d.length(o8);},this.Var.get_View());},get_View:function(){return this.view;}},{Create:function(o9,o_){var o$;o$=X.Create(c.toArray(M.distinctBy(o9,o_)));return $.New(bb,{key:o9,Var:o$,view:w.Map(function(pa){return pa.slice();},o$.get_View())});},FromSeq:function(pb){return bb.Create(function(pc){return pc;},pb);}}),ListModel1:$.Class({},{Key:function(pd){return pd.key;},View:function(pe){return pe.view;}}),ListModels:{Contains:function(pf,pg,ph){var pi;pi=pf(pg);return c.exists(function(pj){return n.Equals(pf(pj),pi);},ph);}},Model:$.Class({get_View:function(){return bc.View(this);}}),Model1:$.Class({},{Create:function(pk,pl){var pm;pm=X.Create(pl);return $.New(bd,{$:0,$0:pm,$1:w.Map(pk,pm.get_View())});},Update:function(pn,po){return V.Update(po.$0,function(pp){pn(pp);return pp;});},View:function(pq){return pq.$1;}}),RefImpl:$.Class({Get:function(){return this.get.call(null,this.baseRef.Get());},Set:function(pr){var pt=this;return this.baseRef.Update(function(ps){return(pt.update.call(null,ps))(pr);});},Update:function(pu){var pw=this;return this.baseRef.Update(function(pv){return(pw.update.call(null,pv))(pu(pw.get.call(null,pv)));});},UpdateMaybe:function(px){var pz=this;return this.baseRef.UpdateMaybe(function(py){return v.map(pz.update.call(null,py),px(pz.get.call(null,py)));});},get_Id:function(){return this.id;},get_View:function(){return w.Map(this.get,this.baseRef.get_View());}},{New:function(pA,pB,pC){var pD;pD=$.New(this,{});pD.baseRef=pA;pD.get=pB;pD.update=pC;pD.id=h.Id();return pD;}}),RefImpl1:$.Class({Get:function(){return this.get.call(null,this.m.FindByKey(this.key));},Set:function(pE){var pG=this;return this.m.UpdateBy(function(pF){return{$:1,$0:(pG.update.call(null,pF))(pE)};},pG.key);},Update:function(pH){var pJ=this;return this.m.UpdateBy(function(pI){return{$:1,$0:(pJ.update.call(null,pI))(pH(pJ.get.call(null,pI)))};},pJ.key);},UpdateMaybe:function(pK){var pM=this;return this.m.UpdateBy(function(pL){return v.map(pM.update.call(null,pL),pK(pM.get.call(null,pL)));},pM.key);},get_Id:function(){return this.id;},get_View:function(){return w.Map(this.get,this.m.FindByKeyAsView(this.key));}},{New:function(pN,pO,pP,pQ){var pR;pR=$.New(this,{});pR.m=pN;pR.key=pO;pR.get=pP;pR.update=pQ;pR.id=h.Id();return pR;}}),Route:{Append:function(pS,pT){return{$:0,$0:p.Append(pS.$0,pT.$0)};},FromList:function(pU){return{$:0,$0:p.FromArray(d.ofSeq(pU))};},MakeHash:function(pV){return be.concat("/",d.map(function(pW){return bf(pW);},p.ToArray(pV.$0)));},NoHash:function(pX){return be.StartsWith(pX,"#")?pX.substring(1):pX;},ParseHash:function(pY){return{$:0,$0:p.FromArray(d.map(function(pZ){return bg(pZ);},be.SplitChars(bh.NoHash(pY),[47],1)))};},SameHash:function(p0,p1){return bh.NoHash(p0)===bh.NoHash(p1);},ToList:function(p2){return C.ofArray(p.ToArray(p2.$0));}},RouteMap1:$.Class({},{Create:function(p3,p4){return{Des:p4,Ser:p3};},Install:function(p5){return bi.InstallMap(p5);}}),Router:$.Class({},{Dir:function(p6,p7){return bj.Prefix(p6,bk.Merge(p7));},Install:function(p8,p9){return bi.Install(p8,p9);},Merge:function(p_){return bi.MergeRouters(p_);}}),Router1:$.Class({},{Prefix:function(p$,qa){return{$:0,$0:qa.$0,$1:bl.Prefix(p$,qa.$1)};},Route:function(qb,qc,qd){return bi.DefineRoute(qb,qc,qd);}}),Routing:{ComputeBodies:function(qe){var qf;qf=bm.New12();d.iter(function(qg){return qf.set_Item(qg.RouteId,qg);},bl.ToArray(qe));return qf;},DefineRoute:function(qh,qi,qj){var qk,ql,qm,qn;qk=X.Create(qi);ql=h.Int();qm=(qj({$:0,$0:ql}))(qk);qn=bl.Leaf({$:0,$0:ql,$1:function(qo){F.Sink(function(qp){return qo.UpdateRoute.call(null,bi.DoLink(qh,qp));},qk.get_View());return{OnRouteChanged:function(qq){return V.Set(qk,bi.DoRoute(qh,qq));},OnSelect:function(){return qo.UpdateRoute.call(null,bi.DoLink(qh,V.Get(qk)));},RouteId:ql,RouteValue:qm};}});return{$:0,$0:{$:1,$0:qm},$1:qn};},DoLink:function(qs,qt){return bh.FromList(qs.Ser.call(null,qt));},DoRoute:function(qu,qv){return qu.Des.call(null,bh.ToList(qv));},Install:function(qw,qx){var qy,qz,qA,qD,qE,qJ,qL,qM,qN,qP;qy=qx.$0;qz=qx.$1;qA=bi.InstallMap({Des:function(qB){return bh.FromList(qB);},Ser:function(qC){return bh.ToList(qC);}});qD={Bodies:g.U(),CurrentRoute:qA,CurrentSite:0,Selection:g.U()};qE=bl.Map(function(qF){return function(qG){var qH;qH=qG.$0;return qG.$1.call(null,{UpdateRoute:function(qI){return bi.OnInternalSiteUpdate(qD,qH,qF,qI);}});};},qz);qD.Bodies=bi.ComputeBodies(qE);qJ=function(qK){return bl.Lookup(qE,bh.ToList(qK));};qL=qJ(V.Get(qA));if(qL.$==0){qN=qL.$0;qD.CurrentSite=qN.RouteId;qM=X.Create(qN.RouteValue);}else{qM=X.Create(qy.$==1?qy.$0:P.FailWith("Site.Install fails on empty site"));}qD.Selection=qM;F.Sink(function(qO){return bi.OnSelectSite(qD,qw(qO));},qM.get_View());qP=function(qQ){var qR;qR=qJ(qQ);return qR.$==1?null:bi.OnGlobalRouteChange(qD,qR.$0,bh.FromList(qR.$1));};qP(V.Get(qA));F.Sink(qP,qA.get_View());return qM;},InstallMap:function(qS){var qT,qV,qW;qT=function(){return qS.Des.call(null,bh.ToList(bh.ParseHash(bn.location.hash)));};qV=X.Create(qT(null));qW=function(){var qY;qY=qT(null);return!n.Equals(qS.Ser.call(null,V.Get(qV)),qS.Ser.call(null,qY))?V.Set(qV,qY):null;};bn.onpopstate=qW;bn.onhashchange=qW;F.Sink(function(qZ){var q0;q0=bh.MakeHash(bh.FromList(qS.Ser.call(null,qZ)));return!bh.SameHash(bn.location.hash,q0)?void(bn.location.hash=q0):null;},qV.get_View());return qV;},MergeRouters:function(q1){var q2,q3,q5;q2=c.toArray(q1);q3=bl.Merge(c.map(function(q4){return q4.$1;},q2));q5=c.tryPick(function(q6){return q6.$0;},q2);return q3.$==1?{$:0,$0:q5,$1:q3.$0}:P.FailWith("Invalid Site.Merge: need more prefix disambiguation");},OnGlobalRouteChange:function(q7,q8,q9){if(q7.CurrentSite!==q8.RouteId){q7.CurrentSite=q8.RouteId;V.Set(q7.Selection,q8.RouteValue);}return q8.OnRouteChanged.call(null,q9);},OnInternalSiteUpdate:function(q_,q$,ra,rb){return q_.CurrentSite===q$?bi.SetCurrentRoute(q_,bh.Append(bh.FromList(ra),rb)):null;},OnSelectSite:function(rc,rd){var re;re=rd.$0;if(rc.CurrentSite!==re){rc.CurrentSite=re;return rc.Bodies.get_Item(re).OnSelect.call(null,null);}else{return null;}},SetCurrentRoute:function(rf,rg){return!n.Equals(V.Get(rf.CurrentRoute),rg)?V.Set(rf.CurrentRoute,rg):null;}},Snap1:{Bind:function(rh,ri){var rj,rk;rj=bo.Create();rk=function(){return bo.MarkObsolete(rj);};bo.When(ri,function(rm){var rn;rn=rh(rm);return bo.When(rn,function(ro){return(bo.IsForever(rn)?bo.IsForever(ri):false)?bo.MarkForever(rj,ro):bo.MarkReady(rj,ro);},rk);},rk);return rj;},Create:function(){return bo.Make({$:3,$0:[],$1:[]});},CreateForever:function(rp){return bo.Make({$:0,$0:rp});},CreateWithValue:function(rq){return bo.Make({$:2,$0:rq,$1:[]});},IsForever:function(rr){return rr.State.$==0?true:false;},IsObsolete:function(rs){return rs.State.$==1?true:false;},Make:function(rt){return{State:rt};},Map:function(ru,rv){var rw,rx;rw=rv.State;if(rw.$==0){return bo.CreateForever(ru(rw.$0));}else{rx=bo.Create();bo.When(rv,function(ry){return bo.MarkDone(rx,rv,ru(ry));},function(){return bo.MarkObsolete(rx);});return rx;}},Map2:function(rA,rB,rC){var rD,rE,rF,rH,rI,rJ,rK,rM;rD=[rB.State,rC.State];if(rD[0].$==0){if(rD[1].$==0){rE=rD[1].$0;return bo.CreateForever((rA(rD[0].$0))(rE));}else{return bo.Map(rA(rD[0].$0),rC);}}else{if(rD[1].$==0){rF=rD[1].$0;return bo.Map(function(rG){return(rA(rG))(rF);},rB);}else{rH=bo.Create();rI=[{$:0}];rJ=[{$:0}];rK=function(){rI[0]={$:0};rJ[0]={$:0};return bo.MarkObsolete(rH);};rM=function(){var rO,rP,rQ;rO=[rI[0],rJ[0]];if(rO[0].$==1){if(rO[1].$==1){rP=rO[0].$0;rQ=rO[1].$0;return(bo.IsForever(rB)?bo.IsForever(rC):false)?bo.MarkForever(rH,(rA(rP))(rQ)):bo.MarkReady(rH,(rA(rP))(rQ));}else{return null;}}else{return null;}};bo.When(rB,function(rR){rI[0]={$:1,$0:rR};return rM(null);},rK);bo.When(rC,function(rS){rJ[0]={$:1,$0:rS};return rM(null);},rK);return rH;}}},MapAsync:function(rT,rU){var rV;rV=bo.Create();bo.When(rU,function(rW){return bp.StartTo(rT(rW),function(rX){return bo.MarkDone(rV,rU,rX);});},function(){return bo.MarkObsolete(rV);});return rV;},MapCached:function(rZ,r0,r1){return bo.Map(function(r2){var r3,r4,r5;r3=rZ[0];if(r3.$==1){if(n.Equals(r2,r3.$0[0])){return r3.$0[1];}else{r4=r0(r2);rZ[0]={$:1,$0:[r2,r4]};return r4;}}else{r5=r0(r2);rZ[0]={$:1,$0:[r2,r5]};return r5;}},r1);},MarkDone:function(r6,r7,r8){return bo.IsForever(r7)?bo.MarkForever(r6,r8):bo.MarkReady(r6,r8);},MarkForever:function(r9,r_){var r$,sa;r$=r9.State;if(r$.$==3){sa=r$.$0;r9.State={$:0,$0:r_};return l.Iter(function(sb){return sb(r_);},sa);}else{return null;}},MarkObsolete:function(sc){var sd,se,sg;sd=sc.State;if(sd.$==1){return null;}else{if(sd.$==2){se=sd.$1;sc.State={$:1};return l.Iter(function(sf){return sf(null);},se);}else{if(sd.$==3){sg=sd.$1;sc.State={$:1};return l.Iter(function(sh){return sh(null);},sg);}else{return null;}}}},MarkReady:function(si,sj){var sk,sl;sk=si.State;if(sk.$==3){sl=sk.$0;si.State={$:2,$0:sj,$1:sk.$1};return l.Iter(function(sm){return sm(sj);},sl);}else{return null;}},SnapshotOn:function(sn,so){var sp,sq,sr,ss,st;sp=[sn.State,so.State];if(sp[1].$==0){return bo.CreateForever(sp[1].$0);}else{sq=bo.Create();sr=[{$:0}];ss=[false];st=function(){var sv;if(ss[0]){sv=sr[0];return sv.$==1?bo.IsForever(so)?bo.MarkForever(sq,sv.$0):sv.$==1?bo.MarkReady(sq,sv.$0):null:sv.$==1?bo.MarkReady(sq,sv.$0):null;}else{return null;}};bo.When(sn,function(){ss[0]=true;return st(null);},function(){sr[0]={$:0};return bo.MarkObsolete(sq);});bo.When(so,function(sy){sr[0]={$:1,$0:sy};return st(null);},function(){});return sq;}},When:function(sA,sB,sC){var sD,sE,sF;sD=sA.State;if(sD.$==1){return sC(null);}else{if(sD.$==2){sE=sD.$0;l.Add(sC,sD.$1);return sB(sE);}else{if(sD.$==3){sF=sD.$1;l.Add(sB,sD.$0);return l.Add(sC,sF);}else{return sB(sD.$0);}}}}},String:{isBlank:function(sG){return be.forall(function(sH){return bq.IsWhiteSpace(sH);},sG);}},Submitter:$.Class({Trigger:function(){return V.Set(this["var"],null);},get_Input:function(){return this.input;},get_View:function(){return this.view;}},{Create:function(sI,sJ){return br.New(sI,sJ);},Input:function(sK){return sK.get_Input();},New:function(sL,sM){var sN,sO;sN=$.New(this,{});sN.input=sL;sN["var"]=X.Create(null);sO=sN.input;sN.view=w.SnapshotOn(sM,sN["var"].get_View(),sO);return sN;},Trigger:function(sP){return sP.Trigger();},View:function(sQ){return sQ.get_View();}}),Trans:$.Class({},{AnimateChange:function(sR,sS,sT){return(sR.TChange.call(null,sS))(sT);},AnimateEnter:function(sU,sV){return sU.TEnter.call(null,sV);},AnimateExit:function(sW,sX){return sW.TExit.call(null,sX);},CanAnimateChange:function(sY){return(sY.TFlags&1)!==0;},CanAnimateEnter:function(sZ){return(sZ.TFlags&2)!==0;},CanAnimateExit:function(s0){return(s0.TFlags&4)!==0;},Trivial:function(){return{TChange:function(){return function(s2){return o.Const(s2);};},TEnter:function(s3){return o.Const(s3);},TExit:function(s4){return o.Const(s4);},TFlags:0};}}),Trans1:$.Class({},{Change:function(s5,s6){return{TChange:s5,TEnter:s6.TEnter,TExit:s6.TExit,TFlags:s6.TFlags|1};},Create:function(s7){return{TChange:s7,TEnter:function(s8){return o.Const(s8);},TExit:function(s9){return o.Const(s9);},TFlags:1};},Enter:function(s_,s$){return{TChange:s$.TChange,TEnter:s_,TExit:s$.TExit,TFlags:s$.TFlags|2};},Exit:function(ta,tb){return{TChange:tb.TChange,TEnter:tb.TEnter,TExit:ta,TFlags:tb.TFlags|4};}}),Trie1:{AllSome:function(tc){var td,te,tf,tg;td=bs.Get(tc);te=bu.New2();tf=true;while(tf?td.MoveNext():false){tg=td.get_Current();if(tg.$==1){te.Add(tg.$0);}else{tf=false;}}return tf?{$:1,$0:te.ToArray()}:{$:0};},Empty:function(){return{$:1};},IsLeaf:function(th){return th.$==2?true:false;},Leaf:function(ti){return{$:2,$0:ti};},Look:function(tj,tk){var tl,tm,tn;tl=[tk,tj];if(tl[0].$==2){return{$:0,$0:tl[0].$0,$1:tj};}else{if(tl[0].$==0){if(tl[1].$==1){tm=tl[1].$1;tn=bv.TryFind(tl[1].$0,tl[0].$0);return tn.$==0?{$:1}:bl.Look(tm,tn.$0);}else{return{$:1};}}else{return{$:1};}}},Lookup:function(to,tp){return bl.Look(c.toList(tp),to);},Map:function(tq,tr){return bl.MapLoop($.New(Q,{$:0}),tq,tr);},MapLoop:function(ts,tt,tu){var tv;if(tu.$==1){return{$:1};}else{if(tu.$==2){tv=tu.$0;return{$:2,$0:(tt(ts))(tv)};}else{return bl.TrieBranch(bv.Map(function(tw){return function(tx){return bl.MapLoop(C.append(ts,C.ofArray([tw])),tt,tx);};},tu.$0));}}},Mapi:function(ty,tz){var tA;tA=[0];return bl.Map(function(tB){var tC;tC=tA[0];tA[0]=tC+1;return(ty(tC))(tB);},tz);},Merge:function(tD){var tE,tF;tE=c.toArray(tD);tF=d.length(tE);return tF===0?{$:1,$0:{$:1}}:tF===1?{$:1,$0:d.get(tE,0)}:c.exists(function(tG){return bl.IsLeaf(tG);},tE)?{$:0}:v.map(function(tH){return bl.TrieBranch(tH);},bl.MergeMaps(function(tI){return bl.Merge(tI);},c.choose(function(tJ){return tJ.$==0?{$:1,$0:tJ.$0}:{$:0};},tE)));},MergeMaps:function(tK,tL){var tM;tM=c.collect(function(tN){return bv.ToSeq(tN);},tL);return v.map(function(tO){return bv.OfArray(c.toArray(tO));},bl.AllSome(c.map(function(tP){var tQ;tQ=tP[0];return v.map(function(tR){return[tQ,tR];},tK(tP[1]));},bv.ToSeq(c.fold(function(tS){return function(tT){return bl.MultiAdd(tT[0],tT[1],tS);};},bw.New1([]),tM)))));},MultiAdd:function(tU,tV,tW){return tW.Add(tU,$.New(Q,{$:1,$0:tV,$1:bl.MultiFind(tU,tW)}));},MultiFind:function(tX,tY){return P.DefaultArg(bv.TryFind(tX,tY),$.New(Q,{$:0}));},Prefix:function(tZ,t0){return bl.TrieBranch(bw.New1(C.ofArray([[tZ,t0]])));},ToArray:function(t1){var t2;t2=[];bl.Map(function(){return function(t4){return l.Add(t4,t2);};},t1);return l.ToArray(t2);},TrieBranch:function(t5){return t5.get_IsEmpty()?{$:1}:{$:0,$0:t5};}},Var:$.Class({Get:function(){return V.Get(this);},Set:function(t6){return V.Set(this,t6);},Update:function(t7){return V.Update(this,t7);},UpdateMaybe:function(t8){var t9;t9=t8(V.Get(this));return t9.$==1?V.Set(this,t9.$0):null;},get_Id:function(){return"uinref"+$$.String(V.GetId(this));},get_View:function(){var t$=this;return{$:0,$0:function(){return V.Observe(t$);}};},get_View1:function(){return this.get_View();}},{Create:function(ua){return $.New(X,{Const:false,Current:ua,Snap:bo.CreateWithValue(ua),Id:h.Int()});}}),Var1:$.Class({},{Get:function(ub){return ub.Current;},GetId:function(uc){return uc.Id;},Lens:function(ud,ue,uf){return bx.New(ud,ue,uf);},Observe:function(ug){return ug.Snap;},Set:function(uh,ui){if(uh.Const){return null;}else{bo.MarkObsolete(uh.Snap);uh.Current=ui;uh.Snap=bo.CreateWithValue(ui);return;}},SetFinal:function(uj,uk){if(uj.Const){return null;}else{uj.Const=true;uj.Current=uk;uj.Snap=bo.CreateForever(uk);return;}},Update:function(ul,um){return V.Set(ul,um(V.Get(ul)));}}),View:$.Class({},{Convert:function(un,uo){return w.ConvertBy(function(up){return up;},un,uo);},ConvertBy:function(uq,ur,us){var ut;ut=[bm.New12()];return w.Map(function(uu){var uv,uw,ux;uv=ut[0];uw=bm.New12();ux=d.map(function(uy){var uz,uA;uz=uq(uy);uA=uv.ContainsKey(uz)?uv.get_Item(uz):ur(uy);uw.set_Item(uz,uA);return uA;},c.toArray(uu));ut[0]=uw;return ux;},us);},ConvertSeq:function(uB,uC){return w.ConvertSeqBy(function(uD){return uD;},function(){return function(uF){return uB(uF);};},uC);},ConvertSeqBy:function(uG,uH,uI){var uJ;uJ=[bm.New12()];return w.Map(function(uK){var uL,uM,uN;uL=uJ[0];uM=bm.New12();uN=d.map(function(uO){var uP,uQ,uR;uP=uG(uO);if(uL.ContainsKey(uP)){uR=uL.get_Item(uP);V.Set(uR.NVar,uO);uQ=uR;}else{uQ=w.ConvertSeqNode(function(uS){return(uH(uP))(uS);},uO);}uM.set_Item(uP,uQ);return uQ.NValue;},c.toArray(uK));uJ[0]=uM;return uN;},uI);},ConvertSeqNode:function(uT,uU){var uV,uW;uV=X.Create(uU);uW=uV.get_View();return{NValue:uT(uW),NVar:uV,NView:uW};},CreateLazy:function(uX){var uY;uY=[{$:0}];return{$:0,$0:function(){var u0,u1,u2;u0=uY[0];if(u0.$==1){if(!bo.IsObsolete(u0.$0)){return u0.$0;}else{u1=uX(null);uY[0]={$:1,$0:u1};return u1;}}else{u2=uX(null);uY[0]={$:1,$0:u2};return u2;}}};},CreateLazy2:function(u3,u4,u5){var u6,u7;u6=u4.$0;u7=u5.$0;return w.CreateLazy(function(){var u9,u_;u9=u6(null);u_=u7(null);return(u3(u9))(u_);});},Join:function(u$){var va;va=u$.$0;return w.CreateLazy(function(){return bo.Bind(function(vc){return vc.$0.call(null,null);},va(null));});},Map:function(vd,ve){var vf;vf=ve.$0;return w.CreateLazy(function(){return bo.Map(vd,vf(null));});},Map2:function(vh,vi,vj){return w.CreateLazy2(function(vk){return function(vl){return bo.Map2(vh,vk,vl);};},vi,vj);},MapAsync:function(vm,vn){var vo;vo=vn.$0;return w.CreateLazy(function(){return bo.MapAsync(vm,vo(null));});},MapCached:function(vq,vr){var vs,vt;vs=vr.$0;vt=[{$:0}];return w.CreateLazy(function(){return bo.MapCached(vt,vq,vs(null));});},SnapshotOn:function(vv,vw,vx){var vy,vz,vA,vB;vy=vw.$0;vz=vx.$0;vA=bo.CreateWithValue(vv);vB=[false];return w.CreateLazy(function(){var vD,vE;vD=vy(null);vE=vz(null);if(vB[0]){return bo.SnapshotOn(vD,vE);}else{bo.When(bo.SnapshotOn(vD,vE),function(){return null;},function(){if(!vB[0]){vB[0]=true;return bo.MarkObsolete(vA);}else{return null;}});return vA;}});},UpdateWhile:function(vH,vI,vJ){var vK;vK=[vH];return w.Map2(function(vL){return function(vM){if(vL){vK[0]=vM;}return vK[0];};},vI,vJ);},get_Do:function(){return{$:0};}}),View1:$.Class({},{Apply:function(vN,vO){return w.Map2(function(vP){return function(vQ){return vP(vQ);};},vN,vO);},Bind:function(vR,vS){return w.Join(w.Map(vR,vS));},Const:function(vT){var vU;vU=bo.CreateForever(vT);return{$:0,$0:function(){return vU;}};},Sink:function(vW,vX){var vY,vZ;vY=vX.$0;vZ=function(){return bo.When(vY(null),vW,function(){return bp.Schedule(vZ);});};return bp.Schedule(vZ);}})}}}});$.OnInit(function(){a=$.Safe($$.WebSharper.Concurrency);b=$.Safe($$.Array);c=$.Safe($$.WebSharper.Seq);d=$.Safe($$.WebSharper.Arrays);e=$.Safe($$.WebSharper.UI);f=$.Safe(e.Next);g=$.Safe(f.Abbrev);h=$.Safe(g.Fresh);i=$.Safe($$.WebSharper.Collections);j=$.Safe(i.HashSetProxy);k=$.Safe(g.HashSet);l=$.Safe(g.JQueue);m=$.Safe(g.Slot1);n=$.Safe($$.WebSharper.Unchecked);o=$.Safe(f.An);p=$.Safe(f.AppendList1);q=$.Safe(f.Anims);r=$.Safe($$.requestAnimationFrame);s=$.Safe($$.WebSharper.Lazy);t=$.Safe(f.Array);u=$.Safe(f.Trans);v=$.Safe($$.WebSharper.Option);w=$.Safe(f.View);x=$.Safe(f.Client);y=$.Safe(x.Attrs);z=$.Safe(f.DomUtility);A=$.Safe(x.Attr);B=$.Safe(x.AttrProxy);C=$.Safe($$.WebSharper.List);D=$.Safe(x.AnimatedAttrNode);E=$.Safe(x.DynamicAttrNode);F=$.Safe(f.View1);G=$.Safe($$.document);H=$.Safe(x.Docs);I=$.Safe(g.Mailbox);J=$.Safe(x.Doc);K=$.Safe(x.UINextPagelet);L=$.Safe(x.Elt);M=$.Safe($$.Seq);N=$.Safe(f.String);O=$.Safe(x.CheckedInput);P=$.Safe($$.WebSharper.Operators);Q=$.Safe(C.T);R=$.Safe($$.jQuery);S=$.Safe(H.NodeSet);T=$.Safe(x.DocElemNode);U=$.Safe(H.DomNodes);V=$.Safe(f.Var1);W=$.Safe($$.RegExp);X=$.Safe(f.Var);Y=$.Safe($$.WebSharper.Html);Z=$.Safe(Y.Client);_0=$.Safe(Z.Pagelet);_1=$.Safe(Z.Attr);_2=$.Safe(Z.Tags);_3=$.Safe(f.Easing);_4=$.Safe(f.Easings);_5=$.Safe(f.FlowBuilder);_6=$.Safe(f.Flow);_7=$.Safe(f.Input);_8=$.Safe(f.DoubleInterpolation);_9=$.Safe(f.Key);_=$.Safe(f.ListModels);ba=$.Safe(f.RefImpl1);bb=$.Safe(f.ListModel);bc=$.Safe(f.Model1);bd=$.Safe(f.Model);be=$.Safe($$.WebSharper.Strings);bf=$.Safe($$.encodeURIComponent);bg=$.Safe($$.decodeURIComponent);bh=$.Safe(f.Route);bi=$.Safe(f.Routing);bj=$.Safe(f.Router1);bk=$.Safe(f.Router);bl=$.Safe(f.Trie1);bm=$.Safe(i.Dictionary);bn=$.Safe($$.window);bo=$.Safe(f.Snap1);bp=$.Safe(g.Async);bq=$.Safe($$.WebSharper.Char);br=$.Safe(f.Submitter);bs=$.Safe($$.WebSharper.Enumerator);bt=$.Safe(i.ResizeArray);bu=$.Safe(bt.ResizeArrayProxy);bv=$.Safe(i.MapModule);bw=$.Safe(i.FSharpMap);return bx=$.Safe(f.RefImpl);});$.OnLoad(function(){$.Inherit(L,J);$.Inherit(K,_0);_7.MousePosSt1();_7.MouseBtnSt1();_7.KeyListenerState();_7.ActivateKeyListener();_7.ActivateButtonListener();_4.CubicInOut();z.Doc();y.EmptyAttr();A.ValidateForm();h.counter();return;});}());

(function(){var $$=this,$=this.IntelliFactory.Runtime,a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v;$.Define($$,{WebSharper:{Testing:{Pervasives:{Do:$.Field(function(){return c.New();}),PropertyWith:function(w,x,y){var z;z=b.Test(w);return z.Run(z.PropertyWithSample(z.Yield(null),function(){return e.Make(x,100);},function(){return y;}));},PropertyWithSample:function(C,D,E){var F;F=b.Test(C);return F.Run(F.PropertyWithSample(F.Yield(null),function(){return D;},function(){return E;}));},Runner:{AddTest:function(I,J,K){var L,N;L=function(M){(I(K))(M);return M;};N=J(K);return f.Map(L,N);},AddTestAsync:function(O,P,Q){var R,V;R=function(S){return g.Delay(function(){return g.Bind((O(Q))(S),function(){return g.Return(S);});});};V=P(Q);return f.MapAsync(R,V);},Bind:function(W,X){var Y,Z,_2;if(X.$==1){Z=X.$0;Y={$:1,$0:g.Delay(function(){return g.Bind(Z,function(_1){return f.ToAsync(W(_1));});})};}else{_2=X.$0;Y=W(_2);}return Y;},Map:function(_3,_4){var _5,_6,_9;if(_4.$==1){_6=_4.$0;_5={$:1,$0:g.Delay(function(){return g.Bind(_6,function(_8){return g.Return(_3(_8));});})};}else{_9=_4.$0;_5={$:0,$0:_3(_9)};}return _5;},MapAsync:function(_,ba){var bb,bc,bf;if(ba.$==1){bc=ba.$0;bb={$:1,$0:g.Delay(function(){return g.Bind(bc,function(be){return _(be);});})};}else{bf=ba.$0;bb={$:1,$0:_(bf)};}return bb;},ToAsync:function(bf){var bg,bh,bi;if(bf.$==1){bh=bf.$0;bg=bh;}else{bi=bf.$0;bg=g.Delay(function(){return g.Return(bi);});}return bg;}},SubtestBuilder:$.Class({ApproxEqual:function(bk,bl,bm){var bn;bn=function(bo){return function(bp){var bq,br;bq=bl(bp);br=bm(bp);return bo.push(h.abs(bq-br)<0.0001,bq,br);};};return function(bs){return f.AddTest(bn,bk,bs);};},ApproxEqualAsync:function(bt,bu,bv){var bw;bw=function(bx){return function(by){return g.Delay(function(){var bA;bA=bv(by);return g.Bind(bu(by),function(bB){return g.Return(bx.push(h.abs(bB-bA)<0.0001,bB,bA));});});};};return function(bC){return f.AddTestAsync(bw,bt,bC);};},ApproxEqualMsg:function(bD,bE,bF,bG){var bH;bH=function(bI){return function(bJ){var bK,bL;bK=bE(bJ);bL=bF(bJ);return bI.push(h.abs(bK-bL)<0.0001,bK,bL,bG);};};return function(bM){return f.AddTest(bH,bD,bM);};},ApproxEqualMsgAsync:function(bN,bO,bP,bQ){var bR;bR=function(bS){return function(bT){return g.Delay(function(){var bV;bV=bP(bT);return g.Bind(bO(bT),function(bW){return g.Return(bS.push(h.abs(bW-bV)<0.0001,bW,bV,bQ));});});};};return function(bX){return f.AddTestAsync(bR,bN,bX);};},Bind:function(bY,bZ){return function(b0){return{$:1,$0:g.Delay(function(){return g.Bind(bY,function(b2){var b3,b4,b5,b6;b3=(bZ(b2))(b0);if(b3.$==1){b5=b3.$0;b4=b5;}else{b6=b3.$0;b4=g.Return(b6);}return b4;});})};};},DeepEqual:function(b7,b8,b9){var b_;b_=function(b$){return function(ca){return b$.deepEqual(b8(ca),b9(ca));};};return function(cb){return f.AddTest(b_,b7,cb);};},DeepEqualAsync:function(cc,cd,ce){var cf;cf=function(cg){return function(ch){return g.Delay(function(){var cj;cj=ce(ch);return g.Bind(cd(ch),function(ck){return g.Return(cg.deepEqual(ck,cj));});});};};return function(cl){return f.AddTestAsync(cf,cc,cl);};},DeepEqualMsg:function(cm,cn,co,cp){var cq;cq=function(cr){return function(cs){return cr.deepEqual(cn(cs),co(cs),cp);};};return function(ct){return f.AddTest(cq,cm,ct);};},DeepEqualMsgAsync:function(cu,cv,cw,cx){var cy;cy=function(cz){return function(cA){return g.Delay(function(){var cC;cC=cw(cA);return g.Bind(cv(cA),function(cD){return g.Return(cz.deepEqual(cD,cC,cx));});});};};return function(cE){return f.AddTestAsync(cy,cu,cE);};},Equal:function(cF,cG,cH){var cI;cI=function(cJ){return function(cK){var cL,cM;cL=cG(cK);cM=cH(cK);return cJ.push(i.Equals(cL,cM),cL,cM);};};return function(cN){return f.AddTest(cI,cF,cN);};},EqualAsync:function(cO,cP,cQ){var cR;cR=function(cS){return function(cT){return g.Delay(function(){var cV;cV=cQ(cT);return g.Bind(cP(cT),function(cW){return g.Return(cS.push(i.Equals(cW,cV),cW,cV));});});};};return function(cX){return f.AddTestAsync(cR,cO,cX);};},EqualMsg:function(cY,cZ,c0,c1){var c2;c2=function(c3){return function(c4){var c5,c6;c5=cZ(c4);c6=c0(c4);return c3.push(i.Equals(c5,c6),c5,c6,c1);};};return function(c7){return f.AddTest(c2,cY,c7);};},EqualMsgAsync:function(c8,c9,c_,c$){var da;da=function(db){return function(dc){return g.Delay(function(){var de;de=c_(dc);return g.Bind(c9(dc),function(df){return g.Return(db.push(i.Equals(df,de),df,de,c$));});});};};return function(dg){return f.AddTestAsync(da,c8,dg);};},Expect:function(dh,di){var dj;dj=function(dk){return function(dl){return dk.expect(di(dl));};};return function(dm){return f.AddTest(dj,dh,dm);};},For:function(dn,_do){return function(dp){var dq,dr,ds,dt,du,dv,dw,dx,dz,dA;dq=[];dr=dn.get_Data();ds={$:0,$0:undefined};dq[2]=dr;dq[1]=ds;dq[0]=1;while(dq[0]){if(dq[2].$==1){du=dq[2].$1;dv=dq[2].$0;dw=_do(dv);dx=function(){return dw(dp);};dz=dq[1];dA=f.Bind(dx,dz);dq[2]=du;dq[1]=dA;dt=void(dq[0]=1);}else{dq[0]=0;dt=void(dq[1]=dq[1]);}}return dq[1];};},For1:function(dB,dC){return this.For(e.New(dB),dC);},For2:function(dD,dE){return function(dF){var dG,dH,dI,dP;dG=dD(dF);if(dG.$==1){dI=dG.$0;dH={$:1,$0:g.Delay(function(){return g.Bind(dI,function(dK){var dL,dM,dN,dO;dL=(dE(dK))(dF);if(dL.$==1){dN=dL.$0;dM=dN;}else{dO=dL.$0;dM=g.Return(dO);}return dM;});})};}else{dP=dG.$0;dH=(dE(dP))(dF);}return dH;};},ForEach:function(dQ,dR,dS){return function(dT){var dU,d7,d9;dU=function(dV,dW,dX){var dY,dZ,d0,d1,d2;if(dX.$==1){dZ=dX.$1;d0=dX.$0;d1=dV(d0);d2=function(d3){var d4,d6;d4=function(){return d3;};d6=d1(dT);return f.Map(d4,d6);};dY=dU(dV,f.Bind(d2,dW),dZ);}else{dY=dW;}return dY;};d7=function(d8){return dU(dS(d8),{$:0,$0:d8},j.ofSeq(dR(d8)));};d9=dQ(dT);return f.Bind(d7,d9);};},IsFalse:function(d_,d$){var ea;ea=function(eb){return function(ec){return eb.ok(!d$(ec));};};return function(ed){return f.AddTest(ea,d_,ed);};},IsFalseAsync:function(ee,ef){var eg;eg=function(eh){return function(ei){return g.Delay(function(){return g.Bind(ef(ei),function(ek){return g.Return(eh.ok(!ek));});});};};return function(el){return f.AddTestAsync(eg,ee,el);};},IsFalseAsync1:function(em,en,eo){var ep;ep=function(eq){return function(er){return g.Delay(function(){return g.Bind(en(er),function(et){return g.Return(eq.ok(!et,eo));});});};};return function(eu){return f.AddTestAsync(ep,em,eu);};},IsFalseMsg:function(ev,ew,ex){var ey;ey=function(ez){return function(eA){return ez.ok(!ew(eA),ex);};};return function(eB){return f.AddTest(ey,ev,eB);};},IsTrue:function(eC,eD){var eE;eE=function(eF){return function(eG){return eF.ok(eD(eG));};};return function(eH){return f.AddTest(eE,eC,eH);};},IsTrueAsync:function(eI,eJ){var eK;eK=function(eL){return function(eM){return g.Delay(function(){return g.Bind(eJ(eM),function(eO){return g.Return(eL.ok(eO));});});};};return function(eP){return f.AddTestAsync(eK,eI,eP);};},IsTrueMsg:function(eQ,eR,eS){var eT;eT=function(eU){return function(eV){return eU.ok(eR(eV),eS);};};return function(eW){return f.AddTest(eT,eQ,eW);};},IsTrueMsgAsync:function(eX,eY,eZ){var e0;e0=function(e1){return function(e2){return g.Delay(function(){return g.Bind(eY(e2),function(e4){return g.Return(e1.ok(e4,eZ));});});};};return function(e5){return f.AddTestAsync(e0,eX,e5);};},JsEqual:function(e6,e7,e8){var e9;e9=function(e_){return function(e$){return e_.equal(e7(e$),e8(e$));};};return function(fa){return f.AddTest(e9,e6,fa);};},JsEqualAsync:function(fb,fc,fd){var fe;fe=function(ff){return function(fg){return g.Delay(function(){var fi;fi=fd(fg);return g.Bind(fc(fg),function(fj){return g.Return(ff.equal(fj,fi));});});};};return function(fk){return f.AddTestAsync(fe,fb,fk);};},JsEqualMsg:function(fl,fm,fn,fo){var fp;fp=function(fq){return function(fr){return fq.equal(fm(fr),fn(fr),fo);};};return function(fs){return f.AddTest(fp,fl,fs);};},JsEqualMsgAsync:function(ft,fu,fv,fw){var fx;fx=function(fy){return function(fz){return g.Delay(function(){var fB;fB=fv(fz);return g.Bind(fu(fz),function(fC){return g.Return(fy.equal(fC,fB,fw));});});};};return function(fD){return f.AddTestAsync(fx,ft,fD);};},NotApproxEqual:function(fE,fF,fG){var fH;fH=function(fI){return function(fJ){var fK,fL;fK=fF(fJ);fL=fG(fJ);return fI.push(h.abs(fK-fL)>0.0001,fK,fL);};};return function(fM){return f.AddTest(fH,fE,fM);};},NotApproxEqualAsync:function(fN,fO,fP){var fQ;fQ=function(fR){return function(fS){return g.Delay(function(){var fU;fU=fP(fS);return g.Bind(fO(fS),function(fV){return g.Return(fR.push(h.abs(fV-fU)>0.0001,fV,fU));});});};};return function(fW){return f.AddTestAsync(fQ,fN,fW);};},NotApproxEqualMsg:function(fX,fY,fZ,f0){var f1;f1=function(f2){return function(f3){var f4,f5;f4=fY(f3);f5=fZ(f3);return f2.push(h.abs(f4-f5)>0.0001,f4,f5,f0);};};return function(f6){return f.AddTest(f1,fX,f6);};},NotApproxEqualMsgAsync:function(f7,f8,f9,f_){var f$;f$=function(ga){return function(gb){return g.Delay(function(){var gd;gd=f9(gb);return g.Bind(f8(gb),function(ge){return g.Return(ga.push(h.abs(ge-gd)>0.0001,ge,gd,f_));});});};};return function(gf){return f.AddTestAsync(f$,f7,gf);};},NotEqual:function(gg,gh,gi){var gj;gj=function(gk){return function(gl){var gm,gn;gm=gh(gl);gn=gi(gl);return gk.push(!i.Equals(gm,gn),gm,gn);};};return function(go){return f.AddTest(gj,gg,go);};},NotEqualAsync:function(gp,gq,gr){var gs;gs=function(gt){return function(gu){return g.Delay(function(){var gw;gw=gr(gu);return g.Bind(gq(gu),function(gx){return g.Return(gt.push(!i.Equals(gx,gw),gx,gw));});});};};return function(gy){return f.AddTestAsync(gs,gp,gy);};},NotEqualMsg:function(gz,gA,gB,gC){var gD;gD=function(gE){return function(gF){var gG,gH;gG=gA(gF);gH=gB(gF);return gE.push(!i.Equals(gG,gH),gG,gH,gC);};};return function(gI){return f.AddTest(gD,gz,gI);};},NotEqualMsgAsync:function(gJ,gK,gL,gM){var gN;gN=function(gO){return function(gP){return g.Delay(function(){var gR;gR=gL(gP);return g.Bind(gK(gP),function(gS){return g.Return(gO.push(!i.Equals(gS,gR),gS,gR,gM));});});};};return function(gT){return f.AddTestAsync(gN,gJ,gT);};},PropertyWithSample:function(gU,gV,gW){return function(gX){var gY,g$,hc;gY=function(gZ,g0,g1){var g2,g3,g4,g5,g6;if(g1.$==1){g3=g1.$1;g4=g1.$0;g5=gZ(g4);g6=function(g7){var g8,g_;g8=function(){return g7;};g_=g5(gX);return f.Map(g8,g_);};g2=gY(gZ,f.Bind(g6,g0),g3);}else{g2=g0;}return g2;};g$=function(ha){var hb;hb=gV(ha);return gY(gW(ha),{$:0,$0:ha},hb.get_Data());};hc=gU(gX);return f.Bind(g$,hc);};},Raises:function(hd,he){var hf;hf=function(hg){return function(hh){var hi,hj,hk;try{hj=he(hh);hi=hg.ok(false,"Expected raised exception");}catch(hk){hi=hg.ok(true);}return hi;};};return function(hl){return f.AddTest(hf,hd,hl);};},RaisesAsync:function(hm,hn){var ho;ho=function(hp){return function(hq){var hr;hr=hn(hq);return g.Delay(function(){return g.TryWith(g.Delay(function(){return g.Bind(hr,function(){return g.Return(hp.ok(false,"Expected raised exception"));});}),function(){return g.Return(hp.ok(true));});});};};return function(hw){return f.AddTestAsync(ho,hm,hw);};},RaisesMsg:function(hx,hy,hz){var hA;hA=function(hB){return function(hC){var hD,hE,hF;try{hE=hy(hC);hD=hB.ok(false,hz);}catch(hF){hD=hB.ok(true,hz);}return hD;};};return function(hG){return f.AddTest(hA,hx,hG);};},RaisesMsgAsync:function(hH,hI,hJ){var hK;hK=function(hL){return function(hM){var hN;hN=hI(hM);return g.Delay(function(){return g.TryWith(g.Delay(function(){return g.Bind(hN,function(){return g.Return(hL.ok(false,hJ));});}),function(){return g.Return(hL.ok(true,hJ));});});};};return function(hS){return f.AddTestAsync(hK,hH,hS);};},Return:function(hT){return function(){return{$:0,$0:hT};};},RunSubtest:function(hV,hW){return function(hX){var hY,h0;hY=function(hZ){return(hW(hZ))(hX);};h0=hV(hX);return f.Bind(hY,h0);};},Yield:function(h1){return function(){return{$:0,$0:h1};};},Zero:function(){return function(){return{$:0,$0:undefined};};}},{New:function(){return $.New(this,{});}}),Test:function(h4){return k.New(h4);},TestBuilder:$.Class({Run:function(h5){return l.test(this.name,function(h6){var h7,h8,h9,h_,h$,ia,ih;try{h8=h5(h6);if(h8.$==1){h_=h8.$0;h$=h6.async();ia=g.Delay(function(){return g.TryFinally(g.Delay(function(){return g.TryWith(g.Delay(function(){return g.Bind(h_,function(){return g.Return(null);});}),function(_if){return g.Return(h6.equal(_if,null,"Test threw an unexpected asynchronous exception"));});}),function(){return h$(null);});});h9=g.Start(ia,{$:0});}else{h9=null;}h7=h9;}catch(ih){h7=h6.equal(ih,null,"Test threw an unexpected synchronous exception");}return h7;});}},{New:function(ii){var ij;ij=$.New(this,c.New());ij.name=ii;return ij;}}),TestCategory:function(ik){return m.New(ik);},TestCategoryBuilder:$.Class({},{New:function(il){var im;im=$.New(this,{});im.name=il;return im;}})},Random:{Anything:$.Field(function(){return d.MixManyWithoutBases(d.allTypes());}),ArrayOf:function(_in){return{Base:[[]],Next:function(){var ip;ip=d.Natural().Next.call(null,null)%100;return n.init(ip,function(){return _in.Next.call(null,null);});}};},Boolean:$.Field(function(){return{Base:[true,false],Next:function(){return d.StandardUniform().Next.call(null,null)>0.5;}};}),Choose:function(is,it){var iu,iw,ix;iu=function(iv){return n.get(is,iv);};iw=d.Within(0,n.length(is)-1);ix=d.Map(iu,iw);return{Base:[],Next:function(){var iz;iz=ix.Next.call(null,null);return it(iz).Next.call(null,null);}};},Const:function(iA){return{Base:[iA],Next:function(){return iA;}};},Exponential:function(iC){return{Base:[],Next:function(){var iE;iE=d.StandardUniform().Next.call(null,null);return-h.log(1-iE)/iC;}};},Float:$.Field(function(){return{Base:[0],Next:function(){var iG;iG=d.Boolean().Next.call(null,null)?1:-1;return iG*d.Exponential(0.1).Next.call(null,null);}};}),FloatExhaustive:$.Field(function(){return{Base:[0,o,p,-p],Next:function(){return d.Float().Next.call(null,null);}};}),FloatWithin:function(iI,iJ){return{Base:[iI,iJ],Next:function(){return iI+(iJ-iI)*h.random();}};},Implies:function(iL,iM){return!iL?true:iM;},Imply:function(iN,iO){return d.Implies(iN,iO);},Int:$.Field(function(){return{Base:[0,1,-1],Next:function(){return h.round(d.Float().Next.call(null,null))<<0;}};}),ListOf:function(iQ){var iR,iT;iR=function(iS){return j.ofArray(iS);};iT=d.ArrayOf(iQ);return d.Map(iR,iT);},Map:function(iU,iV){var iW;iW=iV.Next;return{Base:n.map(iU,iV.Base),Next:function(iX){return iU(iW(iX));}};},Mix:function(iY,iZ){var i0;i0=[false];return{Base:iY.Base.concat(iZ.Base),Next:function(){i0[0]=!i0[0];return i0[0]?iY.Next.call(null,null):iZ.Next.call(null,null);}};},MixMany:function(i2){var i5;i5=[0];return{Base:n.concat(q.toArray(q.delay(function(){return q.map(function(i4){return i4.Base;},i2);}))),Next:function(){i5[0]=(i5[0]+1)%n.length(i2);return n.get(i2,i5[0]).Next.call(null,null);}};},MixManyWithoutBases:function(i7){var i8;i8=[0];return{Base:[],Next:function(){i8[0]=(i8[0]+1)%n.length(i7);return n.get(i7,i8[0]).Next.call(null,null);}};},Natural:$.Field(function(){var i_;i_=d.Int().Next;return{Base:[0,1],Next:function(i$){var ja;ja=i_(i$);return h.abs(ja);}};}),OneOf:function(jb){var jc;jc=d.Within(1,n.length(jb));return{Base:jb,Next:function(){return n.get(jb,jc.Next.call(null,null)-1);}};},OptionOf:function(je){return d.Mix(d.Const({$:0}),d.Map(function(jf){return{$:1,$0:jf};},je));},Sample:$.Class({get_Data:function(){return this.data;}},{Make:function(jg,jh){return e.New1(jg,jh);},New:function(ji){return $.New(this,e.New1(ji,100));},New1:function(jj,jk){var jl;jl=q.toList(q.delay(function(){return q.append(q.map(function(jn){return n.get(jj.Base,jn);},r.range(0,n.length(jj.Base)-1)),q.delay(function(){return q.map(function(){return jj.Next.call(null,null);},r.range(1,jk));}));}));return $.New(this,e.New4(jl));},New4:function(jq){var jr;jr=$.New(this,{});jr.data=jq;return jr;}}),StandardUniform:$.Field(function(){return{Base:[],Next:function(){return h.random();}};}),String:$.Field(function(){return{Base:[""],Next:function(){var ju,jv;ju=d.Natural().Next.call(null,null)%100;jv=n.init(ju,function(){return d.Int().Next.call(null,null)%256;});return s.fromCharCode.apply(undefined,jv);}};}),StringExhaustive:$.Field(function(){return{Base:[null,""],Next:d.String().Next};}),Tuple2Of:function(jx,jy){return{Base:q.toArray(q.delay(function(){return q.collect(function(jA){return q.map(function(jB){return[jA,jB];},jy.Base);},jx.Base);})),Next:function(){return[jx.Next.call(null,null),jy.Next.call(null,null)];}};},Tuple3Of:function(jD,jE,jF){return{Base:q.toArray(q.delay(function(){return q.collect(function(jH){return q.collect(function(jI){return q.map(function(jJ){return[jH,jI,jJ];},jF.Base);},jE.Base);},jD.Base);})),Next:function(){return[jD.Next.call(null,null),jE.Next.call(null,null),jF.Next.call(null,null)];}};},Within:function(jL,jM){return{Base:[jL,jM],Next:function(){return d.Natural().Next.call(null,null)%(jM-jL)+jL;}};},allTypes:$.Field(function(){var jO,jP,jY;jO=[d.Int(),d.Float(),d.Boolean(),d.String()];jP=function(jQ){return q.toArray(q.delay(function(){return q.collect(function(jS){return q.append(q.collect(function(jT){return q.append([d.Tuple2Of(jS,jT)],q.delay(function(){return q.map(function(jV){return d.Tuple3Of(jS,jT,jV);},jQ);}));},jQ),q.delay(function(){return q.append([d.ListOf(jS)],q.delay(function(){return[d.ArrayOf(jS)];}));}));},jQ);}));};jY=jP(jO);return jO.concat(jY);})},Runner:{RunnerControl:$.Class({get_Body:function(){return u.New();}}),RunnerControlBody:$.Class({ReplaceInDom:function(jZ){var j0,j1,j2,j3,j4;j0=v.createElement("div");j0.setAttribute("id","qunit-fixture");j1=v.createElement("div");j1.setAttribute("id","qunit");j2=jZ.parentNode;j3=j2.replaceChild(j0,jZ);j4=j2.insertBefore(j1,j0);return;}},{New:function(){return $.New(this,{});}})}}}});$.OnInit(function(){a=$.Safe($$.WebSharper.Testing);b=$.Safe(a.Pervasives);c=$.Safe(b.SubtestBuilder);d=$.Safe(a.Random);e=$.Safe(d.Sample);f=$.Safe(b.Runner);g=$.Safe($$.WebSharper.Concurrency);h=$.Safe($$.Math);i=$.Safe($$.WebSharper.Unchecked);j=$.Safe($$.WebSharper.List);k=$.Safe(b.TestBuilder);l=$.Safe($$.QUnit);m=$.Safe(b.TestCategoryBuilder);n=$.Safe($$.WebSharper.Arrays);o=$.Safe($$.NaN);p=$.Safe($$.Infinity);q=$.Safe($$.WebSharper.Seq);r=$.Safe($$.WebSharper.Operators);s=$.Safe($$.String);t=$.Safe(a.Runner);u=$.Safe(t.RunnerControlBody);return v=$.Safe($$.document);});$.OnLoad(function(){$.Inherit(k,c);d.allTypes();d.StringExhaustive();d.String();d.StandardUniform();d.Natural();d.Int();d.FloatExhaustive();d.Float();d.Boolean();d.Anything();b.Do();return;});}());

(function(){var $$=this,$=this.IntelliFactory.Runtime,a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E;$.Define($$,{WebSharper:{Control:{Disposable:{Of:function(F){return{Dispose:F};}},Event:{Event:$.Class({AddHandler:function(G){return this.Handlers.Add(G);},RemoveHandler:function(H){var I,K,L,N,O;I=function(J){return a.Equals(H,J);};K=this.Handlers;L=function(M){return K.RemoveAt(M);};N=this.Handlers;O=b.tryFindIndex(I,N);return c.iter(L,O);},Subscribe:function(P){var Q,T=this;Q=function(R){return P.OnNext(R);};this.AddHandler(Q);return e.Of(function(){return T.RemoveHandler(Q);});},Trigger:function(U){var V,W,X;V=this.Handlers.ToArray();for(W=0;W<=V.length-1;W++){X=f.get(V,W);X(U);}return;}})},EventModule:{Choose:function(Y,Z){var _0;_0=g.New();h.addListener(Z,function(_1){var _2,_3,_4;_2=Y(_1);if(_2.$==0){_3=null;}else{_4=_2.$0;_3=_0.event.Trigger(_4);}return _3;});return _0.event;},Filter:function(_5,_6){var _7;_7=$.New(j,{Handlers:m.New2()});h.addListener(_6,function(_8){return _5(_8)?_7.Trigger(_8):null;});return _7;},Map:function(_9,_){var ba;ba=$.New(j,{Handlers:m.New2()});h.addListener(_,function(bb){return ba.Trigger(_9(bb));});return ba;},Merge:function(bb,bc){var bd;bd=$.New(j,{Handlers:m.New2()});h.addListener(bb,function(be){return bd.Trigger(be);});h.addListener(bc,function(bf){return bd.Trigger(bf);});return bd;},Pairwise:function(bg){var bh,bi;bh=[{$:0}];bi=$.New(j,{Handlers:m.New2()});h.addListener(bg,function(bj){var bk,bl,bm;bk=bh[0];if(bk.$==1){bm=bk.$0;bh[0]={$:1,$0:bj};bl=bi.Trigger([bm,bj]);}else{bl=void(bh[0]={$:1,$0:bj});}return bl;});return bi;},Partition:function(bn,bo){return[n.Filter(bn,bo),n.Filter(function(bp){var bq;bq=bn(bp);return!bq;},bo)];},Scan:function(br,bs,bt){var bu,bv;bu=[bs];bv=function(bw){bu[0]=(br(bu[0]))(bw);return bu[0];};return n.Map(bv,bt);},Split:function(bx,by){var bz,bE;bz=function(bA){var bB,bC,bD;bB=bx(bA);if(bB.$==0){bD=bB.$0;bC={$:1,$0:bD};}else{bC={$:0};}return bC;};bE=function(bF){var bG,bH,bI;bG=bx(bF);if(bG.$==1){bI=bG.$0;bH={$:1,$0:bI};}else{bH={$:0};}return bH;};return[n.Choose(bz,by),n.Choose(bE,by)];}},FSharpEvent:$.Class({},{New:function(){var bJ;bJ=$.New(this,{});bJ.event=$.New(j,{Handlers:m.New2()});return bJ;}}),HotStream:{HotStream:$.Class({Subscribe:function(bK){var bL;this.Latest[0].$==1?bK.OnNext(this.Latest[0].$0):null;bL=h.subscribeTo(this.Event.event,function(bM){return bK.OnNext(bM);});return bL;},Trigger:function(bN){this.Latest[0]={$:1,$0:bN};return this.Event.event.Trigger(bN);}},{New:function(){return $.New(p,{Latest:[{$:0}],Event:g.New()});}})},MailboxProcessor:$.Class({PostAndAsyncReply:function(bO,bP){var bR=this;return q.Delay(function(){return q.Bind(bR.PostAndTryAsyncReply(bO,bP),function(bS){var bT,bU;if(bS.$==1){bU=bS.$0;bT=bU;}else{bT=r.Raise(new s("TimeoutException"));}return q.Return(bT);});});},PostAndTryAsyncReply:function(bV,bW){var bX,bY,b6=this;bX=r.DefaultArg(bW,this.get_DefaultTimeout());bY=function(bZ){var b0,b1,b2,b3,b4,b7,b8,b$;b0=bZ[0];b1=bZ[1];b2=bZ[2];if(bX<0){b4=bV(function(b5){return b0({$:1,$0:b5});});b6.mailbox.AddLast(b4);b3=b6.resume();}else{b7=[true];b8=bV(function(b9){var b_;if(b7[0]){b7[0]=false;b_=b0({$:1,$0:b9});}else{b_=null;}return b_;});b6.mailbox.AddLast(b8);b6.resume();b$=t(function(){var cb;if(b7[0]){b7[0]=false;cb=b0({$:0});}else{cb=null;}return cb;},bX);b3=void b$;}return b3;};return q.FromContinuations(bY);},Receive:function(cc){var ce=this;return q.Delay(function(){return q.Bind(ce.TryReceive(cc),function(cf){var cg,ch;if(cf.$==1){ch=cf.$0;cg=ch;}else{cg=r.Raise(new s("TimeoutException"));}return q.Return(cg);});});},Scan:function(ci,cj){var cl=this;return q.Delay(function(){return q.Bind(cl.TryScan(ci,cj),function(cm){var cn,co;if(cm.$==1){co=cm.$0;cn=co;}else{cn=r.Raise(new s("TimeoutException"));}return q.Return(cn);});});},Start:function(){var cp,cq,ct=this;if(this.started){cp=r.FailWith("The MailboxProcessor has already been started.");}else{this.started=true;cq=q.Delay(function(){return q.TryWith(q.Delay(function(){return q.Bind(ct.initial.call(null,ct),function(){return q.Return(null);});}),function(cv){ct.errorEvent.event.Trigger(cv);return q.Return(null);});});cp=ct.startAsync(cq);}return cp;},TryReceive:function(cw){var cx,cy,cD=this;cx=r.DefaultArg(cw,this.get_DefaultTimeout());cy=function(cz){var cA,cB,cC,cE,cF,cG,cJ,cK,cN,cR;cA=cz[0];cB=cz[1];cC=cz[2];if(a.Equals(cD.mailbox.get_First(),null)){if(cx<0){cG=q.Delay(function(){var cI;cI=cD.dequeue();cA({$:1,$0:cI});return q.Return(null);});cF=void(cD.savedCont={$:1,$0:cG});}else{cJ=[true];cK=t(function(){var cM;if(cJ[0]){cJ[0]=false;cD.savedCont={$:0};cM=cA({$:0});}else{cM=null;}return cM;},cx);cN=q.Delay(function(){var cP,cQ;if(cJ[0]){cJ[0]=false;u(cK);cQ=cD.dequeue();cA({$:1,$0:cQ});cP=q.Return(null);}else{cP=q.Return(null);}return cP;});cF=void(cD.savedCont={$:1,$0:cN});}cE=cF;}else{cR=cD.dequeue();cE=cA({$:1,$0:cR});}return cE;};return q.FromContinuations(cy);},TryScan:function(cS,cT){var cU,cZ=this;cU=r.DefaultArg(cT,this.get_DefaultTimeout());return q.Delay(function(){var cW,c3,c4,c5,c7;cW=function(){var cY,c0,c1,c2;cY=cZ.mailbox.get_First();c0={$:0};while(!a.Equals(cY,null)){c1=cS(cY.v);if(c1.$==0){c2=cY=cY.n;}else{cZ.mailbox.Remove(cY);cY=null;c2=c0=c1;}}return c0;};c3=cW(null);if(c3.$==1){c5=c3.$0;c4=q.Bind(c5,function(c6){return q.Return({$:1,$0:c6});});}else{c7=function(c8){var c9,c_,c$,da,db,dj,dk,dn;c9=c8[0];c_=c8[1];c$=c8[2];if(cU<0){db=function(){var dd;dd=q.Delay(function(){var df,dg,dh;df=cS(cZ.mailbox.get_First().v);if(df.$==1){dh=df.$0;cZ.mailbox.RemoveFirst();dg=q.Bind(dh,function(di){c9({$:1,$0:di});return q.Return(null);});}else{db(null);dg=q.Return(null);}return dg;});cZ.savedCont={$:1,$0:dd};return;};da=db(null);}else{dj=[true];dk=t(function(){var dm;if(dj[0]){dj[0]=false;cZ.savedCont={$:0};dm=c9({$:0});}else{dm=null;}return dm;},cU);dn=function(){var dp;dp=q.Delay(function(){var dr,ds,dt;dr=cS(cZ.mailbox.get_First().v);if(dr.$==1){dt=dr.$0;cZ.mailbox.RemoveFirst();ds=q.Bind(dt,function(du){var dv;if(dj[0]){dj[0]=false;u(dk);c9({$:1,$0:du});dv=q.Return(null);}else{dv=q.Return(null);}return dv;});}else{dn(null);ds=q.Return(null);}return ds;});cZ.savedCont={$:1,$0:dp};return;};da=dn(null);}return da;};c4=q.FromContinuations(c7);}return c4;});},dequeue:function(){var dw;dw=this.mailbox.get_First().v;this.mailbox.RemoveFirst();return dw;},get_CurrentQueueLength:function(){return this.mailbox.get_Count();},get_DefaultTimeout:function(){return this["DefaultTimeout@"];},get_Error:function(){return this.errorEvent.event;},resume:function(){var dx,dy,dz;dx=this.savedCont;if(dx.$==1){dz=dx.$0;this.savedCont={$:0};dy=this.startAsync(dz);}else{dy=null;}return dy;},set_DefaultTimeout:function(dA){this["DefaultTimeout@"]=dA;return;},startAsync:function(dB){return q.Start(dB,this.token);}},{New:function(dC,dD){var dE,dF,dG,dH,dI;dE=$.New(this,{});dE.initial=dC;dE.token=dD;dE.started=false;dE.errorEvent=g.New();dE.mailbox=w.New();dE.savedCont={$:0};dF=dE.token;if(dF.$==0){dG=null;}else{dH=dF.$0;dI=q.Register(dH,function(){return function(){return dE.resume();}();});dG=void dI;}dE["DefaultTimeout@"]=-1;return dE;},Start:function(dL,dM){var dN;dN=x.New(dL,dM);dN.Start();return dN;}}),Observable:{Aggregate:function(dO,dP,dQ){var dR;dR=function(dS){var dT,dU,dZ;dT=[dP];dU=function(dV){return y.Protect(function(){return(dQ(dT[0]))(dV);},function(dX){dT[0]=dX;return dS.OnNext(dX);},function(dY){return dS.OnError(dY);});};dZ=z.New(dU,function(d0){return dS.OnError(d0);},function(){return dS.OnCompleted();});return dO.Subscribe(dZ);};return y.New(dR);},Choose:function(d2,d3){var d4;d4=function(d5){var d6,eb;d6=function(d7){var d9;d9=function(d_){return d5.OnNext(d_);};return y.Protect(function(){return d2(d7);},function(d$){return c.iter(d9,d$);},function(ea){return d5.OnError(ea);});};eb=z.New(d6,function(ec){return d5.OnError(ec);},function(){return d5.OnCompleted();});return d3.Subscribe(eb);};return y.New(d4);},CombineLatest:function(ee,ef,eg){var eh;eh=function(ei){var ej,ek,el,ev,ex,eA,eC,eF,eG;ej=[{$:0}];ek=[{$:0}];el=function(){var en,eo,ep,eq,er;en=[ej[0],ek[0]];if(en[0].$==1){if(en[1].$==1){eq=en[0].$0;er=en[1].$0;ep=y.Protect(function(){return(eg(eq))(er);},function(et){return ei.OnNext(et);},function(eu){return ei.OnError(eu);});}else{ep=null;}eo=ep;}else{eo=null;}return eo;};ev=function(ew){ej[0]={$:1,$0:ew};return el(null);};ex=z.New(ev,function(){},function(){});eA=function(eB){ek[0]={$:1,$0:eB};return el(null);};eC=z.New(eA,function(){},function(){});eF=ee.Subscribe(ex);eG=ef.Subscribe(eC);return e.Of(function(){eF.Dispose();return eG.Dispose();});};return y.New(eh);},Concat:function(eI,eJ){var eK;eK=function(eL){var eM,eN,eS;eM=[{$:0}];eN=eI.Subscribe(z.New(function(eO){return eL.OnNext(eO);},function(){},function(){var eR;eR=eJ.Subscribe(eL);eM[0]={$:1,$0:eR};}));eS=function(){eM[0].$==1?eM[0].$0.Dispose():null;return eN.Dispose();};return e.Of(eS);};return y.New(eK);},Drop:function(eU,eV){var eW;eW=function(eX){var eY,eZ,e1;eY=[0];eZ=function(e0){A.incr(eY);return eY[0]>eU?eX.OnNext(e0):null;};e1=z.New(eZ,function(e2){return eX.OnError(e2);},function(){return eX.OnCompleted();});return eV.Subscribe(e1);};return y.New(eW);},Filter:function(e4,e5){var e6;e6=function(e7){var e8,fd;e8=function(e9){var e$;e$=function(fa){return e7.OnNext(fa);};return y.Protect(function(){return e4(e9)?{$:1,$0:e9}:{$:0};},function(fb){return c.iter(e$,fb);},function(fc){return e7.OnError(fc);});};fd=z.New(e8,function(fe){return e7.OnError(fe);},function(){return e7.OnCompleted();});return e5.Subscribe(fd);};return y.New(e6);},Map:function(fg,fh){var fi;fi=function(fj){var fk,fp;fk=function(fl){return y.Protect(function(){return fg(fl);},function(fn){return fj.OnNext(fn);},function(fo){return fj.OnError(fo);});};fp=z.New(fk,function(fq){return fj.OnError(fq);},function(){return fj.OnCompleted();});return fh.Subscribe(fp);};return y.New(fi);},Merge:function(fs,ft){var fu;fu=function(fv){var fw,fx,fy,fC,fD,fH;fw=[false];fx=[false];fy=z.New(function(fz){return fv.OnNext(fz);},function(){},function(){fw[0]=true;return(fw[0]?fx[0]:false)?fv.OnCompleted():null;});fC=fs.Subscribe(fy);fD=z.New(function(fE){return fv.OnNext(fE);},function(){},function(){fx[0]=true;return(fw[0]?fx[0]:false)?fv.OnCompleted():null;});fH=ft.Subscribe(fD);return e.Of(function(){fC.Dispose();return fH.Dispose();});};return y.New(fu);},Never:function(){return y.New(function(){return e.Of(function(){});});},New:function(fL){return $.New(B,{Subscribe1:fL});},Observable:$.Class({Subscribe:function(fM){return this.Subscribe1.call(null,fM);}}),Of:function(fN){return y.New(function(fO){return e.Of(fN(function(fP){return fO.OnNext(fP);}));});},Protect:function(fQ,fR,fS){var fT,fU,fV,fW,fX,fY;try{fU={$:0,$0:fQ(null)};}catch(fV){fU={$:1,$0:fV};}fT=fU;if(fT.$==1){fX=fT.$0;fW=fS(fX);}else{fY=fT.$0;fW=fR(fY);}return fW;},Range:function(fZ,f0){var f1;f1=function(f2){var f3;for(f3=fZ;f3<=fZ+f0;f3++){f2.OnNext(f3);}return e.Of(function(){});};return y.New(f1);},Return:function(f5){var f6;f6=function(f7){f7.OnNext(f5);f7.OnCompleted();return e.Of(function(){});};return y.New(f6);},SelectMany:function(f9){return y.New(function(f_){var f$,gb;f$=[function(){}];gb=h.subscribeTo(f9,function(gc){var gd;gd=h.subscribeTo(gc,function(ge){return f_.OnNext(ge);});f$[0]=function(){f$[0].call(null,null);return gd.Dispose();};return;});return e.Of(function(){f$[0].call(null,null);return gb.Dispose();});});},Sequence:function(gh){var gi;gi=function(gj){var gk,gl,gm,gn;if(gj.$==1){gl=gj.$1;gm=gj.$0;gn=gi(gl);gk=y.CombineLatest(gm,gn,function(go){return function(gp){return $.New(D,{$:1,$0:go,$1:gp});};});}else{gk=y.Return($.New(D,{$:0}));}return gk;};return gi(C.ofSeq(gh));},Switch:function(gq){return y.New(function(gr){var gs,gt,gu;gs=[0];gt=[{$:0}];gu=h.subscribeTo(gq,function(gv){var gw,gx,gz;A.incr(gs);gt[0].$==1?gt[0].$0.Dispose():null;gw=gs[0];gx=h.subscribeTo(gv,function(gy){return gw===gs[0]?gr.OnNext(gy):null;});gz={$:1,$0:gx};gt[0]=gz;return;});return gu;});}},ObservableModule:{Pairwise:function(gA){var gB;gB=function(gC){var gD,gE,gJ;gD=[{$:0}];gE=function(gF){var gG,gH,gI;gG=gD[0];if(gG.$==1){gI=gG.$0;gH=gC.OnNext([gI,gF]);}else{gH=null;}gD[0]={$:1,$0:gF};return;};gJ=z.New(gE,function(gK){return gC.OnError(gK);},function(){return gC.OnCompleted();});return gA.Subscribe(gJ);};return y.New(gB);},Partition:function(gM,gN){return[y.Filter(gM,gN),y.Filter(function(gO){var gP;gP=gM(gO);return!gP;},gN)];},Scan:function(gQ,gR,gS){var gT;gT=function(gU){var gV,gW,g1;gV=[gR];gW=function(gX){return y.Protect(function(){return(gQ(gV[0]))(gX);},function(gZ){gV[0]=gZ;return gU.OnNext(gZ);},function(g0){return gU.OnError(g0);});};g1=z.New(gW,function(g2){return gU.OnError(g2);},function(){return gU.OnCompleted();});return gS.Subscribe(g1);};return y.New(gT);},Split:function(g4,g5){var g6,g$,ha,hf;g6=function(g7){var g8,g9,g_;g8=g4(g7);if(g8.$==0){g_=g8.$0;g9={$:1,$0:g_};}else{g9={$:0};}return g9;};g$=y.Choose(g6,g5);ha=function(hb){var hc,hd,he;hc=g4(hb);if(hc.$==1){he=hc.$0;hd={$:1,$0:he};}else{hd={$:0};}return hd;};hf=y.Choose(ha,g5);return[g$,hf];}},Observer:{New:function(hg,hh,hi){return $.New(E,{onNext:hg,onError:hh,onCompleted:hi});},Observer:$.Class({OnCompleted:function(){return this.onCompleted.call(null,null);},OnError:function(hj){return this.onError.call(null,hj);},OnNext:function(hk){return this.onNext.call(null,hk);}}),Of:function(hl){return $.New(E,{onNext:function(hm){return hl(hm);},onError:function(hn){return r.Raise(hn);},onCompleted:function(){return null;}});}}}}});$.OnInit(function(){a=$.Safe($$.WebSharper.Unchecked);b=$.Safe($$.WebSharper.Seq);c=$.Safe($$.WebSharper.Option);d=$.Safe($$.WebSharper.Control);e=$.Safe(d.Disposable);f=$.Safe($$.WebSharper.Arrays);g=$.Safe(d.FSharpEvent);h=$.Safe($$.WebSharper.Util);i=$.Safe(d.Event);j=$.Safe(i.Event);k=$.Safe($$.WebSharper.Collections);l=$.Safe(k.ResizeArray);m=$.Safe(l.ResizeArrayProxy);n=$.Safe(d.EventModule);o=$.Safe(d.HotStream);p=$.Safe(o.HotStream);q=$.Safe($$.WebSharper.Concurrency);r=$.Safe($$.WebSharper.Operators);s=$.Safe($$.Error);t=$.Safe($$.setTimeout);u=$.Safe($$.clearTimeout);v=$.Safe(k.LinkedList);w=$.Safe(v.T);x=$.Safe(d.MailboxProcessor);y=$.Safe(d.Observable);z=$.Safe(d.Observer);A=$.Safe($$.WebSharper.Ref);B=$.Safe(y.Observable);C=$.Safe($$.WebSharper.List);D=$.Safe(C.T);return E=$.Safe(z.Observer);});$.OnLoad(function(){return;});}());

(function(){for(var i=0,t=["webkit","moz"],n=0;n<t.length&&!window.requestAnimationFrame;++n)window.requestAnimationFrame=window[t[n]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[t[n]+"CancelAnimationFrame"]||window[t[n]+"CancelRequestAnimationFrame"];window.requestAnimationFrame||(window.requestAnimationFrame=function(n){var t=(new Date).getTime(),r=Math.max(0,16-(t-i)),u=window.setTimeout(function(){n(t+r)},r);return i=t+r,u});window.cancelAnimationFrame||(window.cancelAnimationFrame=function(n){clearTimeout(n)})})();
(function(){var $$=this,$=this.IntelliFactory.Runtime,a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u;$.Define($$,{PrettyTodo:{Client:{Main:$.Field(function(){return d.RunById("main",f.TodoApp());}),Pages:$.Field(function(){var v,x;v=function(w){return w.$==1?g.ofArray(["active"]):w.$==2?g.ofArray(["completed"]):$.New(h,{$:0});};x=function(y){return y.$==1?y.$0==="active"?y.$1.$==0?{$:1}:{$:0}:y.$0==="completed"?y.$1.$==0?{$:2}:{$:0}:{$:0}:{$:0};};return i.Create(v,x);}),RemoveCompleted:function(z){return z.Iter(function(A){return f.isDone(j.Get(A.TodoState))?z.Remove(A):null;});},RenderList:function(B,C){var D,F,H;D=function(E){return E.Id;};F=function(G){return f.RenderTodo(B,C,G);};H=k.View(B);return d.ConvertBy(D,F,H);},RenderTodo:function(I,J,K){var L,S,_1,_3,_7,_9,bc,bH,bI;L=function(M,N){var O,P,Q,R;if(N===""){O=I.Remove(K);}else{P=M.$==3?{$:1}:{$:0};Q=K.Text;j.Set(Q,N);R=K.TodoState;O=j.Set(R,P);}return O;};S=function(T){return function(U){return function(V){return function(W){var X,Z;X=function(){return L(U,W);};f.onEnter(T,X);Z=function(){return L(U,V);};return f.onEscape(T,Z);};};};};_1=function(_2){return _2.$==2?"editing":_2.$==1?"completed":_2.$==3?"editing completed":"";};_3=function(_4){var _5,_6;_5=_4.$==2?{$:1}:_4.$==1?{$:0}:_4.$==3?{$:0}:{$:1};_6=K.TodoState;return j.Set(_6,_5);};_7=function(_8){return _8.$==2?false:_8.$==1?true:_8.$==3?true:false;};_9=function(_){var ba,bb;ba=f.isDone(_)?{$:3}:{$:2};bb=K.TodoState;return j.Set(bb,ba);};bc=function(bd){return function(be){var bf,bg,bl,bm,bn,bo,bp,bq,br,bs,bv,bw,bx,bA,bB,bE,bF,bG;bf=l.Create(j.Get(K.Text));bg=g.ofArray([m.Create("class","edit"),n.Handler("keypress",function(){return function(bi){return(((S(bi))(bd))(j.Get(K.Text)))(j.Get(bf));};}),n.Handler("blur",function(){return function(){return L(bd,j.Get(K.Text));};}),n.OnAfterRender(function(bk){return bk.focus();})]);bl=d.Input(bg,bf);bm=[be,bd];if(bm[0].$==1){bo=bm[1];bn=!f.isDone(bo);}else{if(bm[0].$==2){bp=bm[1];bn=f.isDone(bp);}else{bn=true;}}if(bn){br=_1(bd);bs=function(){return function(){return _3(bd);};};bv=_7(bd);bw=l.Create(bv);bx=function(){return function(){return _9(bd);};};bA=K.Text.get_View();bB=function(){return function(){return I.Remove(K);};};bE=g.ofArray([bl]);bF=[m.Create("class",br)];bG=[m.Create("class","view")];bq=d.Concat([d.Element("li",bF,[d.Element("div",bG,[d.CheckBox([m.Create("class","toggle"),m.Create("type","checkbox"),n.Handler("click",bs)],bw),d.Element("label",[n.Handler("dblclick",bx)],[d.TextView(bA)]),d.Element("button",[m.Create("class","destroy"),n.Handler("click",bB)],[])]),d.Concat(bE)])]);}else{bq=d.get_Empty();}return bq;};};bH=K.TodoState.get_View();bI=o.Map2(bc,bH,J);return d.EmbedView(bI);},ShowIfNotEmpty:function(bJ,bK){var bL,bN,bO;bL=function(bM){return p.isEmpty(bM)?d.get_Empty():bK;};bN=k.View(bJ);bO=o.Map(bL,bN);return d.EmbedView(bO);},TodoApp:$.Field(function(){var bP,bR,bS,bT,bU,bV,bW,bX,bZ,b1,b3,b7,b8,ca,cb,cj,ck,cn,co,cs,ct,cu,cv,cx,cy,cA,cB,cC,cD,cG,cH,cK,cL,cO,cP,cW,cX,cY,cZ,c0;bP=function(bQ){return bQ.Id;};bR=$.New(h,{$:0});bS=q.Create(bP,bR);bT=i.Install(f.Pages());bU=l.Create("");bV=l.Create(false);bW=k.View(bS);bX=function(bY){return bY.TodoState.get_View();};bZ=function(b0){return f.isDone(b0);};b1=function(b2){return o.Map(bZ,b2);};b3=function(b4){var b5,b6;b5=p.map(bX,b4);b6=p.map(b1,b5);return f["View.Sequence.Static"](b6);};b7=r.Bind(b3,bW);b8=function(b9){var b_;b_=p.forall(function(b$){return b$;},b9);j.Set(bV,b_);return b_;};ca=o.Map(b8,b7);cb=function(){return function(cd){var ce;ce=function(){var cg,ch,ci;cg=s.Trim(j.Get(bU));if(cg!==""){ci=f.mkTodo(cg);bS.Add(ci);ch=j.Set(bU,"");}else{ch=null;}return ch;};return f.onEnter(cd,ce);};};cj=f.notDoneItems(bS);ck=function(cl){return n.DynamicClass("selected",bT.get_View(),function(cm){return t.Equals(cl,cm);});};co=function(){return d.CheckBox(g.ofArray([f.op_EqualsEqualsGreater("class","toggle-all"),f.op_EqualsEqualsGreater("type","checkbox"),n.Handler("click",function(){return function(){return f.ToggleAllDone(bS);};})]),bV);};cs=o.Map(co,ca);cn=g.ofArray([f.ShowIfNotEmpty(bS,d.EmbedView(cs))]);ct=g.ofArray([f.RenderList(bS,bT.get_View())]);cv=function(cw){return $$.String(cw);};cx=o.Map(cv,cj);cy=function(cz){return cz===1?"item":"items";};cA=o.Map(cy,cj);cD=function(){var cF;cF={$:0};return j.Set(bT,cF);};cC=g.ofArray([d.Link("All",g.ofArray([ck({$:0})]),cD)]);cH=function(){var cJ;cJ={$:1};return j.Set(bT,cJ);};cG=g.ofArray([d.Link("Active",g.ofArray([ck({$:1})]),cH)]);cL=function(){var cN;cN={$:2};return j.Set(bT,cN);};cK=g.ofArray([d.Link("Completed",g.ofArray([ck({$:2})]),cL)]);cB=g.ofArray([d.Concat(g.ofArray([d.Element("li",[],cC),d.Element("li",[],cG),d.Element("li",[],cK)]))]);cP=function(cQ){var cR,cT,cU;cR=function(cS){return cS;};if(p.exists(cR,cQ)){cU=function(){return f.RemoveCompleted(bS);};cT=d.Button("Clear Completed",g.ofArray([f.op_EqualsEqualsGreater("class","clear-completed")]),cU);}else{cT=d.get_Empty();}return cT;};cW=o.Map(cP,b7);cO=g.ofArray([d.EmbedView(cW)]);cX=[m.Create("class","footer")];cu=g.ofArray([f.ShowIfNotEmpty(bS,d.Concat([d.Element("footer",cX,[d.Element("span",[m.Create("class","todo-count")],[d.Element("strong",[],[d.TextView(cx)]),d.TextNode("\n                "),d.TextView(cA),d.TextNode(" left\n            ")]),d.Element("ul",[m.Create("class","filters")],u.ofSeq(cB)),d.Concat(cO)])]))]);cY=[m.Create("class","todoapp"),m.Create("data-chidlren-template","TodoApp")];cZ=[m.Create("class","info")];c0=[];return d.Concat([d.Element("section",cY,[d.Element("header",[m.Create("class","header")],[d.Element("h1",[],[d.TextNode("todos")]),d.Input([m.Create("class","new-todo"),n.Handler("keyup",cb),m.Create("placeholder","What needs to be done?"),m.Create("autofocus","")],bU)]),d.Element("section",[m.Create("class","main")],[d.Concat(cn),d.Element("label",[m.Create("for","toggle-all")],[d.TextNode("Mark all as complete")]),d.Element("ul",[m.Create("class","todo-list")],u.ofSeq(ct))]),d.Concat(cu)]),d.Element("footer",cZ,[d.Element("p",[],[d.TextNode("Double-click to edit a todo")]),d.Element("p",c0,[d.TextNode("Written by "),d.Element("a",[m.Create("href","https://github.com/SimonJF")],[d.TextNode("Simon Fowler")]),d.TextNode(" and "),d.Element("a",[m.Create("href","https://github.com/qwe2")],[d.TextNode("István Gansperger")])])])]);}),ToggleAllDone:function(c1){var c2,c5,c6;c2=c1.TryFind(function(c3){var c4;c4=f.isDone(j.Get(c3.TodoState));return!c4;});c5=c2.$==1;c6=c5?{$:1}:{$:0};return c1.Iter(function(c7){var c8;c8=c7.TodoState;return j.Set(c8,c6);});},"View.Sequence.Static":function(c9){var c_,dc,df;c_=function(c$){return function(da){var db;db=[da];return p.append(c$,db);};};dc=function(dd){return function(de){return o.Map2(c_,dd,de);};};df=r.Const(p.empty());return p.fold(dc,df,c9);},allDone:function(dg){var dh;dh=function(di){return f.isDone(j.Get(di.TodoState));};return p.forall(dh,dg);},fresh:function(){var dj,dk;dj=f.runningId();dk=f.runningId()+1;f.runningId=function(){return dk;};return dj;},isDone:function(dl){return dl.$==2?false:dl.$==1?true:dl.$==3?true:false;},mkTodo:function(dm){return{Id:f.fresh(),Text:l.Create(dm),TodoState:l.Create({$:0})};},notDoneItems:function(dn){var _do,dq,dr;_do=function(dp){return f.isDone(dp)?0:1;};dq=k.View(dn);dr=function(ds){return p.fold(function(dt){return function(du){var dv,dw;dv=du.TodoState.get_View();dw=function(dx){return function(dy){return dx+_do(dy);};};return o.Map2(dw,dt,dv);};},r.Const(0),ds);};return r.Bind(dr,dq);},onEnter:function(dz,dA){var dB,dC;dB=dz.keyCode;dC=dz.which;return(dB===13?true:dC===13)?dA(null):null;},onEscape:function(dD,dE){var dF,dG;dF=dD.keyCode;dG=dD.which;return(dF===27?true:dG===27)?dE(null):null;},op_EqualsEqualsGreater:function(dH,dI){return m.Create(dH,dI);},runningId:$.Field(function(){return 0;}),txt:$.Field(function(){return function(dJ){return d.TextNode(dJ);};})}}});$.OnInit(function(){a=$.Safe($$.WebSharper.UI);b=$.Safe(a.Next);c=$.Safe(b.Client);d=$.Safe(c.Doc);e=$.Safe($$.PrettyTodo);f=$.Safe(e.Client);g=$.Safe($$.WebSharper.List);h=$.Safe(g.T);i=$.Safe(b.RouteMap1);j=$.Safe(b.Var1);k=$.Safe(b.ListModel1);l=$.Safe(b.Var);m=$.Safe(c.AttrProxy);n=$.Safe(c.Attr);o=$.Safe(b.View);p=$.Safe($$.WebSharper.Seq);q=$.Safe(b.ListModel);r=$.Safe(b.View1);s=$.Safe($$.WebSharper.Strings);t=$.Safe($$.WebSharper.Unchecked);return u=$.Safe($$.WebSharper.Arrays);});$.OnLoad(function(){f.txt();f.runningId();f.TodoApp();f.Pages();f.Main();return;});}());


if (typeof IntelliFactory !=='undefined')
  IntelliFactory.Runtime.Start();
